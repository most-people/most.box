(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),n=e.i(71645),i=e.i(73404),r=e.i(51937),a=e.i(46614);function o(e,t){return n=>{if("string"!=typeof n||0===n.trim().length)throw Error(t);return`${e}-${n}`}}var l=e.i(24848),s=e.i(43798),c=e.i(7670),d=e.i(15259),u=e.i(35783),h=e.i(12761),m=e.i(89549),x=e.i(14037),p=e.i(44662),f=e.i(21879),j=e.i(84660);let[g,v]=(0,j.createSafeContext)("Tabs component was not found in the tree");var y={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",tab:"m_4ec4dce6",panel:"m_b0c91715",tabSection:"m_fc420b1f",tabLabel:"m_42bbd1ae","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};let b=(0,f.factory)((e,n)=>{let i=(0,m.useProps)("TabsList",null,e),{children:r,className:a,grow:o,justify:l,classNames:s,styles:c,style:d,mod:u,...h}=i,x=v();return(0,t.jsx)(p.Box,{...h,...x.getStyles("list",{className:a,style:d,classNames:s,styles:c,props:i,variant:x.variant}),ref:n,role:"tablist",variant:x.variant,mod:[{grow:o,orientation:x.orientation,placement:"vertical"===x.orientation&&x.placement,inverted:x.inverted},u],"aria-orientation":x.orientation,__vars:{"--tabs-justify":l},children:r})});b.classes=y,b.displayName="@mantine/core/TabsList";let w=(0,f.factory)((e,n)=>{let i=(0,m.useProps)("TabsPanel",null,e),{children:r,className:a,value:o,classNames:l,styles:s,style:c,mod:d,keepMounted:u,...h}=i,x=v(),f=x.value===o,j=x.keepMounted||u||f?r:null;return(0,t.jsx)(p.Box,{...x.getStyles("panel",{className:a,classNames:l,styles:s,style:[c,f?void 0:{display:"none"}],props:i}),ref:n,mod:[{orientation:x.orientation},d],role:"tabpanel",id:x.getPanelId(o),"aria-labelledby":x.getTabId(o),...h,children:j})});w.classes=y,w.displayName="@mantine/core/TabsPanel";var S=e.i(28410),C=e.i(22442),k=e.i(17303),I=e.i(25436);let T=(0,f.factory)((e,n)=>{let i=(0,m.useProps)("TabsTab",null,e),{className:r,children:a,rightSection:o,leftSection:l,value:s,onClick:c,onKeyDown:u,disabled:h,color:x,style:p,classNames:f,styles:j,vars:g,mod:y,tabIndex:b,...w}=i,T=(0,C.useMantineTheme)(),{dir:$}=(0,k.useDirection)(),P=v(),M=s===P.value,B={classNames:f,styles:j,props:i};return(0,t.jsxs)(I.UnstyledButton,{...P.getStyles("tab",{className:r,style:p,variant:P.variant,...B}),disabled:h,unstyled:P.unstyled,variant:P.variant,mod:[{active:M,disabled:h,orientation:P.orientation,inverted:P.inverted,placement:"vertical"===P.orientation&&P.placement},y],ref:n,role:"tab",id:P.getTabId(s),"aria-selected":M,tabIndex:void 0!==b?b:M||null===P.value?0:-1,"aria-controls":P.getPanelId(s),onClick:e=>{P.onChange(P.allowTabDeactivation&&s===P.value?null:s),c?.(e)},__vars:{"--tabs-color":x?(0,d.getThemeColor)(x,T):void 0},onKeyDown:(0,S.createScopedKeydownHandler)({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:P.activateTabWithKeyboard,loop:P.loop,orientation:P.orientation||"horizontal",dir:$,onKeyDown:u}),...w,children:[l&&(0,t.jsx)("span",{...P.getStyles("tabSection",B),"data-position":"left",children:l}),a&&(0,t.jsx)("span",{...P.getStyles("tabLabel",B),children:a}),o&&(0,t.jsx)("span",{...P.getStyles("tabSection",B),"data-position":"right",children:o})]})});T.classes=y,T.displayName="@mantine/core/TabsTab";let $="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",P={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,variant:"default",placement:"left"},M=(0,s.createVarsResolver)((e,{radius:t,color:n,autoContrast:i})=>({root:{"--tabs-radius":(0,l.getRadius)(t),"--tabs-color":(0,d.getThemeColor)(n,e),"--tabs-text-color":(0,h.getAutoContrastValue)(i,e)?(0,u.getContrastColor)({color:n,theme:e,autoContrast:i}):void 0}})),B=(0,f.factory)((e,n)=>{let i=(0,m.useProps)("Tabs",P,e),{defaultValue:l,value:s,onChange:c,orientation:d,children:u,loop:h,id:f,activateTabWithKeyboard:j,allowTabDeactivation:v,variant:b,color:w,radius:S,inverted:C,placement:k,keepMounted:I,classNames:T,styles:B,unstyled:z,className:A,style:_,vars:D,autoContrast:R,mod:N,attributes:F,...G}=i,E=(0,r.useId)(f),[U,O]=(0,a.useUncontrolled)({value:s,defaultValue:l,finalValue:null,onChange:c}),V=(0,x.useStyles)({name:"Tabs",props:i,classes:y,className:A,style:_,classNames:T,styles:B,unstyled:z,attributes:F,vars:D,varsResolver:M});return(0,t.jsx)(g,{value:{placement:k,value:U,orientation:d,id:E,loop:h,activateTabWithKeyboard:j,getTabId:o(`${E}-tab`,$),getPanelId:o(`${E}-panel`,$),onChange:O,allowTabDeactivation:v,variant:b,color:w,radius:S,inverted:C,keepMounted:I,unstyled:z,getStyles:V},children:(0,t.jsx)(p.Box,{ref:n,id:E,variant:b,mod:[{orientation:d,inverted:"horizontal"===d&&C,placement:"vertical"===d&&k},N],...V("root"),...G,children:u})})});B.classes=y,B.displayName="@mantine/core/Tabs",B.Tab=T,B.Panel=w,B.List=b;var z=e.i(94229),A=e.i(51514),_=e.i(22016),D=e.i(34616),R=e.i(77936),N=e.i(26200),F=e.i(39865),G=e.i(84193);function E(){let e=(0,F.useUserStore)(e=>e.wallet),n=e?.address||G.default.ZeroAddress,r=(0,F.useUserStore)(e=>e.exit);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Box,{className:"header",children:(0,t.jsxs)(N.Group,{wrap:"nowrap",children:[(0,t.jsx)(D.Avatar,{component:_.default,href:"/profile",size:"md",radius:"sm",src:e?.address?G.default.avatar(e.address):"/icons/pwa-512x512.png",alt:"it's me"}),(0,t.jsxs)(p.Box,{children:[(0,t.jsx)(z.Text,{size:"lg",fw:500,lineClamp:2,children:e?.username||"Most.Box"}),(0,t.jsxs)(z.Text,{size:"sm",c:"dimmed",component:_.default,href:"/profile",children:["åœ°å€: ",G.default.formatAddress(n)]})]}),(0,t.jsx)(i.ActionIcon,{ml:"auto",variant:"subtle",color:"gray",component:_.default,href:{pathname:"/card",query:{uid:n}},children:(0,t.jsx)(A.Icon,{name:"QRCode",size:18})})]})}),(0,t.jsxs)(R.Stack,{className:"menu-list",mb:"xs",gap:0,children:[(0,t.jsx)(U,{icon:"Web3",label:"Web3",link:"/web3"}),(0,t.jsx)(U,{icon:"Website",label:"ä¸ªäººä¸»é¡µ",link:`/@${n}`}),(0,t.jsx)(U,{icon:"Earth",label:"èŠ‚ç‚¹",link:"/dot"}),(0,t.jsx)(U,{icon:"Chat",label:"èŠå¤©",link:"/chat/?id=001"})]}),(0,t.jsxs)(R.Stack,{className:"menu-list",gap:0,children:[(0,t.jsx)(U,{icon:"About",label:"å…³äº",link:"/about"}),(0,t.jsx)(U,{icon:"Setting",label:"è®¾ç½®",link:"/setting"}),(0,t.jsx)(U,{icon:"Join",label:"å¿—åŒé“åˆ",link:"/join"})]}),(0,t.jsx)(R.Stack,{className:"menu-list",mt:"xs",children:(0,t.jsx)(U,{icon:"Exit",label:e?"é€€å‡ºè´¦æˆ·":"å»ç™»å½•",link:"/login",onClick:()=>{e&&r()}})})]})}function U({icon:e,label:n,link:i,onClick:r}){return(0,t.jsxs)(p.Box,{component:_.default,href:i,className:"menu-item",onClick:r,children:[(0,t.jsxs)(N.Group,{children:[(0,t.jsx)(A.Icon,{name:e,size:32}),(0,t.jsx)(z.Text,{children:n})]}),(0,t.jsx)(A.Icon,{name:"Arrow",size:18})]})}var O=e.i(33372),V=e.i(29277),L=e.i(47596),K=e.i(71133),q=e.i(84086),W=e.i(25293),H=e.i(59729);let[Q,Z]=(0,j.createSafeContext)("Grid component was not found in tree");var J=e.i(45981),X=e.i(87725),Y=e.i(85675),ee=e.i(57678),et=e.i(99818);let en=(e,t)=>"content"===e?"auto":"auto"===e?"0rem":e?`${100/(t/e)}%`:void 0,ei=(e,t,n)=>n||"auto"===e?"100%":"content"===e?"unset":en(e,t),er=(e,t)=>{if(e)return"auto"===e||t?"1":"auto"},ea=(e,t)=>0===e?"0":e?`${100/(t/e)}%`:void 0;function eo({span:e,order:n,offset:i,selector:r}){let a=(0,C.useMantineTheme)(),o=Z(),l=o.breakpoints||a.breakpoints,s=void 0===(0,ee.getBaseValue)(e)?12:(0,ee.getBaseValue)(e),c=(0,X.filterProps)({"--col-order":(0,ee.getBaseValue)(n)?.toString(),"--col-flex-grow":er(s,o.grow),"--col-flex-basis":en(s,o.columns),"--col-width":"content"===s?"auto":void 0,"--col-max-width":ei(s,o.columns,o.grow),"--col-offset":ea((0,ee.getBaseValue)(i),o.columns)}),d=(0,J.keys)(l).reduce((t,r)=>(t[r]||(t[r]={}),"object"==typeof n&&void 0!==n[r]&&(t[r]["--col-order"]=n[r]?.toString()),"object"==typeof e&&void 0!==e[r]&&(t[r]["--col-flex-grow"]=er(e[r],o.grow),t[r]["--col-flex-basis"]=en(e[r],o.columns),t[r]["--col-width"]="content"===e[r]?"auto":void 0,t[r]["--col-max-width"]=ei(e[r],o.columns,o.grow)),"object"==typeof i&&void 0!==i[r]&&(t[r]["--col-offset"]=ea(i[r],o.columns)),t),{}),u=(0,Y.getSortedBreakpoints)((0,J.keys)(d),l).filter(e=>(0,J.keys)(d[e.value]).length>0).map(e=>({query:"container"===o.type?`mantine-grid (min-width: ${l[e.value]})`:`(min-width: ${l[e.value]})`,styles:d[e.value]}));return(0,t.jsx)(et.InlineStyles,{styles:c,media:"container"===o.type?void 0:u,container:"container"===o.type?u:void 0,selector:r})}var el={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};let es={span:12},ec=(0,f.factory)((e,n)=>{let{classNames:i,className:r,style:a,styles:o,vars:l,span:s,order:d,offset:u,...h}=(0,m.useProps)("GridCol",es,e),x=Z(),f=(0,H.useRandomClassName)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eo,{selector:`.${f}`,span:s,order:d,offset:u}),(0,t.jsx)(p.Box,{ref:n,...x.getStyles("col",{className:(0,c.default)(r,f),style:a,classNames:i,styles:o}),...h})]})});function ed({gutter:e,selector:n,breakpoints:i,type:r}){let a=(0,C.useMantineTheme)(),o=i||a.breakpoints,s=(0,X.filterProps)({"--grid-gutter":(0,l.getSpacing)((0,ee.getBaseValue)(e))}),c=(0,J.keys)(o).reduce((t,n)=>(t[n]||(t[n]={}),"object"==typeof e&&void 0!==e[n]&&(t[n]["--grid-gutter"]=(0,l.getSpacing)(e[n])),t),{}),d=(0,Y.getSortedBreakpoints)((0,J.keys)(c),o).filter(e=>(0,J.keys)(c[e.value]).length>0).map(e=>({query:"container"===r?`mantine-grid (min-width: ${o[e.value]})`:`(min-width: ${o[e.value]})`,styles:c[e.value]}));return(0,t.jsx)(et.InlineStyles,{styles:s,media:"container"===r?void 0:d,container:"container"===r?d:void 0,selector:n})}ec.classes=el,ec.displayName="@mantine/core/GridCol";let eu={gutter:"md",grow:!1,columns:12},eh=(0,s.createVarsResolver)((e,{justify:t,align:n,overflow:i})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":i}})),em=(0,f.factory)((e,n)=>{let i=(0,m.useProps)("Grid",eu,e),{classNames:r,className:a,style:o,styles:l,unstyled:s,vars:c,grow:d,gutter:u,columns:h,align:f,justify:j,children:g,breakpoints:v,type:y,attributes:b,...w}=i,S=(0,x.useStyles)({name:"Grid",classes:el,props:i,className:a,style:o,classNames:r,styles:l,unstyled:s,attributes:b,vars:c,varsResolver:eh}),C=(0,H.useRandomClassName)();return"container"===y&&v?(0,t.jsxs)(Q,{value:{getStyles:S,grow:d,columns:h,breakpoints:v,type:y},children:[(0,t.jsx)(ed,{selector:`.${C}`,...i}),(0,t.jsx)("div",{...S("container"),children:(0,t.jsx)(p.Box,{ref:n,...S("root",{className:C}),...w,children:(0,t.jsx)("div",{...S("inner"),children:g})})})]}):(0,t.jsxs)(Q,{value:{getStyles:S,grow:d,columns:h,breakpoints:v,type:y},children:[(0,t.jsx)(ed,{selector:`.${C}`,...i}),(0,t.jsx)(p.Box,{ref:n,...S("root",{className:C}),...w,children:(0,t.jsx)("div",{...S("inner"),children:g})})]})});em.classes=el,em.displayName="@mantine/core/Grid",em.Col=ec;var ex=e.i(51501),ep=e.i(5948),ef=e.i(69625),ej=e.i(98526),eg=e.i(42948),ev=e.i(13029),ey=e.i(98193),eb={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};let ew={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:(0,ej.getDefaultZIndex)("overlay")},eS=(0,s.createVarsResolver)((e,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}})),eC=(0,f.factory)((e,n)=>{let i=(0,m.useProps)("LoadingOverlay",ew,e),{classNames:r,className:a,style:o,styles:l,unstyled:s,vars:c,transitionProps:d,loaderProps:u,overlayProps:h,visible:f,zIndex:j,attributes:g,...v}=i,y=(0,C.useMantineTheme)(),b=(0,x.useStyles)({name:"LoadingOverlay",classes:eb,props:i,className:a,style:o,classNames:r,styles:l,unstyled:s,attributes:g,vars:c,varsResolver:eS}),w={...ew.overlayProps,...h};return(0,t.jsx)(ey.Transition,{transition:"fade",...d,mounted:!!f,children:e=>(0,t.jsxs)(p.Box,{...b("root",{style:e}),ref:n,...v,children:[(0,t.jsx)(eg.Loader,{...b("loader"),unstyled:s,...u}),(0,t.jsx)(ev.Overlay,{...w,...b("overlay"),darkHidden:!0,unstyled:s,color:h?.color||y.white}),(0,t.jsx)(ev.Overlay,{...w,...b("overlay"),lightHidden:!0,unstyled:s,color:h?.color||y.colors.dark[5]})]})})});eC.classes=eb,eC.displayName="@mantine/core/LoadingOverlay";var ek=e.i(95991),eI={root:"m_8b3717df",breadcrumb:"m_f678d540",separator:"m_3b8f2208"};let eT={separator:"/"},e$=(0,s.createVarsResolver)((e,{separatorMargin:t})=>({root:{"--bc-separator-margin":(0,l.getSpacing)(t)}})),eP=(0,f.factory)((e,i)=>{let r=(0,m.useProps)("Breadcrumbs",eT,e),{classNames:a,className:o,style:l,styles:s,unstyled:c,vars:d,children:u,separator:h,separatorMargin:f,attributes:j,...g}=r,v=(0,x.useStyles)({name:"Breadcrumbs",classes:eI,props:r,className:o,style:l,classNames:a,styles:s,unstyled:c,attributes:j,vars:d,varsResolver:e$}),y=n.Children.toArray(u).reduce((e,t,i,r)=>{let a=(0,ek.isElement)(t)?(0,n.cloneElement)(t,{...v("breadcrumb",{className:t.props?.className}),key:i}):(0,n.createElement)("div",{...v("breadcrumb"),key:i},t);return e.push(a),i!==r.length-1&&e.push((0,n.createElement)(p.Box,{...v("separator"),key:`separator-${i}`},h)),e},[]);return(0,t.jsx)(p.Box,{ref:i,...v("root"),...g,children:y})});eP.classes=eI,eP.displayName="@mantine/core/Breadcrumbs";var eM=e.i(80881),eB=e.i(15379),ez=e.i(33550);let eA=(0,ez.default)("outline","folder-plus","FolderPlus",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}]]);var e_=e.i(57772),eD=e.i(18716);let eR=(0,ez.default)("outline","dots-vertical","DotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),eN=(0,ez.default)("outline","plus","Plus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);var eF=e.i(53917),eG=e.i(53239);let eE=[".note"];function eU(){let e=(0,F.useUserStore)(e=>e.wallet),r=(0,F.useUserStore)(e=>e.files),a=(0,F.useUserStore)(e=>e.filesPath),o=(0,F.useUserStore)(e=>e.setItem),l=(0,F.useUserStore)(e=>e.rootCID),s=(0,F.useUserStore)(e=>e.updateRootCID),c=(0,eG.useDotStore)(e=>e.dotCID),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),[x,p]=(0,n.useState)([]),[f,j]=(0,n.useState)(!1),[g,v]=(0,n.useState)(""),[y,b]=(0,n.useState)(100),[w,S]=(0,n.useState)(!1),[C,k]=(0,n.useState)(null),[I,T]=(0,n.useState)(""),[$,P]=(0,n.useState)(""),[M,B]=(0,n.useState)(!1),[A,D]=(0,n.useState)(!1),[E,U]=(0,n.useState)(""),[H,Q]=(0,n.useState)(!1),Z=(0,n.useRef)(null),J=(0,n.useRef)(null),X=async e=>{try{u(!0);let t=await eB.api.post(`/files/${e}`);v(""),o("files",t.data)}catch(e){console.info(e)}finally{u(!1)}},Y=async()=>{if(!E)return void eF.notifications.show({title:"æç¤º",message:"æ–‡ä»¶å¤¹åç§°ä¸èƒ½ä¸ºç©º",color:"red"});if(r?.some(e=>"directory"===e.type&&e.name===E))return void eF.notifications.show({title:"æç¤º",message:"æ–‡ä»¶å¤¹å·²å­˜åœ¨",color:"red"});try{Q(!0);let e=a?`${a}/${E}`:E,t=new Blob(["Most.Box"],{type:"text/plain"}),n=new FormData;n.append("file",t,"hello.txt"),n.append("path",`${e}/hello.txt`);let i=await eB.api.put("/files.upload",n);if(i.data?.cid)s(),eF.notifications.show({message:"æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ",color:"green"}),await X(a),D(!1),U("");else throw Error("æ–‡ä»¶å¤¹åˆ›å»ºå¤±è´¥")}catch(e){console.info(e),eF.notifications.show({message:e.message,color:"red"})}finally{Q(!1)}},ee=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},et=r?r.filter(e=>G.default.pinyin(e.name,g,0)).sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:+("directory"!==e.type&&"directory"===t.type)):[],en=et.slice(0,y),ei=et.length>y;(0,n.useEffect)(()=>{b(100)},[g]);let er=async e=>{if(!e||0===e.length)return;m(!0);let t=eF.notifications.show({title:"ä¸Šä¼ ä¸­",message:"è¯·ç¨å...",color:"blue",autoClose:!1});try{for(let n=0;n<e.length;n++){let i=e[n],r=new FormData;r.append("file",i);let o=i.webkitRelativePath,l=a?`${a}/${o}`:o;r.append("path",l+i.name);let s=await eB.api.put("/files.upload",r);s.data?.cid&&eF.notifications.update({id:t,title:"ä¸Šä¼ ä¸­",message:`${i.name} ä¸Šä¼ æˆåŠŸ`})}eF.notifications.update({id:t,title:"ä¸Šä¼ å®Œæˆ",message:`å…±ä¸Šä¼  ${e.length} ä¸ªæ–‡ä»¶`,color:"green",autoClose:!0}),s(),await X(a),j(!1),p([])}catch(n){let e=n?.response?.data||"æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•";e.includes("already has")&&(e="æ–‡ä»¶å·²å­˜åœ¨"),eF.notifications.update({id:t,title:"ä¸Šä¼ å¤±è´¥",message:e,color:"red",autoClose:!0})}finally{m(!1)}},ea=e=>{let t=e.target.files;if(t&&t.length>0){let e=Array.from(t);1!==e.length||e[0].webkitRelativePath?(p(e.map(e=>({file:e,path:e.webkitRelativePath||e.name,size:ee(e.size)}))),j(!0)):er(e)}e.target.value=""},eo=()=>{j(!1),p([])},el=async e=>{try{let t=a?`${a}/${e}`:e;await eB.api.delete(`/files/${t}`),eF.notifications.show({title:"åˆ é™¤æˆåŠŸ",message:`æ–‡ä»¶ ${e} å·²åˆ é™¤`,color:"green"}),s(),await X(a)}catch(t){console.error("åˆ é™¤å¤±è´¥:",t),eF.notifications.show({title:"åˆ é™¤å¤±è´¥",message:`åˆ é™¤æ–‡ä»¶ ${e} å¤±è´¥ï¼Œè¯·é‡è¯•`,color:"red"})}},es=async()=>{let e=e=>(e||"").replace(/^\/+|\/+$/g,"");if(!C||!I.trim())return void S(!1);let t=a?`${a}/${C.name}`:C.name,n=e($||""),i=n?`${n}/${I.trim()}`:I.trim();if(e(t)===e(i))return void S(!1);B(!0);try{await eB.api.put("/files.rename",{oldName:`/${e(t)}`,newName:`/${e(i)}`}),s(),eF.notifications.show({title:"é‡å‘½åæˆåŠŸ",message:`æ–°è·¯å¾„åç§° "${e(i)}"`,color:"green"}),await X(a),S(!1),k(null),T(""),P("")}catch(e){console.error("é‡å‘½åå¤±è´¥:",e),eF.notifications.show({title:"é‡å‘½åå¤±è´¥",message:`é‡å‘½åæ–‡ä»¶ "${C.name}" å¤±è´¥ï¼Œè¯·é‡è¯•`,color:"red"})}finally{B(!1)}},ec=e=>{let t=a?`${a}/${e}`:e;o("filesPath",t),X(t)},ed=e=>{let t=(a||"").split("/").filter(Boolean);if(e<0){o("filesPath",""),X("");return}let n=t.slice(0,e+1).join("/");o("filesPath",n),X(n)},eu=e=>{try{let t=new URL(c);t.pathname=`/ipfs/${e.cid["/"]}`,e.name&&t.searchParams.set("filename",e.name),window.open(t.toString(),"_blank")}catch(e){console.error("æ‰“å¼€å¤±è´¥",e)}};(0,n.useEffect)(()=>{l&&e&&!r&&X(a)},[l,e,r]);let eh=e=>(e||"").replace(/^\/+|\/+$/g,""),ej=C?eh(a?`${a}/${C.name}`:C.name):"",eg=eh((($?`${$}/`:"")+I).trim());return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(R.Stack,{gap:"md",p:"md",children:[(0,t.jsx)(K.Center,{children:(0,t.jsx)(W.TextInput,{placeholder:"æœç´¢æ–‡ä»¶åç§°",value:g,onChange:e=>v(e.currentTarget.value),size:"md",radius:"md",w:400,styles:{input:{textAlign:"center"}}})}),(0,t.jsxs)(N.Group,{justify:"space-between",align:"center",pos:"relative",children:[(0,t.jsx)(eC,{visible:d,overlayProps:{backgroundOpacity:0},loaderProps:{type:"dots"}}),(0,t.jsxs)(ef.Badge,{variant:"light",size:"lg",children:[g?`æ˜¾ç¤º ${en.length} / ${et.length} (æ€»å…± ${r?.length||0})`:`æ˜¾ç¤º ${en.length} / ${r?.length||0}`," ","ä¸ªæ–‡ä»¶"]}),(0,t.jsxs)(N.Group,{children:[(0,t.jsx)(q.Tooltip,{label:"åˆ·æ–°",children:(0,t.jsx)(i.ActionIcon,{size:"lg",onClick:()=>X(a),color:"blue",disabled:!e,children:(0,t.jsx)(eD.IconRefresh,{size:18})})}),(0,t.jsx)(q.Tooltip,{label:"ä¸Šä¼ æ–‡ä»¶",children:(0,t.jsx)(i.ActionIcon,{size:"lg",onClick:()=>{Z.current?.click()},color:"green",disabled:!e||h,children:(0,t.jsx)(eN,{size:18})})}),(0,t.jsx)(q.Tooltip,{label:"ä¸Šä¼ æ–‡ä»¶å¤¹",children:(0,t.jsx)(i.ActionIcon,{size:"lg",onClick:()=>{J.current?.click()},color:"yellow",disabled:!e||h,children:(0,t.jsx)(eA,{size:18})})})]})]}),g&&0===et.length?(0,t.jsxs)(R.Stack,{align:"center",justify:"center",h:200,children:[(0,t.jsx)(z.Text,{size:"lg",c:"dimmed",children:"æœªæ‰¾åˆ°æ–‡ä»¶"}),(0,t.jsx)(z.Text,{size:"sm",c:"dimmed",children:"å°è¯•ç”¨å…¶ä»–å…³é”®è¯æœç´¢"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ex.Card,{radius:"md",withBorder:!0,children:(0,t.jsxs)(N.Group,{justify:"space-between",wrap:"nowrap",gap:4,children:[(0,t.jsxs)(N.Group,{gap:8,wrap:"nowrap",children:[(0,t.jsx)(z.Text,{fw:500,children:"ğŸ“"}),(0,t.jsxs)(eP,{separator:"â€º",children:[(0,t.jsx)(eM.Anchor,{fw:500,onClick:()=>ed(-1),underline:"never",children:"æ ¹ç›®å½•"}),(a||"").split("/").filter(Boolean).map((e,n)=>(0,t.jsx)(eM.Anchor,{fw:500,onClick:()=>ed(n),underline:"never",children:e},n))]})]}),(0,t.jsxs)(ep.Menu,{shadow:"md",children:[(0,t.jsx)(ep.Menu.Target,{children:(0,t.jsx)(i.ActionIcon,{variant:"subtle",color:"gray",children:(0,t.jsx)(eR,{size:14})})}),(0,t.jsxs)(ep.Menu.Dropdown,{children:[(0,t.jsx)(ep.Menu.Item,{onClick:()=>D(!0),leftSection:"ğŸ“",disabled:!e,children:"æ–°å»ºæ–‡ä»¶å¤¹"}),(0,t.jsx)(ep.Menu.Item,{onClick:()=>eu({name:"root",type:"directory",cid:{"/":l},size:0}),leftSection:"ğŸŒ",disabled:!e,children:"æ ¹ç›®å½• CID"})]})]})]})}),(0,t.jsxs)(em,{gutter:"md",pos:"relative",children:[(0,t.jsx)(eC,{visible:d,overlayProps:{backgroundOpacity:0},loaderProps:{opacity:0}}),en.map((e,n)=>{let r;return(0,t.jsx)(em.Col,{span:{base:12,xs:6,sm:4,md:3,lg:3,xl:2},children:(0,t.jsx)(ex.Card,{radius:"md",withBorder:!0,children:(0,t.jsxs)(N.Group,{justify:"space-between",wrap:"nowrap",gap:4,children:[(0,t.jsx)(R.Stack,{flex:1,style:{cursor:"directory"===e.type?"pointer":""},onClick:()=>{"directory"===e.type&&ec(e.name)},children:(0,t.jsxs)(z.Text,{fw:500,lineClamp:1,children:["directory"===e.type?"ğŸ“":"ğŸ“„"," ",e.name]})}),(0,t.jsxs)(ep.Menu,{shadow:"md",width:120,children:[(0,t.jsx)(ep.Menu.Target,{children:(0,t.jsx)(i.ActionIcon,{variant:"subtle",color:"gray",children:(0,t.jsx)(eR,{size:14})})}),(0,t.jsxs)(ep.Menu.Dropdown,{children:[(0,t.jsx)(ep.Menu.Item,{leftSection:"ğŸ“–",onClick:()=>{"directory"===e.type?ec(e.name):eu(e)},children:"directory"===e.type?"æ‰“å¼€":"æŸ¥çœ‹"}),(0,t.jsx)(ep.Menu.Item,{leftSection:"ğŸ“¤",onClick:()=>{let t,n,i;t=e.cid["/"],n=new URLSearchParams({filename:e.name}),"directory"===e.type&&n.set("type","dir"),i=`/ipfs/${t}/?${n.toString()}`,window.open(i)},children:"åˆ†äº«"}),(0,t.jsx)(ep.Menu.Item,{leftSection:"âœï¸",onClick:()=>{k(e),T(e.name),P(a||""),S(!0)},children:"é‡å‘½å"}),(0,t.jsx)(ep.Menu.Divider,{}),(0,t.jsx)(ep.Menu.Item,{leftSection:"â¬‡ï¸",component:_.default,target:"_blank",href:(r=new URLSearchParams({download:"true",filename:e.name}),"directory"===e.type&&(r.set("format","tar"),r.set("filename",`${e.name}.tar`)),`${c}/ipfs/${e.cid["/"]}?${r.toString()}`),children:"ä¸‹è½½"}),(0,t.jsx)(ep.Menu.Item,{disabled:""===a&&"directory"===e.type&&eE.includes(e.name),leftSection:"ğŸ—‘ï¸",onClick:()=>{window.confirm(`ç¡®å®šè¦åˆ é™¤æ–‡ä»¶ "${e.name}" å—ï¼Ÿ`)&&el(e.name)},children:"åˆ é™¤"}),e.size>0&&(0,t.jsx)(ep.Menu.Label,{children:(0,t.jsx)(K.Center,{children:(0,t.jsx)(z.Text,{size:"xs",c:"dimmed",children:ee(e.size)})})})]})]})]})})},n)})]}),ei&&(0,t.jsx)(K.Center,{children:(0,t.jsxs)(O.Button,{variant:"light",onClick:()=>{b(e=>e+100)},size:"md",children:["ç»§ç»­åŠ è½½ (",et.length-y," ä¸ªå‰©ä½™)"]})})]})]}),!e&&(0,t.jsx)(K.Center,{children:(0,t.jsx)(O.Button,{variant:"gradient",component:_.default,href:"/login",children:"å»ç™»å½•"})}),(0,t.jsx)("input",{ref:Z,type:"file",multiple:!0,style:{display:"none"},onChange:ea}),(0,t.jsx)("input",{ref:J,type:"file",webkitdirectory:"",multiple:!0,style:{display:"none"},onChange:ea}),(0,t.jsx)(V.Modal,{opened:f,onClose:eo,title:"æ–‡ä»¶é¢„è§ˆ",size:"lg",centered:!0,children:(0,t.jsxs)(R.Stack,{gap:"md",children:[(0,t.jsx)(N.Group,{justify:"space-between",children:(0,t.jsxs)(z.Text,{size:"sm",c:"dimmed",children:["å…± ",x.length," ä¸ªæ–‡ä»¶ï¼Œæ€»å¤§å°: ",ee(x.reduce((e,t)=>e+t.file.size,0))]})}),(0,t.jsx)(L.ScrollArea,{h:300,children:(0,t.jsx)(R.Stack,{gap:"xs",children:x.map((e,n)=>(0,t.jsx)(ex.Card,{p:"sm",withBorder:!0,children:(0,t.jsxs)(N.Group,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,t.jsxs)(N.Group,{align:"center",children:[(0,t.jsx)(z.Text,{size:"sm",children:"ğŸ“„"}),(0,t.jsxs)(R.Stack,{gap:2,children:[(0,t.jsx)(z.Text,{size:"sm",fw:500,children:e.path}),(0,t.jsx)(z.Text,{size:"xs",c:"dimmed",children:e.size})]})]}),(0,t.jsx)(i.ActionIcon,{variant:"subtle",color:"gray",onClick:()=>{let e;p(e=x.filter((e,t)=>t!==n)),0===e.length&&j(!1)},children:(0,t.jsx)(e_.IconX,{})})]})},n))})}),(0,t.jsxs)(N.Group,{justify:"flex-end",gap:"sm",children:[(0,t.jsx)(O.Button,{variant:"outline",onClick:eo,disabled:h,children:"å–æ¶ˆ"}),(0,t.jsx)(O.Button,{onClick:()=>{er(x.map(e=>e.file))},loading:h,disabled:0===x.length,children:"ç¡®è®¤ä¸Šä¼ "})]})]})}),(0,t.jsx)(V.Modal,{opened:A,onClose:()=>D(!1),title:"æ–°å»ºæ–‡ä»¶å¤¹",centered:!0,children:(0,t.jsxs)(R.Stack,{gap:"md",children:[(0,t.jsx)(W.TextInput,{value:E,onChange:e=>U(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&Y()},disabled:H,autoFocus:!0}),(0,t.jsxs)(N.Group,{justify:"flex-end",gap:"sm",children:[(0,t.jsx)(O.Button,{onClick:()=>D(!1),variant:"default",children:"å–æ¶ˆ"}),(0,t.jsx)(O.Button,{onClick:Y,loading:H,children:"ç¡®è®¤"})]})]})}),(0,t.jsx)(V.Modal,{opened:w,onClose:()=>{S(!1),k(null),T(""),P("")},title:"é‡å‘½å / ç§»åŠ¨",centered:!0,children:(0,t.jsxs)(R.Stack,{gap:"md",children:[(0,t.jsx)(W.TextInput,{label:"ç›®å½•è·¯å¾„",placeholder:"æ ¹ç›®å½•ç•™ç©ºï¼Œä¾‹å¦‚: foo/bar",value:$,onChange:e=>P(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&es()},disabled:M}),(0,t.jsx)(W.TextInput,{label:"æ–‡ä»¶/æ–‡ä»¶å¤¹åç§°",placeholder:"è¯·è¾“å…¥æ–°çš„åç§°",value:I,onChange:e=>T(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&es()},disabled:M,autoFocus:!0}),(0,t.jsxs)(N.Group,{justify:"flex-end",gap:"sm",children:[(0,t.jsx)(O.Button,{variant:"outline",onClick:()=>{S(!1),k(null),T(""),P("")},disabled:M,children:"å–æ¶ˆ"}),(0,t.jsx)(O.Button,{onClick:es,disabled:!I.trim()||ej===eg||M,loading:M,children:"ç¡®è®¤"})]})]})})]})}var eO=e.i(5142);function eV(){let e,r,a=(0,F.useUserStore)(e=>e.wallet),o=(0,F.useUserStore)(e=>e.notes),l=(0,F.useUserStore)(e=>e.rootCID),s=(0,F.useUserStore)(e=>e.updateRootCID),c=(0,F.useUserStore)(e=>e.notesQuery),d=(0,F.useUserStore)(e=>e.setItem),[u,h]=(0,n.useState)(!1),[m,x]=(0,n.useState)(100),[f,{open:j,close:g}]=(0,eO.useDisclosure)(!1),[v,y]=(0,n.useState)(""),[b,w]=(0,n.useState)(""),[S,C]=(0,n.useState)(""),[k,I]=(0,n.useState)(!1),[T,{open:$,close:P}]=(0,eO.useDisclosure)(!1),[M,B]=(0,n.useState)(null),[A,D]=(0,n.useState)(""),[E,U]=(0,n.useState)(!1),[L,H]=(0,n.useState)(""),[Q,Z]=(0,n.useState)(""),J=e=>{let t=new URL(window.location.href);return t.pathname="/note/",t.searchParams.set("uid",a?.address||""),t.searchParams.set("name",e.name),t.searchParams.set("cid",e.cid),t.href},X=o?o.filter(e=>G.default.pinyin(e.name,c,0)):[],Y=X.slice(0,m),ee=X.length>m;(0,n.useEffect)(()=>{x(100)},[c]);let et=async()=>{try{h(!0);let e=(await eB.api.post("/files/.note")).data;if(e){let t=e.map(e=>({name:e.name,cid:e.cid["/"]}));d("notes",t)}}catch(e){console.info(e)}finally{h(!1)}},en=async()=>{let e=b.trim(),t=v.trim();if(!t)return void C("è¯·è¾“å…¥ç¬”è®°åç§°");if(e.includes("/")||t.includes("/"))return void C("ä¸èƒ½åŒ…å«å­—ç¬¦ /");let n=e?`${e}-${t}`:t;if(o?.some(e=>e.name===n))return void C("ç¬”è®°åç§°å·²å­˜åœ¨");try{I(!0);let e=new FormData,t=new Blob([""],{type:"text/markdown"});e.append("file",t,"index.md"),e.append("path",`/.note/${n}/index.md`);let i=await eB.api.put("/files.upload",e);i.data?.cid&&(s(),eF.notifications.show({color:"green",message:"ç¬”è®°åˆ›å»ºæˆåŠŸ"}),g(),await et(),y(""),w(""))}catch(e){eF.notifications.show({color:"red",message:e instanceof Error?e.message:"åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•"})}finally{I(!1)}},ei=e=>{B(e),D("");let t=e.name.indexOf("-");if(t>0){let n=e.name.slice(0,t),i=e.name.slice(t+1);H(n),Z(i)}else H(""),Z(e.name);$()},er=e=>{let t=J(e);window.open(t)},ea=async()=>{if(!M)return;let e=L.trim(),t=Q.trim();if(!t)return void D("è¯·è¾“å…¥åç§°");if(e.includes("/")||t.includes("/"))return void D("ä¸èƒ½åŒ…å«å­—ç¬¦ /");let n=e?`${e}-${t}`:t;if(n===M.name)return void P();if(o?.some(e=>e.name===n))return void D("ç¬”è®°åç§°å·²å­˜åœ¨");try{U(!0),await eB.api.put("/files.rename",{oldName:`/.note/${M.name}`,newName:`/.note/${n}`}),s(),eF.notifications.show({color:"green",message:"é‡å‘½åæˆåŠŸ"}),P(),await et()}catch(e){eF.notifications.show({color:"red",message:e instanceof Error?e.message:"é‡å‘½åå¤±è´¥"})}finally{U(!1)}},eo=async e=>{if(confirm(`ç¡®å®šè¦åˆ é™¤ç¬”è®°"${e.name}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚`))try{await eB.api.delete(`/files/.note/${e.name}`),s(),eF.notifications.show({color:"green",message:"åˆ é™¤æˆåŠŸ"}),await et()}catch(e){eF.notifications.show({color:"red",message:e instanceof Error?e.message:"åˆ é™¤å¤±è´¥"})}},el=e=>{window.open(`/ipfs/${e.cid}/?filename=${e.name}&type=note`)},es=()=>{y(""),w(""),C(""),g()},ec=()=>{B(null),H(""),Z(""),D(""),P()};return(0,n.useEffect)(()=>{l&&a&&!o&&et()},[l,a,o]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(R.Stack,{gap:"md",p:"md",children:[(0,t.jsx)(K.Center,{children:(0,t.jsx)(W.TextInput,{placeholder:"æœç´¢ç¬”è®°åç§°",value:c,onChange:e=>d("notesQuery",e.currentTarget.value),size:"md",radius:"md",w:400,styles:{input:{textAlign:"center"}}})}),(0,t.jsxs)(N.Group,{justify:"space-between",align:"center",pos:"relative",children:[(0,t.jsx)(eC,{visible:u,overlayProps:{backgroundOpacity:0},loaderProps:{type:"dots"}}),(0,t.jsxs)(ef.Badge,{variant:"light",size:"lg",children:[c?`æ˜¾ç¤º ${Y.length} / ${X.length} (æ€»å…± ${o?.length||0})`:`æ˜¾ç¤º ${Y.length} / ${o?.length||0}`," ","","ä¸ªç¬”è®°"]}),(0,t.jsxs)(N.Group,{children:[(0,t.jsx)(q.Tooltip,{label:"åˆ·æ–°",children:(0,t.jsx)(i.ActionIcon,{size:"lg",onClick:et,color:"blue",disabled:!a,children:(0,t.jsx)(eD.IconRefresh,{size:18})})}),(0,t.jsx)(q.Tooltip,{label:"æ–°ç¬”è®°",children:(0,t.jsx)(i.ActionIcon,{size:"lg",onClick:j,color:"green",disabled:!a,children:(0,t.jsx)(eN,{size:18})})})]})]}),c&&0===X.length?(0,t.jsxs)(R.Stack,{align:"center",justify:"center",h:200,children:[(0,t.jsx)(z.Text,{size:"lg",c:"dimmed",children:"æœªæ‰¾åˆ°ç¬”è®°"}),(0,t.jsx)(z.Text,{size:"sm",c:"dimmed",children:"å°è¯•ç”¨å…¶ä»–å…³é”®è¯æœç´¢"})]}):(0,t.jsxs)(t.Fragment,{children:[(e=new Map,r=[],Y.forEach(t=>{let n=t.name.indexOf("-");if(n>0){let i=t.name.slice(0,n),r=e.get(i)||[];r.push(t),e.set(i,r)}else r.push(t)}),(0,t.jsxs)(em,{gutter:"md",children:[[...e.entries()].map(([e,n])=>(0,t.jsx)(em.Col,{span:{base:12,xs:6,sm:4,md:3,lg:3,xl:2},children:(0,t.jsxs)(ex.Card,{radius:"md",withBorder:!0,children:[(0,t.jsxs)(N.Group,{justify:"space-between",wrap:"nowrap",gap:4,mb:"xs",children:[(0,t.jsx)(z.Text,{fw:700,children:e}),(0,t.jsx)(ef.Badge,{variant:"light",children:n.length})]}),(0,t.jsx)(R.Stack,{gap:0,children:n.map(n=>{let r=n.name.slice(e.length+1);return(0,t.jsxs)(N.Group,{justify:"space-between",wrap:"nowrap",gap:0,children:[(0,t.jsx)(p.Box,{py:6,className:"mp-hover",flex:1,component:_.default,href:J(n),children:(0,t.jsx)(z.Text,{fw:500,lineClamp:1,c:"var(--mantine-color-text)",children:r||n.name})}),(0,t.jsxs)(ep.Menu,{shadow:"md",width:120,children:[(0,t.jsx)(ep.Menu.Target,{children:(0,t.jsx)(i.ActionIcon,{variant:"subtle",color:"gary",children:(0,t.jsx)(eR,{size:14})})}),(0,t.jsxs)(ep.Menu.Dropdown,{children:[(0,t.jsx)(ep.Menu.Item,{leftSection:"ğŸ“–",onClick:()=>er(n),children:"æ‰“å¼€"}),(0,t.jsx)(ep.Menu.Item,{leftSection:"ğŸ“¤",onClick:()=>el(n),children:"åˆ†äº«"}),(0,t.jsx)(ep.Menu.Item,{leftSection:"âœï¸",onClick:()=>ei(n),children:"é‡å‘½å"}),(0,t.jsx)(ep.Menu.Divider,{}),(0,t.jsx)(ep.Menu.Item,{leftSection:"ğŸ—‘ï¸",onClick:()=>eo(n),children:"åˆ é™¤"})]})]})]},n.name)})})]})},`group-${e}`)),r.map(e=>(0,t.jsx)(em.Col,{span:{base:12,xs:6,sm:4,md:3,lg:3,xl:2},children:(0,t.jsx)(ex.Card,{radius:"md",withBorder:!0,children:(0,t.jsxs)(N.Group,{justify:"space-between",wrap:"nowrap",gap:0,children:[(0,t.jsx)(z.Text,{flex:1,fw:500,lineClamp:1,component:_.default,href:J(e),children:e.name}),(0,t.jsxs)(ep.Menu,{shadow:"md",width:120,children:[(0,t.jsx)(ep.Menu.Target,{children:(0,t.jsx)(i.ActionIcon,{variant:"subtle",color:"gary",children:(0,t.jsx)(eR,{size:14})})}),(0,t.jsxs)(ep.Menu.Dropdown,{children:[(0,t.jsx)(ep.Menu.Item,{leftSection:"ğŸ“–",onClick:()=>er(e),children:"æ‰“å¼€"}),(0,t.jsx)(ep.Menu.Item,{leftSection:"ğŸ“¤",onClick:()=>el(e),children:"åˆ†äº«"}),(0,t.jsx)(ep.Menu.Item,{leftSection:"âœï¸",onClick:()=>ei(e),children:"é‡å‘½å"}),(0,t.jsx)(ep.Menu.Divider,{}),(0,t.jsx)(ep.Menu.Item,{leftSection:"ğŸ—‘ï¸",onClick:()=>eo(e),children:"åˆ é™¤"})]})]})]})})},e.name))]})),ee&&(0,t.jsx)(K.Center,{children:(0,t.jsxs)(O.Button,{variant:"light",onClick:()=>{x(e=>e+100)},size:"md",children:["ç»§ç»­åŠ è½½ (",X.length-m," ä¸ªå‰©ä½™)"]})})]})]}),!a&&(0,t.jsx)(K.Center,{children:(0,t.jsx)(O.Button,{variant:"gradient",component:_.default,href:"/login",children:"å»ç™»å½•"})}),(0,t.jsx)(V.Modal,{opened:f,onClose:es,title:"åˆ›å»ºæ–°ç¬”è®°",centered:!0,children:(0,t.jsxs)(R.Stack,{gap:"md",children:[(0,t.jsx)(W.TextInput,{label:"åˆ†ç»„ï¼ˆå¯é€‰ï¼‰",value:b,onChange:e=>{w(e.currentTarget.value),C("")}}),(0,t.jsx)(W.TextInput,{placeholder:"è¯·è¾“å…¥ç¬”è®°åç§°",value:v,onChange:e=>{y(e.currentTarget.value),C("")},error:S,autoFocus:!0}),(0,t.jsxs)(N.Group,{justify:"flex-end",children:[(0,t.jsx)(O.Button,{variant:"default",onClick:es,children:"å–æ¶ˆ"}),(0,t.jsx)(O.Button,{loading:k,onClick:en,children:"åˆ›å»º"})]})]})}),(0,t.jsx)(V.Modal,{opened:T,onClose:ec,title:"ç¬”è®°é‡å‘½å",centered:!0,children:(0,t.jsxs)(R.Stack,{gap:"md",children:[(0,t.jsx)(W.TextInput,{label:"åˆ†ç»„ï¼ˆå¯é€‰ï¼‰",value:L,onChange:e=>{H(e.currentTarget.value),D("")}}),(0,t.jsx)(W.TextInput,{label:"åç§°",placeholder:"è¯·è¾“å…¥åç§°",value:Q,onChange:e=>{Z(e.currentTarget.value),D("")},error:A}),(0,t.jsxs)(N.Group,{justify:"flex-end",children:[(0,t.jsx)(O.Button,{variant:"default",onClick:ec,children:"å–æ¶ˆ"}),(0,t.jsx)(O.Button,{loading:E,onClick:ea,children:"ç¡®è®¤"})]})]})})]})}var eL=e.i(10856),eK=e.i(41710),eq=e.i(92181),eW=e.i(82451);let[eH,eQ]=(0,j.createSafeContext)("Accordion component was not found in the tree");var eZ=e.i(62881);let[eJ,eX]=(0,j.createSafeContext)("Accordion.Item component was not found in the tree");var eY={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};let e0=(0,f.factory)((e,n)=>{let{classNames:i,className:r,style:a,styles:o,vars:l,chevron:s,icon:c,onClick:d,onKeyDown:u,children:h,disabled:x,mod:f,...j}=(0,m.useProps)("AccordionControl",null,e),{value:g}=eX(),v=eQ(),y=v.isItemActive(g),b="number"==typeof v.order,w=`h${v.order}`,C=(0,t.jsxs)(I.UnstyledButton,{...j,...v.getStyles("control",{className:r,classNames:i,style:a,styles:o,variant:v.variant}),unstyled:v.unstyled,mod:["accordion-control",{active:y,"chevron-position":v.chevronPosition,disabled:x},f],ref:n,onClick:e=>{d?.(e),v.onChange(g)},type:"button",disabled:x,"aria-expanded":y,"aria-controls":v.getRegionId(g),id:v.getControlId(g),onKeyDown:(0,S.createScopedKeydownHandler)({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:v.loop,orientation:"vertical",onKeyDown:u}),children:[(0,t.jsx)(p.Box,{component:"span",mod:{rotate:!v.disableChevronRotation&&y,position:v.chevronPosition},...v.getStyles("chevron",{classNames:i,styles:o}),children:s||v.chevron}),(0,t.jsx)("span",{...v.getStyles("label",{classNames:i,styles:o}),children:h}),c&&(0,t.jsx)(p.Box,{component:"span",mod:{"chevron-position":v.chevronPosition},...v.getStyles("icon",{classNames:i,styles:o}),children:c})]});return b?(0,t.jsx)(w,{...v.getStyles("itemTitle",{classNames:i,styles:o}),children:C}):C});e0.displayName="@mantine/core/AccordionControl",e0.classes=eY;let e1=(0,f.factory)((e,n)=>{let{classNames:i,className:r,style:a,styles:o,vars:l,value:s,mod:c,...d}=(0,m.useProps)("AccordionItem",null,e),u=eQ();return(0,t.jsx)(eJ,{value:{value:s},children:(0,t.jsx)(p.Box,{ref:n,mod:[{active:u.isItemActive(s)},c],...u.getStyles("item",{className:r,classNames:i,styles:o,style:a,variant:u.variant}),...d})})});e1.displayName="@mantine/core/AccordionItem",e1.classes=eY;var e2=e.i(36597),e5=e.i(19488),e4=e.i(74080),e3=e.i(45500),e9=e.i(31316);function e6(e){return e?.current?e.current.scrollHeight:"auto"}let e8="undefined"!=typeof window&&window.requestAnimationFrame,e7={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},te=(0,f.factory)((e,i)=>{let{children:r,in:a,transitionDuration:o,transitionTimingFunction:l,style:s,onTransitionEnd:c,animateOpacity:d,keepMounted:u,...h}=(0,m.useProps)("Collapse",e7,e),x=(0,C.useMantineTheme)(),f=(0,e2.useReducedMotion)(),j=x.respectReducedMotion&&f?0:o,g=function({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:i=()=>{},opened:r,keepMounted:a=!1}){let o=(0,n.useRef)(null),l={height:0,overflow:"hidden",...a?{}:{display:"none"}},[s,c]=(0,n.useState)(r?{}:l),d=e=>{(0,e4.flushSync)(()=>c(e))},u=e=>{d(t=>({...t,...e}))};function h(n){let i=e||function(e){if(!e||"string"==typeof e)return 0;let t=e/36;return Math.round((4+15*t**.25+t/5)*10)}(n);return{transition:`height ${i}ms ${t}, opacity ${i}ms ${t}`}}(0,e3.useDidUpdate)(()=>{"function"==typeof e8&&(r?e8(()=>{u({willChange:"height",display:"block",overflow:"hidden"}),e8(()=>{let e=e6(o);u({...h(e),height:e})})}):e8(()=>{let e=e6(o);u({...h(e),willChange:"height",height:e}),e8(()=>u({height:0,overflow:"hidden"}))}))},[r]);let m=e=>{if(e.target===o.current&&"height"===e.propertyName)if(r){let e=e6(o);e===s.height?d({}):u({height:e}),i()}else 0===s.height&&(d(l),i())};return function({style:e={},refKey:t="ref",...i}={}){let a=i[t],l={"aria-hidden":!r,...i,[t]:(0,e9.mergeRefs)(o,a),onTransitionEnd:m,style:{boxSizing:"border-box",...e,...s}};return n.default.version.startsWith("18")?r||(l.inert=""):l.inert=!r,l}}({opened:a,transitionDuration:j,transitionTimingFunction:l,onTransitionEnd:c,keepMounted:u});return 0===j?a?(0,t.jsx)(p.Box,{...h,children:r}):null:(0,t.jsx)(p.Box,{...g({style:{opacity:a||!d?1:0,transition:d?`opacity ${j}ms ${l}`:"none",...(0,e5.getStyleObject)(s,x)},ref:i,...h}),children:r})});te.displayName="@mantine/core/Collapse";let tt=(0,f.factory)((e,n)=>{let{classNames:i,className:r,style:a,styles:o,vars:l,children:s,...c}=(0,m.useProps)("AccordionPanel",null,e),{value:d}=eX(),u=eQ();return(0,t.jsx)(te,{ref:n,...u.getStyles("panel",{className:r,classNames:i,style:a,styles:o}),...c,in:u.isItemActive(d),transitionDuration:u.transitionDuration??200,role:"region",id:u.getRegionId(d),"aria-labelledby":u.getControlId(d),children:(0,t.jsx)("div",{...u.getStyles("content",{classNames:i,styles:o}),children:s})})});tt.displayName="@mantine/core/AccordionPanel",tt.classes=eY;let tn={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevronSize:"auto",chevronIconSize:16},ti=(0,s.createVarsResolver)((e,{transitionDuration:t,chevronSize:n,radius:i})=>({root:{"--accordion-transition-duration":void 0===t?void 0:`${t}ms`,"--accordion-chevron-size":void 0===n?void 0:(0,eW.rem)(n),"--accordion-radius":void 0===i?void 0:(0,l.getRadius)(i)}}));function tr(e){let n=(0,m.useProps)("Accordion",tn,e),{classNames:i,className:l,style:s,styles:c,unstyled:d,vars:u,children:h,multiple:f,value:j,defaultValue:g,onChange:v,id:y,loop:b,transitionDuration:w,disableChevronRotation:S,chevronPosition:C,chevronSize:k,order:I,chevron:T,variant:$,radius:P,chevronIconSize:M,attributes:B,...z}=n,A=(0,r.useId)(y),[_,D]=(0,a.useUncontrolled)({value:j,defaultValue:g,finalValue:f?[]:null,onChange:v}),R=(0,x.useStyles)({name:"Accordion",classes:eY,props:n,className:l,style:s,classNames:i,styles:c,unstyled:d,attributes:B,vars:u,varsResolver:ti});return(0,t.jsx)(eH,{value:{isItemActive:e=>Array.isArray(_)?_.includes(e):e===_,onChange:e=>{D(Array.isArray(_)?_.includes(e)?_.filter(t=>t!==e):[..._,e]:e===_?null:e)},getControlId:o(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:o(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),chevron:null===T?null:T||(0,t.jsx)(eZ.AccordionChevron,{size:M}),transitionDuration:w,disableChevronRotation:S,chevronPosition:C,order:I,loop:b,getStyles:R,variant:$,unstyled:d},children:(0,t.jsx)(p.Box,{...R("root"),id:A,...z,variant:$,"data-accordion":!0,children:h})})}tr.extend=e=>e,tr.withProps=(0,f.getWithProps)(tr),tr.classes=eY,tr.displayName="@mantine/core/Accordion",tr.Item=e1,tr.Panel=tt,tr.Control=e0,tr.Chevron=eZ.AccordionChevron;var ta=e.i(653),to=e.i(7893),tl=e.i(9666);function ts(){let[e,i]=(0,n.useState)(""),r=(0,n.useRef)(null),a=(0,n.useRef)(null),o=(0,n.useRef)(null),l=(0,F.useUserStore)(e=>e.nodeDark),s=(0,to.useMarkdown)(),c=async()=>{r.current&&(await s.initViewer(r.current)).setMarkdown("IPFS (InterPlanetary File System) æ˜¯ä¸€ç§ç‚¹å¯¹ç‚¹çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿåè®®ã€‚æ—¨åœ¨åˆ›å»ºä¸€ä¸ªæ›´å¼€æ”¾ã€æ›´å¿«é€Ÿã€æ›´å®‰å…¨ã€æ›´æŒä¹…åŒ–çš„ç½‘ç»œï¼Œä»¥å–ä»£æˆ–è¡¥å……ç›®å‰ä¸»å¯¼äº’è”ç½‘çš„ http åè®®ã€‚\r\n\r\n**æ ¸å¿ƒæ€æƒ³ï¼šä»â€œä½ç½®å¯»å€â€åˆ°â€œå†…å®¹å¯»å€â€**\r\n\r\n- IPFSï¼šä½ é€šè¿‡ä¸€ä¸ªå†…å®¹æœ¬èº«çš„å”¯ä¸€åŠ å¯†å“ˆå¸Œå€¼ (ç§°ä¸º CID - Content Identifier) æ¥è®¿é—®å†…å®¹ã€‚è¿™ä¸ªå“ˆå¸Œå€¼å°±åƒæ˜¯å†…å®¹çš„æ•°å­—æŒ‡çº¹ï¼Œå®Œå…¨ç”±å†…å®¹æœ¬èº«è®¡ç®—å¾—æ¥ã€‚åªè¦å†…å®¹ä¸å˜ï¼Œå“ˆå¸Œå€¼å°±ä¸å˜ã€‚è¿™ç§°ä¸º â€œå†…å®¹å¯»å€â€ - ä½ é€šè¿‡å†…å®¹æœ¬èº«ï¼ˆå…¶æŒ‡çº¹ï¼‰è¯·æ±‚å†…å®¹ã€‚\r\n\r\n- [/ipfs/bafkreihp5o7tdipf6ajkgkdxknnffkuxpeecwqydi4q5iqt4gko6r2agk4](/ipfs/bafkreihp5o7tdipf6ajkgkdxknnffkuxpeecwqydi4q5iqt4gko6r2agk4)\r\n"),a.current&&(await s.initViewer(a.current)).setMarkdown(tl.default),o.current&&(await s.initViewer(o.current)).setMarkdown("Most.Box èŠ‚ç‚¹æ˜¯ IPFS ç½‘å…³çš„å¼€æºå°è£…ã€‚éƒ¨ç½²èŠ‚ç‚¹å³å¯è¿è¡Œç‹¬ç«‹åº”ç”¨ï¼Œå¹¶é€šè¿‡åŒºå—é“¾å…±äº«ä¿¡æ¯ã€‚éšç€ç”¨æˆ·å¢å¤šï¼Œé€šè¿‡å†…å®¹å¯»å€åœ¨ IPFS ç½‘ç»œä¸­æŸ¥æ‰¾å’Œåˆ†äº«æ–‡ä»¶å°†å˜å¾—æ›´åŠ é«˜æ•ˆã€‚\r\n\r\n[Windows éƒ¨ç½²æ•™ç¨‹](/build/?system=windows) | [Linux éƒ¨ç½²æ•™ç¨‹](/build/?system=linux)\r\n\r\nèŠ‚ç‚¹å®ç°å‰åç«¯åˆ†ç¦»ï¼Œå¯ä»¥ç›´æ¥åˆ‡æ¢å½“å‰å·²éƒ¨ç½²çš„å…¬å¼€èŠ‚ç‚¹ï¼š[/dot](/dot)\r\n")};return(0,n.useEffect)(()=>{c();let e=Math.floor(Math.random()*eL.default.length);i(eL.default[e])},[]),(0,t.jsxs)(eK.Container,{py:"md",children:[(0,t.jsx)(eq.Title,{size:"h3",children:"Most.Box - å¦‚å½±éšå½¢"}),(0,t.jsx)(z.Text,{c:"dimmed",children:"â€”â€”ã€Œè½»æ¾ç®€å•ã€å¼€æºå…è´¹ã€éƒ¨ç½²è‡ªå·±çš„èŠ‚ç‚¹ã€"}),(0,t.jsx)(ta.Divider,{my:"md"}),(0,t.jsxs)(tr,{my:"md",variant:"separated",defaultValue:"IPFS",children:[(0,t.jsxs)(tr.Item,{value:"IPFS",children:[(0,t.jsx)(tr.Control,{icon:"ğŸ",children:"1. IPFS"}),(0,t.jsx)(tr.Panel,{children:(0,t.jsx)(p.Box,{className:l,ref:r})})]}),(0,t.jsxs)(tr.Item,{value:"IPv6",children:[(0,t.jsx)(tr.Control,{icon:"ğŸŒ",children:"2. å…¬ç½‘ IPV6"}),(0,t.jsx)(tr.Panel,{children:(0,t.jsx)(p.Box,{className:l,ref:a})})]}),(0,t.jsxs)(tr.Item,{value:"DOT",children:[(0,t.jsx)(tr.Control,{icon:"ğŸ¥¦",children:"3. è¿è¡ŒèŠ‚ç‚¹"}),(0,t.jsx)(tr.Panel,{children:(0,t.jsx)(p.Box,{className:l,ref:o})})]})]}),(0,t.jsx)(eq.Title,{size:"h3",children:"ä½¿ç”¨è¯´æ˜"}),(0,t.jsx)(z.Text,{c:"dimmed",children:"â€”â€”ã€Œå›å½’æ•°æ®å­˜å‚¨æœ¬è´¨ã€"}),(0,t.jsx)(ta.Divider,{my:"md"}),(0,t.jsxs)(tr,{my:"md",variant:"separated",children:[(0,t.jsxs)(tr.Item,{value:"DOT",children:[(0,t.jsx)(tr.Control,{icon:"ğŸŒ",children:"èŠ‚ç‚¹åˆ‡æ¢"}),(0,t.jsxs)(tr.Panel,{children:["ç‚¹å‡»å·¦ä¸Šè§’ ",(0,t.jsx)(A.Icon,{name:"Earth",size:24})," å›¾æ ‡é€‰æ‹© IPFS ç½‘å…³"]})]}),(0,t.jsxs)(tr.Item,{value:"NOTE",children:[(0,t.jsx)(tr.Control,{icon:"âœï¸",children:"ç¬”è®°"}),(0,t.jsxs)(tr.Panel,{children:["ç‚¹å‡»åº•éƒ¨ ",(0,t.jsx)(A.Icon,{name:"Note",size:24})," å›¾æ ‡ï¼Œåˆ›å»º Markdown ç¬”è®°"]})]}),(0,t.jsxs)(tr.Item,{value:"IPFS",children:[(0,t.jsx)(tr.Control,{icon:"ğŸ“‚",children:"æ–‡ä»¶ç³»ç»Ÿ"}),(0,t.jsxs)(tr.Panel,{children:["ç‚¹å‡»å·¦ä¸‹è§’ ",(0,t.jsx)(A.Icon,{name:"File",size:24})," å›¾æ ‡ï¼Œæ‰“å¼€ IPFS æ˜Ÿçº§æ–‡ä»¶ç³»ç»Ÿ"]})]})]}),(0,t.jsx)(ta.Divider,{my:"md"}),(0,t.jsx)(N.Group,{justify:"flex-end",children:(0,t.jsxs)(z.Text,{c:"dimmed",children:["â€”â€”ã€Œ",e,"ã€"]})}),(0,t.jsx)(eq.Title,{size:"h3",children:"å¿«æ·å…¥å£"}),(0,t.jsx)(ta.Divider,{my:"md"}),(0,t.jsx)(tr,{my:"md",variant:"separated",children:(0,t.jsxs)(tr.Item,{value:"GAME",children:[(0,t.jsx)(tr.Control,{icon:"ğŸ¦•",children:"å°æ¸¸æˆ"}),(0,t.jsx)(tr.Panel,{children:(0,t.jsxs)(N.Group,{children:[(0,t.jsx)(eM.Anchor,{component:_.default,href:"/game/5",children:(0,t.jsx)(z.Text,{children:"äº”å­æ£‹"})}),(0,t.jsx)(eM.Anchor,{component:_.default,href:"/game/black",children:(0,t.jsx)(z.Text,{children:"é»‘ç™½æ£‹"})}),(0,t.jsx)(eM.Anchor,{component:_.default,href:"/game/21",children:(0,t.jsx)(z.Text,{children:"äºŒåä¸€ç‚¹"})})]})})]})})]})}var tc=e.i(26564);function td(){let[e,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{r(localStorage.getItem("homeTab")||"explore")},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tc.AppHeader,{title:"Most.Box - å¦‚å½±éšå½¢",left:(0,t.jsx)(i.ActionIcon,{variant:"transparent",color:"--text-color",component:_.default,href:"/dot",children:(0,t.jsx)(A.Icon,{name:"Earth",size:24})})}),(0,t.jsxs)(B,{id:"page-home",variant:"pills",radius:0,value:e,onChange:e=>{r(e),localStorage.setItem("homeTab",e||"explore")},children:[(0,t.jsx)(B.Panel,{keepMounted:!0,value:"file",children:(0,t.jsx)(eU,{})}),(0,t.jsx)(B.Panel,{keepMounted:!0,value:"note",children:(0,t.jsx)(eV,{})}),(0,t.jsx)(B.Panel,{keepMounted:!0,value:"explore",children:(0,t.jsx)(ts,{})}),(0,t.jsx)(B.Panel,{keepMounted:!0,value:"mine",children:(0,t.jsx)(E,{})}),(0,t.jsxs)(B.List,{children:[(0,t.jsxs)(B.Tab,{value:"file",children:[(0,t.jsx)(A.Icon,{name:"file"===e?"FileActive":"File"}),(0,t.jsx)(z.Text,{children:"æ–‡ä»¶"})]}),(0,t.jsxs)(B.Tab,{value:"note",children:[(0,t.jsx)(A.Icon,{name:"note"===e?"NoteActive":"Note"}),(0,t.jsx)(z.Text,{children:"ç¬”è®°"})]}),(0,t.jsxs)(B.Tab,{value:"explore",children:[(0,t.jsx)(A.Icon,{name:"explore"===e?"ExploreActive":"Explore"}),(0,t.jsx)(z.Text,{children:"æ¢ç´¢"})]}),(0,t.jsxs)(B.Tab,{value:"mine",children:[(0,t.jsx)(A.Icon,{name:"mine"===e?"MineActive":"Mine"}),(0,t.jsx)(z.Text,{children:"æˆ‘çš„"})]})]})]})]})}e.s(["default",()=>td],52683)}]);