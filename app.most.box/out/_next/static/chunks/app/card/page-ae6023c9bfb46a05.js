(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4437],{8893:(e,t,r)=>{"use strict";r.d(t,{useId:()=>i});var o=r(12115),n=r(98200),s=r(70134);let a=o["useId".toString()]||(()=>void 0);function i(e){let t=function(){let e=a();return e?"mantine-".concat(e.replace(/:/g,"")):""}(),[r,i]=(0,o.useState)(t);return((0,n.useIsomorphicEffect)(()=>{i((0,s.randomId)())},[]),"string"==typeof e)?e:"undefined"==typeof window?t:r}},13877:(e,t,r)=>{"use strict";r.d(t,{Container:()=>m});var o=r(95155);r(12115);var n=r(49957),s=r(80533),a=r(23653),i=r(39398),l=r(67623),c=r(91853),d={root:"m_7485cace"};let u=(0,s.createVarsResolver)((e,t)=>{let{size:r,fluid:o}=t;return{root:{"--container-size":o?void 0:(0,n.getSize)(r,"container-size")}}}),m=(0,c.factory)((e,t)=>{let r=(0,a.useProps)("Container",null,e),{classNames:n,className:s,style:c,styles:m,unstyled:h,vars:f,fluid:g,mod:y,attributes:w,strategy:p,...x}=r,v=(0,i.useStyles)({name:"Container",classes:d,props:r,className:s,style:c,classNames:n,styles:m,unstyled:h,attributes:w,vars:f,varsResolver:u});return(0,o.jsx)(l.Box,{ref:t,mod:[{fluid:g,strategy:p||"block"},y],...v("root"),...x})});m.classes=d,m.displayName="@mantine/core/Container"},26195:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(30313).A)("outline","copy","Copy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]])},27106:(e,t,r)=>{Promise.resolve().then(r.bind(r,58542))},30313:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(12115),n={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};let s=(e,t,r,s)=>{let a=(0,o.forwardRef)((r,a)=>{let{color:i="currentColor",size:l=24,stroke:c=2,title:d,className:u,children:m,...h}=r;return(0,o.createElement)("svg",{ref:a,...n[e],width:l,height:l,className:["tabler-icon","tabler-icon-".concat(t),u].join(" "),..."filled"===e?{fill:i}:{strokeWidth:c,stroke:i},...h},[d&&(0,o.createElement)("title",{key:"svg-title"},d),...s.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return a.displayName="".concat(r),a}},56612:(e,t,r)=>{"use strict";r.d(t,{BP:()=>m,OM:()=>f,yO:()=>h});var o=r(68110),n=r(330),s=r(16405),a=r(42779),i=r(10179),l=r(38798),c=r(43591),d=r(28555),u=r.n(d);let m=(e,t,r)=>{let c=(0,o.YW)(t),d=(0,o.YW)("/most.box/"+e),m=(0,n.A)(c,d,3,32,"sha512"),h=(0,s.q5)((0,a.s)(m)),f=h.slice(0,32),g=u().box.keyPair.fromSecretKey(f),y=(0,s.c$)(g.publicKey),w=(0,s.c$)(g.secretKey),p=i.v.entropyToPhrase(h);return{username:e,address:l.QX.fromPhrase(p).address,public_key:y,private_key:w,mnemonic:"I know loss mnemonic will lose my wallet."===r?p:""}},h=(e,t,r)=>{let o=new TextEncoder().encode(e),n=u().randomBytes(u().box.nonceLength),a=u().box(o,n,new Uint8Array((0,s.q5)(t)),new Uint8Array((0,s.q5)(r)));return a?["mp://2",(0,c.W)(n),(0,c.W)(a)].join("."):(console.info("加密失败"),"")},f=(e,t,r)=>{let[o,n,a]=e.split(".");if("mp://2"!==o)return console.info("无效协议"),"";let i=u().box.open((0,c.y)(a),(0,c.y)(n),new Uint8Array((0,s.q5)(t)),new Uint8Array((0,s.q5)(r)));return i?new TextDecoder().decode(i):(console.info("解密失败"),"")}},58542:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var o=r(95155),n=r(12115),s=r(90101),a=r(97443),i=r(13877),l=r(2369),c=r(5480),d=r(70305),u=r(82726),m=r(67661),h=r(9457),f=r(58380),g=r(67623),y=r(20063),w=r(12834),p=r(59126),x=r(26195),v=r(73351);let j=()=>{let e=(0,y.useSearchParams)().get("uid")||a.A.ZeroAddress,t="https://most.box/card?uid=".concat(e),r=async()=>{try{await navigator.clipboard.writeText(e),p.notifications.show({title:"复制成功",message:e,color:"green"})}catch(e){p.notifications.show({title:"复制失败",message:"无法复制到剪贴板",color:"red"})}},n=async()=>{if(navigator.share)try{await navigator.share({title:"Most.Box 名片",text:t,url:t})}catch(e){j(t)}else j(t)},j=async e=>{try{await navigator.clipboard.writeText(e),p.notifications.show({title:"链接已复制",message:"分享链接已复制到剪贴板",color:"blue"})}catch(e){console.error(e)}};return(0,o.jsxs)(i.Container,{py:"lg",size:"sm",children:[(0,o.jsx)(s.AppHeader,{title:"名片"}),(0,o.jsxs)(l.Stack,{align:"center",gap:"xl",children:[(0,o.jsx)(c.Avatar,{size:100,radius:"lg",src:a.A.avatar(e),alt:"头像",style:{boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"}}),(0,o.jsxs)(l.Stack,{align:"center",gap:"md",children:[(0,o.jsx)(d.Text,{size:"sm",c:"dimmed",fw:500,children:"我的名片"}),(0,o.jsx)(u.Paper,{radius:"md",p:10,withBorder:!0,style:{display:"flex",backgroundColor:"white"},children:(0,o.jsx)(w.h,{value:t,size:180,bgColor:"white",fgColor:"#333",level:"M"})}),(0,o.jsx)(d.Text,{size:"xs",c:"dimmed",ta:"center",children:"扫描二维码查看"})]}),(0,o.jsxs)(m.Group,{gap:"md",justify:"center",children:[(0,o.jsx)(h.Tooltip,{label:"复制名片",children:(0,o.jsx)(f.ActionIcon,{size:"xl",radius:"xl",variant:"light",color:"blue",onClick:r,children:(0,o.jsx)(x.A,{size:20})})}),(0,o.jsx)(h.Tooltip,{label:"分享名片",children:(0,o.jsx)(f.ActionIcon,{size:"xl",radius:"xl",variant:"light",color:"green",onClick:n,children:(0,o.jsx)(v.A,{size:20})})})]}),(0,o.jsx)(g.Box,{mt:"xl",children:(0,o.jsx)(d.Text,{size:"xs",c:"dimmed",ta:"center",children:"Powered by Most.Box"})})]})]})};function k(){return(0,o.jsx)(n.Suspense,{children:(0,o.jsx)(j,{})})}},71281:()=>{},73351:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(30313).A)("outline","share","Share",[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]])},97443:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var o=r(43591),n=r(68110),s=r(38798),a=r(82127),i=r(34477),l=r(55544),c=r(85179),d=r(56612),u=r(86710),m=r(36117),h=r.n(m),f=r(44839),g=r.n(f);r(28223);var y=r(78595),w=r.n(y);h().extend(w()),h().extend(g()),h().locale("zh-cn");let p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMM",r=h()().isoWeek(),o=h()().format(t)+r,n=sessionStorage.getItem("fingerprint");if(!n)throw Error("请先获取设备指纹");let s=[location.origin,n].join("/"),{public_key:a,private_key:i}=(0,d.BP)(o,s);return(0,d.yO)(JSON.stringify(e),a,i)},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMM",r=h()().isoWeek(),o=h()().format(t)+r,n=sessionStorage.getItem("fingerprint");if(!n)throw Error("请先获取设备指纹");let s=[location.origin,n].join("/"),{public_key:a,private_key:i}=(0,d.BP)(o,s),l=(0,d.OM)(e,a,i);if(!l)throw Error("jwt 解析失败");let c=JSON.parse(l);if(!c.address)throw Error("jwt json 解析失败");return c},v=async e=>{let t=Date.now().toString(),r=s.QX.fromPhrase(e.mnemonic),o=await r.signMessage(t);localStorage.token=[e.address,t,o].join(".")},j=e=>{try{var t;let r=p(e);if((null==(t=x(r))?void 0:t.address)===e.address)return localStorage.setItem("jwt",r),v(e),e}catch(e){console.log("登录失败:",e)}return null},k={avatar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,i.gn)(l,{seed:"most.box@"+e,flip:!0,backgroundType:["gradientLinear"]}).toDataUri()},avatarCID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,i.gn)(c,{seed:"most.box#"+e,flip:!0,backgroundType:["gradientLinear","solid"]}).toDataUri()},formatTime:e=>{let t;if(!e)return"";let r=h()(Number(e)),o=r.hour();return t=o>=0&&o<3?"凌晨":o>=3&&o<6?"拂晓":o>=6&&o<9?"早晨":o>=9&&o<12?"上午":o>=12&&o<15?"下午":o>=15&&o<18?"傍晚":o>=18&&o<21?"薄暮":"深夜",r.format("YYYY年M月D日 ".concat(t,"h点m分"))},formatDate:e=>{let t=h()(Number(e)),r=h()();return t.isSame(r,"day")?t.format("HH:mm"):t.isSame(r.subtract(1,"day"),"day")?"昨天 ".concat(t.format("HH:mm")):t.isoWeek()===r.isoWeek()?"".concat(["周日","周一","周二","周三","周四","周五","周六"][t.day()]," ").concat(t.format("HH:mm")):t.year()===r.year()?t.format("M月D日"):t.format("YY年M月D日")},formatAddress:e=>e?e.slice(0,6)+"..."+e.slice(-4):"",enBase64:e=>(0,o.W)((0,n.YW)(e)),deBase64:e=>(0,n._v)((0,o.y)(e)),createJWT:p,verifyJWT:x,login:(e,t)=>j((0,d.BP)(e,t,"I know loss mnemonic will lose my wallet.")),loginSave:j,ZeroAddress:a.j,createToken:v,pinyin:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(t.length<r)return!1;if(e.toLowerCase().includes(t.toLowerCase()))return!0;let o=(0,u.YW)(e,t,{continuous:!0});return!!o&&!!(o.length>=r)},openDot:e=>{let t=new URL("/auth/jwt/",e),r=localStorage.getItem("jwt");if(r){let e=k.verifyJWT(r);if(e){let r=h()().format("YY/M/D HH:mm"),{public_key:o,private_key:n}=(0,d.BP)("auth/jwt",r),s=(0,d.yO)(JSON.stringify(e),o,n);t.searchParams.set("token",s)}}window.open(t.href)}},b=k},98200:(e,t,r)=>{"use strict";r.d(t,{useIsomorphicEffect:()=>n});var o=r(12115);let n="undefined"!=typeof document?o.useLayoutEffect:o.useEffect}},e=>{e.O(0,[8198,2545,2646,5619,8798,8555,8990,9318,9457,5473,101,8441,1255,7358],()=>e(e.s=27106)),_N_E=e.O()}]);