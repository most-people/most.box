(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4437],{4673:(e,t,r)=>{"use strict";r.d(t,{BP:()=>h,OM:()=>g,yO:()=>m});var o=r(30167),n=r(71425),i=r(44532),s=r(87788),a=r(56076),l=r(88413),c=r(70358),d=r(26634),u=r.n(d);let h=(e,t,r)=>{let c=(0,o.YW)(t),d=(0,o.YW)("/most.box/"+e),h=(0,n.A)(c,d,3,32,"sha512"),m=(0,i.q5)((0,s.s)(h)),g=m.slice(0,32),f=u().box.keyPair.fromSecretKey(g),y=(0,i.c$)(f.publicKey),x=(0,i.c$)(f.secretKey),p=a.v.entropyToPhrase(m);return{username:e,address:l.QX.fromPhrase(p).address,public_key:y,private_key:x,mnemonic:"I know loss mnemonic will lose my wallet."===r?p:""}},m=(e,t,r)=>{let o=new TextEncoder().encode(e),n=u().randomBytes(u().box.nonceLength),s=u().box(o,n,new Uint8Array((0,i.q5)(t)),new Uint8Array((0,i.q5)(r)));return s?["mp://2",(0,c.W)(n),(0,c.W)(s)].join("."):(console.info("加密失败"),"")},g=(e,t,r)=>{let[o,n,s]=e.split(".");if("mp://2"!==o)return console.info("无效协议"),"";let a=u().box.open((0,c.y)(s),(0,c.y)(n),new Uint8Array((0,i.q5)(t)),new Uint8Array((0,i.q5)(r)));return a?new TextDecoder().decode(a):(console.info("解密失败"),"")}},9482:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var o=r(70358),n=r(30167),i=r(88413),s=r(19396),a=r(96842),l=r(42995),c=r(3648),d=r(4673),u=r(59909),h=r(30832),m=r.n(h),g=r(99758),f=r.n(g);r(38464);var y=r(76920),x=r.n(y);m().extend(x()),m().extend(f()),m().locale("zh-cn");let p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYMMDD",r=m()().format(t),o=sessionStorage.getItem("fingerprint");if(!o)throw Error("请先获取设备指纹");let n=[location.origin,o].join("/"),{public_key:i,private_key:s}=(0,d.BP)(r,n);return(0,d.yO)(JSON.stringify(e),i,s)},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYMMDD",r=m()().format(t),o=sessionStorage.getItem("fingerprint");if(!o)throw Error("请先获取设备指纹");let n=[location.origin,o].join("/"),{public_key:i,private_key:s}=(0,d.BP)(r,n),a=(0,d.OM)(e,i,s);if(a)try{let e=JSON.parse(a);if(e.address)return e}catch(e){console.error(e)}return console.log("jwt 过期"),null},v=async e=>{let t=Date.now().toString(),r=i.QX.fromPhrase(e.mnemonic),o=await r.signMessage(t);localStorage.token=[e.address,t,o].join(".")},k=e=>{try{var t;let r=p(e);if((null==(t=w(r))?void 0:t.address)===e.address)return localStorage.setItem("jwt",r),v(e),e}catch(e){console.log("登录失败:",e)}return null},b={avatar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,a.gn)(l,{seed:"most.box@"+e,flip:!0,backgroundType:["gradientLinear"]}).toDataUri()},avatarCID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,a.gn)(c,{seed:"most.box#"+e,flip:!0,backgroundType:["gradientLinear","solid"]}).toDataUri()},formatTime:e=>{let t;if(!e)return"";let r=m()(Number(e)),o=r.hour();return t=o>=0&&o<3?"凌晨":o>=3&&o<6?"拂晓":o>=6&&o<9?"早晨":o>=9&&o<12?"上午":o>=12&&o<15?"下午":o>=15&&o<18?"傍晚":o>=18&&o<21?"薄暮":"深夜",r.format("YYYY年M月D日 ".concat(t,"h点m分"))},formatDate:e=>{let t=m()(Number(e)),r=m()();return t.isSame(r,"day")?t.format("HH:mm"):t.isSame(r.subtract(1,"day"),"day")?"昨天 ".concat(t.format("HH:mm")):t.isoWeek()===r.isoWeek()?"".concat(["周日","周一","周二","周三","周四","周五","周六"][t.day()]," ").concat(t.format("HH:mm")):t.year()===r.year()?t.format("M月D日"):t.format("YY年M月D日")},formatAddress:e=>e?e.slice(0,6)+"..."+e.slice(-4):"",enBase64:e=>(0,o.W)((0,n.YW)(e)),deBase64:e=>(0,n._v)((0,o.y)(e)),createJWT:p,verifyJWT:w,login:(e,t)=>k((0,d.BP)(e,t,"I know loss mnemonic will lose my wallet.")),loginSave:k,ZeroAddress:s.j,createToken:v,pinyin:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(t.length<r)return!1;if(e.toLowerCase().includes(t.toLowerCase()))return!0;let o=(0,u.YW)(e,t,{continuous:!0});return!!o&&!!(o.length>=r)}}},27106:(e,t,r)=>{Promise.resolve().then(r.bind(r,92635))},36898:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(86467).A)("outline","share","Share",[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]])},53884:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(86467).A)("outline","copy","Copy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]])},64173:(e,t,r)=>{"use strict";r.d(t,{useId:()=>a});var o=r(12115),n=r(73141),i=r(74275);let s=o["useId".toString()]||(()=>void 0);function a(e){let t=function(){let e=s();return e?"mantine-".concat(e.replace(/:/g,"")):""}(),[r,a]=(0,o.useState)(t);return((0,n.useIsomorphicEffect)(()=>{a((0,i.randomId)())},[]),"string"==typeof e)?e:"undefined"==typeof window?t:r}},71281:()=>{},73141:(e,t,r)=>{"use strict";r.d(t,{useIsomorphicEffect:()=>n});var o=r(12115);let n="undefined"!=typeof document?o.useLayoutEffect:o.useEffect},86467:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(12115),n={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};let i=(e,t,r,i)=>{let s=(0,o.forwardRef)((r,s)=>{let{color:a="currentColor",size:l=24,stroke:c=2,title:d,className:u,children:h,...m}=r;return(0,o.createElement)("svg",{ref:s,...n[e],width:l,height:l,className:["tabler-icon","tabler-icon-".concat(t),u].join(" "),..."filled"===e?{fill:a}:{strokeWidth:c,stroke:a},...m},[d&&(0,o.createElement)("title",{key:"svg-title"},d),...i.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(r),s}},92635:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var o=r(95155),n=r(12115),i=r(80630),s=r(9482),a=r(91590),l=r(21220),c=r(39926),d=r(58887),u=r(97287),h=r(70112),m=r(27361),g=r(81001),f=r(69604),y=r(35695),x=r(31857),p=r(6942),w=r(53884),v=r(36898);let k=()=>{let e=(0,y.useSearchParams)().get("uid")||s.A.ZeroAddress,t="https://most.box/card?uid=".concat(e),r=async()=>{try{await navigator.clipboard.writeText(e),p.notifications.show({title:"复制成功",message:e,color:"green"})}catch(e){p.notifications.show({title:"复制失败",message:"无法复制到剪贴板",color:"red"})}},n=async()=>{if(navigator.share)try{await navigator.share({title:"Most.Box 名片",text:t,url:t})}catch(e){k(t)}else k(t)},k=async e=>{try{await navigator.clipboard.writeText(e),p.notifications.show({title:"链接已复制",message:"分享链接已复制到剪贴板",color:"blue"})}catch(e){console.error(e)}};return(0,o.jsxs)(a.Container,{py:"lg",size:"sm",children:[(0,o.jsx)(i.AppHeader,{title:"名片"}),(0,o.jsxs)(l.Stack,{align:"center",gap:"xl",children:[(0,o.jsx)(c.Avatar,{size:100,radius:"lg",src:s.A.avatar(e),alt:"头像",style:{boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"}}),(0,o.jsxs)(l.Stack,{align:"center",gap:"md",children:[(0,o.jsx)(d.Text,{size:"sm",c:"dimmed",fw:500,children:"我的名片"}),(0,o.jsx)(u.Paper,{radius:"md",p:10,withBorder:!0,style:{display:"flex",backgroundColor:"white"},children:(0,o.jsx)(x.h,{value:t,size:180,bgColor:"white",fgColor:"#333",level:"M"})}),(0,o.jsx)(d.Text,{size:"xs",c:"dimmed",ta:"center",children:"扫描二维码查看"})]}),(0,o.jsxs)(h.Group,{gap:"md",justify:"center",children:[(0,o.jsx)(m.Tooltip,{label:"复制名片",children:(0,o.jsx)(g.ActionIcon,{size:"xl",radius:"xl",variant:"light",color:"blue",onClick:r,children:(0,o.jsx)(w.A,{size:20})})}),(0,o.jsx)(m.Tooltip,{label:"分享名片",children:(0,o.jsx)(g.ActionIcon,{size:"xl",radius:"xl",variant:"light",color:"green",onClick:n,children:(0,o.jsx)(v.A,{size:20})})})]}),(0,o.jsx)(f.Box,{mt:"xl",children:(0,o.jsx)(d.Text,{size:"xs",c:"dimmed",ta:"center",children:"Powered by Most.Box"})})]})]})};function b(){return(0,o.jsx)(n.Suspense,{children:(0,o.jsx)(k,{})})}}},e=>{e.O(0,[2545,8198,1257,8805,8413,7395,6634,3722,7361,5982,630,8441,5964,7358],()=>e(e.s=27106)),_N_E=e.O()}]);