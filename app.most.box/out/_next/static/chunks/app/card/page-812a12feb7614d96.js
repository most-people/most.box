(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4437],{4673:(e,t,r)=>{"use strict";r.d(t,{BP:()=>m,OM:()=>g,yO:()=>u});var o=r(30167),n=r(71425),a=r(44532),i=r(87788),s=r(56076),l=r(88413),c=r(70358),d=r(26634),h=r.n(d);let m=(e,t,r)=>{let c=(0,o.YW)(t),d=(0,o.YW)("/most.box/"+e),m=(0,n.A)(c,d,3,32,"sha512"),u=(0,a.q5)((0,i.s)(m)),g=u.slice(0,32),x=h().box.keyPair.fromSecretKey(g),f=(0,a.c$)(x.publicKey),y=(0,a.c$)(x.secretKey),w=s.v.entropyToPhrase(u);return{username:e,address:l.QX.fromPhrase(w).address,public_key:f,private_key:y,mnemonic:"I know loss mnemonic will lose my wallet."===r?w:""}},u=(e,t,r)=>{let o=new TextEncoder().encode(e),n=h().randomBytes(h().box.nonceLength),i=h().box(o,n,new Uint8Array((0,a.q5)(t)),new Uint8Array((0,a.q5)(r)));return i?["mp://2",(0,c.W)(n),(0,c.W)(i)].join("."):(console.info("加密失败"),"")},g=(e,t,r)=>{let[o,n,i]=e.split(".");if("mp://2"!==o)return console.info("无效的密文"),"";let s=h().box.open((0,c.y)(i),(0,c.y)(n),new Uint8Array((0,a.q5)(t)),new Uint8Array((0,a.q5)(r)));return s?new TextDecoder().decode(s):(console.info("解密失败"),"")}},9482:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var o=r(70358),n=r(30167),a=r(88413),i=r(19396),s=r(96842),l=r(42995),c=r(3648),d=r(4673),h=r(59909),m=r(30832),u=r.n(m),g=r(99758),x=r.n(g);r(38464);var f=r(76920),y=r.n(f);u().extend(y()),u().extend(x()),u().locale("zh-cn");let w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYMMDD",r=u()().format(t),o=sessionStorage.getItem("fingerprint");if(!o)throw Error("请先获取设备指纹");let n=[location.origin,o].join("/"),{public_key:a,private_key:i}=(0,d.BP)(r,n);return(0,d.yO)(JSON.stringify(e),a,i)},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYMMDD",r=u()().format(t),o=sessionStorage.getItem("fingerprint");if(!o)throw Error("请先获取设备指纹");let n=[location.origin,o].join("/"),{public_key:a,private_key:i}=(0,d.BP)(r,n),s=(0,d.OM)(e,a,i);if(s)try{let e=JSON.parse(s);if(e.address)return e}catch(e){console.log("jwt 过期")}return null},v=async e=>{let t=Date.now().toString(),r=a.QX.fromPhrase(e.mnemonic),o=await r.signMessage(t);localStorage.token=[e.address,t,o].join(".")},k=e=>{try{var t;let r=w(e);if((null==(t=p(r))?void 0:t.address)===e.address)return localStorage.setItem("jwt",r),v(e),e}catch(e){console.log("登录失败:",e)}return null},b={avatar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,s.gn)(l,{seed:"most.box@"+e,flip:!0,backgroundType:["gradientLinear"]}).toDataUri()},avatarCID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,s.gn)(c,{seed:"most.box#"+e,flip:!0,backgroundType:["gradientLinear","solid"]}).toDataUri()},formatTime:e=>{let t;if(!e)return"";let r=u()(Number(e)),o=r.hour();return t=o>=0&&o<3?"凌晨":o>=3&&o<6?"拂晓":o>=6&&o<9?"早晨":o>=9&&o<12?"上午":o>=12&&o<15?"下午":o>=15&&o<18?"傍晚":o>=18&&o<21?"薄暮":"深夜",r.format("YYYY年M月D日 ".concat(t,"h点m分"))},formatDate:e=>{let t=u()(Number(e)),r=u()();return t.isSame(r,"day")?t.format("HH:mm"):t.isSame(r.subtract(1,"day"),"day")?"昨天 ".concat(t.format("HH:mm")):t.isoWeek()===r.isoWeek()?"".concat(["周日","周一","周二","周三","周四","周五","周六"][t.day()]," ").concat(t.format("HH:mm")):t.year()===r.year()?t.format("M月D日"):t.format("YY年M月D日")},formatAddress:e=>e?e.slice(0,6)+"..."+e.slice(-4):"",enBase64:e=>(0,o.W)((0,n.YW)(e)),deBase64:e=>(0,n._v)((0,o.y)(e)),createJWT:w,verifyJWT:p,login:(e,t)=>k((0,d.BP)(e,t,"I know loss mnemonic will lose my wallet.")),loginSave:k,ZeroAddress:i.j,createToken:v,pinyin:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(t.length<r)return!1;if(e.toLowerCase().includes(t.toLowerCase()))return!0;let o=(0,h.YW)(e,t,{continuous:!0});return!!o&&!!(o.length>=r)}}},16106:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var o=r(95155),n=r(12115),a=r(80630),i=r(9482),s=r(91590),l=r(21220),c=r(39926),d=r(58887),h=r(97287),m=r(70112),u=r(27361),g=r(81001),x=r(69604),f=r(35695),y=r(31857),w=r(6942),p=r(86467);let v=(0,p.A)("outline","copy","Copy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]),k=(0,p.A)("outline","share","Share",[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]]),b=()=>{let e=(0,f.useSearchParams)().get("uid")||i.A.ZeroAddress,t="https://most.box/card?uid=".concat(e),r=async()=>{try{await navigator.clipboard.writeText(e),w.notifications.show({title:"复制成功",message:e,color:"green"})}catch(e){w.notifications.show({title:"复制失败",message:"无法复制到剪贴板",color:"red"})}},n=async()=>{if(navigator.share)try{await navigator.share({title:"Most.Box 名片",text:"查看我的 Most.Box 名片",url:t})}catch(e){p(t)}else p(t)},p=async e=>{try{await navigator.clipboard.writeText(e),w.notifications.show({title:"链接已复制",message:"分享链接已复制到剪贴板",color:"blue"})}catch(e){w.notifications.show({title:"复制失败",message:"无法复制分享链接",color:"red"})}};return(0,o.jsxs)(s.Container,{py:"lg",size:"sm",children:[(0,o.jsx)(a.AppHeader,{title:"名片"}),(0,o.jsxs)(l.Stack,{align:"center",gap:"xl",children:[(0,o.jsx)(c.Avatar,{size:100,radius:"lg",src:i.A.avatar(e),alt:"头像",style:{boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"}}),(0,o.jsxs)(l.Stack,{align:"center",gap:"md",children:[(0,o.jsx)(d.Text,{size:"sm",c:"dimmed",fw:500,children:"我的名片"}),(0,o.jsx)(h.Paper,{radius:"md",p:10,withBorder:!0,style:{display:"flex",backgroundColor:"white"},children:(0,o.jsx)(y.h,{value:t,size:180,bgColor:"white",fgColor:"#333",level:"M"})}),(0,o.jsx)(d.Text,{size:"xs",c:"dimmed",ta:"center",children:"扫描二维码查看"})]}),(0,o.jsxs)(m.Group,{gap:"md",justify:"center",children:[(0,o.jsx)(u.Tooltip,{label:"复制名片",children:(0,o.jsx)(g.ActionIcon,{size:"xl",radius:"xl",variant:"light",color:"blue",onClick:r,children:(0,o.jsx)(v,{size:20})})}),(0,o.jsx)(u.Tooltip,{label:"分享名片",children:(0,o.jsx)(g.ActionIcon,{size:"xl",radius:"xl",variant:"light",color:"green",onClick:n,children:(0,o.jsx)(k,{size:20})})})]}),(0,o.jsx)(x.Box,{mt:"xl",children:(0,o.jsx)(d.Text,{size:"xs",c:"dimmed",ta:"center",children:"Powered by Most.Box"})})]})]})};function j(){return(0,o.jsx)(n.Suspense,{children:(0,o.jsx)(b,{})})}},27106:(e,t,r)=>{Promise.resolve().then(r.bind(r,16106))},71281:()=>{},86467:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(12115),n={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};let a=(e,t,r,a)=>{let i=(0,o.forwardRef)((r,i)=>{let{color:s="currentColor",size:l=24,stroke:c=2,title:d,className:h,children:m,...u}=r;return(0,o.createElement)("svg",{ref:i,...n[e],width:l,height:l,className:["tabler-icon","tabler-icon-".concat(t),h].join(" "),..."filled"===e?{fill:s}:{strokeWidth:c,stroke:s},...u},[d&&(0,o.createElement)("title",{key:"svg-title"},d),...a.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return i.displayName="".concat(r),i}}},e=>{e.O(0,[8198,2545,6748,8805,2598,8694,3847,7361,5982,630,8441,5964,7358],()=>e(e.s=27106)),_N_E=e.O()}]);