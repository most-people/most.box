(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2675],{33329:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P});var t=a(95155),l=a(21220),r=a(69604),d=a(58887),n=a(90557),i=a(39926),c=a(41954),o=a(26903),u=a(59741),x=a(11659),h=a(9482),j=a(80630);a(10516);var p=a(25062),m=a(62037),v=a(19396),b=a(48764),w=a(12115),g=a(65703),k=a(72652),S=a(33139),f=a(16701),A=a(7248);let _=()=>{let e=(0,x.m)({initialValues:{address:""},validate:{address:e=>(0,p.PW)(e)?null:"请输入有效的以太坊地址"}});return(0,t.jsxs)(l.Stack,{gap:"md",className:"add-box",children:[(0,t.jsxs)(r.Box,{className:"header",children:[(0,t.jsx)(d.Text,{size:"xl",fw:500}),(0,t.jsx)(n.Space,{h:"sx"}),(0,t.jsx)(i.Avatar,{size:"xl",radius:"md",src:(0,p.PW)(e.values.address)?h.A.avatar(e.values.address):"/icons/pwa-512x512.png",alt:"it's me"})]}),(0,t.jsx)("form",{onSubmit:e.onSubmit(()=>{e.validate().hasErrors||console.log("address",(0,m.b)(e.values.address))}),children:(0,t.jsxs)(l.Stack,{gap:"md",children:[(0,t.jsx)(c.Textarea,{withAsterisk:!0,label:"好友地址",placeholder:v.j,rows:2,maxLength:42,...e.getInputProps("address")}),(0,t.jsx)(o.Button,{type:"submit",disabled:!e.values.address,children:"添加好友"})]})})]})};function P(){let e=(0,A.h)(),[s]=(0,g.useHash)(),[a,l]=(0,w.useState)(""),n=(0,b.k)(e=>e.wallet),[c]=(0,w.useState)(null),[o,x]=(0,w.useState)(!1);(0,w.useEffect)(()=>{x(!0),s&&(0,p.PW)(s.slice(1))&&l(s.slice(1))},[s]);let m=a===(null==n?void 0:n.address)?"文件传输助手":c?"".concat(c.username,"#").concat(a.slice(-4)):"好友";return(0,t.jsxs)(r.Box,{id:"page-chat",children:[(0,t.jsx)(j.AppHeader,{title:m,right:(0,t.jsxs)(u.Menu,{shadow:"md",position:"bottom-end",withArrow:!0,arrowPosition:"center",disabled:!a,children:[(0,t.jsx)(u.Menu.Target,{children:(0,t.jsx)(i.Avatar,{style:{cursor:"pointer"},src:a?h.A.avatar(a):"/icons/pwa-512x512.png"})}),(0,t.jsxs)(u.Menu.Dropdown,{children:[(0,t.jsx)(u.Menu.Item,{leftSection:(0,t.jsx)(S.A,{size:24}),onClick:()=>{e()},children:(0,t.jsx)(d.Text,{children:"删除好友"})}),(0,t.jsx)(u.Menu.Item,{leftSection:(0,t.jsx)(f.A,{size:24}),onClick:()=>{},children:(0,t.jsx)(d.Text,{children:"清空我的消息"})})]})]})}),(null==c?void 0:c.public_key)&&(0,t.jsx)(k.B,{onSend:()=>{},messages:[],onDelete:()=>{}}),o&&!a&&(0,t.jsx)(_,{})]})}},35672:(e,s,a)=>{Promise.resolve().then(a.bind(a,33329))}},e=>{var s=s=>e(e.s=s);e.O(0,[2119,2545,9729,9816,5232,1281,3464,5111,266,7989,2682,8962,7424,578,2764,8441,2721,7358],()=>s(35672)),_N_E=e.O()}]);