(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3305],{8893:(e,t,o)=>{"use strict";o.d(t,{useId:()=>a});var r=o(12115),n=o(98200),i=o(70134);let l=r["useId".toString()]||(()=>void 0);function a(e){let t=function(){let e=l();return e?"mantine-".concat(e.replace(/:/g,"")):""}(),[o,a]=(0,r.useState)(t);return((0,n.useIsomorphicEffect)(()=>{a((0,i.randomId)())},[]),"string"==typeof e)?e:"undefined"==typeof window?t:o}},9534:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>j});var r=o(95155),n=o(12115),i=o(90101),l=o(67623),a=o(9457),s=o(13877),c=o(2369),d=o(82726),u=o(67661),p=o(17998),g=o(96778),h=o(70305);o(50682);let m=[{dr:-1,dc:0},{dr:1,dc:0},{dr:0,dc:-1},{dr:0,dc:1},{dr:-1,dc:-1},{dr:-1,dc:1},{dr:1,dc:-1},{dr:1,dc:1}];function f(e,t){return e>=0&&e<8&&t>=0&&t<8}function b(){let e=Array.from({length:8},()=>Array.from({length:8},()=>0));return e[3][3]=-1,e[4][4]=-1,e[3][4]=1,e[4][3]=1,e}function v(e,t){let o=[];for(let r=0;r<8;r++)for(let n=0;n<8;n++){let i=function(e,t,o,r){if(0!==e[t][o])return[];let n=[];for(let{dr:i,dc:l}of m){let a=t+i,s=o+l,c=[];for(;f(a,s)&&e[a][s]===-r;)c.push({r:a,c:s}),a+=i,s+=l;c.length>0&&f(a,s)&&e[a][s]===r&&n.push(...c)}return n}(e,r,n,t);i.length>0&&o.push({r,c:n,flips:i})}return o}function x(e){return 1===e?"黑":"白"}function B(e){let{value:t,isValid:o,onClick:n,isLastMove:i}=e;return(0,r.jsxs)(l.Box,{onClick:n,className:"othello-cell".concat(o?" is-valid":""),children:[o&&0===t&&(0,r.jsx)(l.Box,{className:"othello-cell__hint"}),0!==t&&(0,r.jsx)(l.Box,{className:"othello-disc ".concat(1===t?"othello-disc--black":"othello-disc--white").concat(i?" is-last":"")})]})}function j(){let[e,t]=(0,n.useState)(()=>b()),[o,m]=(0,n.useState)(1),[f,j]=(0,n.useState)(null),[y,S]=(0,n.useState)(null),[k,z]=(0,n.useState)([]),w=(0,n.useMemo)(()=>v(e,o),[e,o]),C=(0,n.useMemo)(()=>(function(e){let t=0,o=0;for(let r=0;r<8;r++)for(let n=0;n<8;n++)1===e[r][n]&&t++,-1===e[r][n]&&o++;return{black:t,white:o}})(e),[e]),_=(0,n.useMemo)(()=>0===v(e,1).length&&0===v(e,-1).length,[e]);function G(r,n){if(_)return;let i=w.find(e=>e.r===r&&e.c===n);i&&(z(t=>[...t,{board:e,current:o,lastMove:f}]),t(function(e,t,o){let r=e.map(e=>[...e]);for(let e of(r[t.r][t.c]=o,t.flips))r[e.r][e.c]=o;return r}(e,i,o)),j({r,c:n}),m(-1*o))}(0,n.useEffect)(()=>{if(!y)return;let e=window.setTimeout(()=>S(null),1200);return()=>window.clearTimeout(e)},[y]),(0,n.useEffect)(()=>{_||0===v(e,o).length&&(z(t=>[...t,{board:e,current:o,lastMove:f}]),S("".concat(x(o),"方无可落子，自动跳过回合")),m(-1*o))},[e,o,_]);let N=(0,n.useMemo)(()=>_?C.black===C.white?"平局":C.black>C.white?"黑方胜":"白方胜":null,[_,C]),R=(0,n.useMemo)(()=>{let t=new Set(w.map(e=>"".concat(e.r,"-").concat(e.c))),o=[];for(let n=0;n<8;n++)for(let i=0;i<8;i++){let s="".concat(n,"-").concat(i),c=e[n][i],d=t.has(s),u=f&&f.r===n&&f.c===i,p=d?"可落子":0===c?null:x(c);o.push((0,r.jsx)(l.Box,{className:"cell-wrapper",children:(0,r.jsx)(a.Tooltip,{label:p,openDelay:200,disabled:!p,children:(0,r.jsx)(l.Box,{onClick:()=>G(n,i),className:"cell-inner",children:(0,r.jsx)(B,{value:c,isValid:d,isLastMove:null!=u?u:void 0,onClick:()=>G(n,i)})})})},s))}return o},[e,w,f]);return(0,r.jsxs)(s.Container,{py:20,id:"page-game-black",children:[(0,r.jsx)(i.AppHeader,{title:"黑白棋（Othello）"}),(0,r.jsxs)(c.Stack,{gap:"md",children:[(0,r.jsxs)(d.Paper,{withBorder:!0,p:"md",radius:"md",children:[(0,r.jsxs)(u.Group,{justify:"space-between",align:"center",children:[(0,r.jsxs)(u.Group,{gap:"xs",align:"center",children:[(0,r.jsxs)(p.Badge,{size:"lg",color:"dark",variant:"filled",children:["黑：",C.black]}),(0,r.jsxs)(p.Badge,{size:"lg",color:"gray",variant:"light",children:["白：",C.white]})]}),(0,r.jsxs)(u.Group,{children:[(0,r.jsx)(g.Button,{onClick:function(){t(b()),m(1),j(null),S(null),z([])},variant:"light",children:"重开"}),(0,r.jsx)(g.Button,{onClick:function(){S(null),z(e=>{if(0===e.length)return e;let o=e[e.length-1];return t(o.board),m(o.current),j(o.lastMove),e.slice(0,-1)})},variant:"outline",disabled:0===k.length,children:"悔棋"})]})]}),(0,r.jsxs)(u.Group,{mt:"sm",gap:"xs",children:[(0,r.jsxs)(p.Badge,{color:1===o?"dark":"gray",variant:"filled",children:["当前回合：",x(o)]}),y&&(0,r.jsx)(p.Badge,{color:"orange",children:y}),_&&(0,r.jsx)(p.Badge,{color:"green",children:N})]})]}),(0,r.jsx)(l.Box,{className:"board-container",children:(0,r.jsx)(l.Box,{className:"board-grid",children:R})}),(0,r.jsx)(d.Paper,{withBorder:!0,p:"md",radius:"md",children:(0,r.jsx)(h.Text,{size:"sm",c:"dimmed",children:"规则：棋子只能落在能吃子的位置。吃子规则为沿直线方向将对方棋子夹在两枚己方棋子之间，夹住的棋子会被翻转为己方颜色。若当前回合无可落子位置，则自动跳过。双方均无可落子位置时，游戏结束，棋子多者获胜。"})})]})]})}},13877:(e,t,o)=>{"use strict";o.d(t,{Container:()=>p});var r=o(95155);o(12115);var n=o(49957),i=o(80533),l=o(23653),a=o(39398),s=o(67623),c=o(91853),d={root:"m_7485cace"};let u=(0,i.createVarsResolver)((e,t)=>{let{size:o,fluid:r}=t;return{root:{"--container-size":r?void 0:(0,n.getSize)(o,"container-size")}}}),p=(0,c.factory)((e,t)=>{let o=(0,l.useProps)("Container",null,e),{classNames:n,className:i,style:c,styles:p,unstyled:g,vars:h,fluid:m,mod:f,attributes:b,strategy:v,...x}=o,B=(0,a.useStyles)({name:"Container",classes:d,props:o,className:i,style:c,classNames:n,styles:p,unstyled:g,attributes:b,vars:h,varsResolver:u});return(0,r.jsx)(s.Box,{ref:t,mod:[{fluid:m,strategy:v||"block"},f],...B("root"),...x})});p.classes=d,p.displayName="@mantine/core/Container"},17998:(e,t,o)=>{"use strict";o.d(t,{Badge:()=>g});var r=o(95155);o(12115);var n=o(49957),i=o(80533),l=o(26225),a=o(23653),s=o(39398),c=o(67623),d=o(24454),u={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};let p=(0,i.createVarsResolver)((e,t)=>{let{radius:o,color:r,gradient:i,variant:a,size:s,autoContrast:c}=t,d=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:i,variant:a||"filled",autoContrast:c});return{root:{"--badge-height":(0,n.getSize)(s,"badge-height"),"--badge-padding-x":(0,n.getSize)(s,"badge-padding-x"),"--badge-fz":(0,n.getSize)(s,"badge-fz"),"--badge-radius":void 0===o?void 0:(0,n.getRadius)(o),"--badge-bg":r||a?d.background:void 0,"--badge-color":r||a?d.color:void 0,"--badge-bd":r||a?d.border:void 0,"--badge-dot-color":"dot"===a?(0,l.getThemeColor)(r,e):void 0}}}),g=(0,d.polymorphicFactory)((e,t)=>{let o=(0,a.useProps)("Badge",null,e),{classNames:n,className:i,style:l,styles:d,unstyled:g,vars:h,radius:m,color:f,gradient:b,leftSection:v,rightSection:x,children:B,variant:j,fullWidth:y,autoContrast:S,circle:k,mod:z,attributes:w,...C}=o,_=(0,s.useStyles)({name:"Badge",props:o,classes:u,className:i,style:l,classNames:n,styles:d,unstyled:g,attributes:w,vars:h,varsResolver:p});return(0,r.jsxs)(c.Box,{variant:j,mod:[{block:y,circle:k,"with-right-section":!!x,"with-left-section":!!v},z],..._("root",{variant:j}),ref:t,...C,children:[v&&(0,r.jsx)("span",{..._("section"),"data-position":"left",children:v}),(0,r.jsx)("span",{..._("label"),children:B}),x&&(0,r.jsx)("span",{..._("section"),"data-position":"right",children:x})]})});g.classes=u,g.displayName="@mantine/core/Badge"},41789:(e,t,o)=>{"use strict";o.d(t,{A:()=>r});var r={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"}},48131:(e,t,o)=>{Promise.resolve().then(o.bind(o,9534))},50682:()=>{},63078:(e,t,o)=>{"use strict";o.d(t,{useDocumentTitle:()=>n});var r=o(98200);function n(e){(0,r.useIsomorphicEffect)(()=>{"string"==typeof e&&e.trim().length>0&&(document.title=e.trim())},[e])}},72995:(e,t,o)=>{"use strict";o.d(t,{ButtonGroupSection:()=>p});var r=o(95155);o(12115);var n=o(49957),i=o(80533),l=o(23653),a=o(39398),s=o(67623),c=o(91853),d=o(41789);let u=(0,i.createVarsResolver)((e,t)=>{let{radius:o,color:r,gradient:i,variant:l,autoContrast:a,size:s}=t,c=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:i,variant:l||"filled",autoContrast:a});return{groupSection:{"--section-height":(0,n.getSize)(s,"section-height"),"--section-padding-x":(0,n.getSize)(s,"section-padding-x"),"--section-fz":(null==s?void 0:s.includes("compact"))?(0,n.getFontSize)(s.replace("compact-","")):(0,n.getFontSize)(s),"--section-radius":void 0===o?void 0:(0,n.getRadius)(o),"--section-bg":r||l?c.background:void 0,"--section-color":c.color,"--section-bd":r||l?c.border:void 0}}}),p=(0,c.factory)((e,t)=>{let o=(0,l.useProps)("ButtonGroupSection",null,e),{className:n,style:i,classNames:c,styles:p,unstyled:g,vars:h,variant:m,gradient:f,radius:b,autoContrast:v,attributes:x,...B}=o,j=(0,a.useStyles)({name:"ButtonGroupSection",props:o,classes:d.A,className:n,style:i,classNames:c,styles:p,unstyled:g,attributes:x,vars:h,varsResolver:u,rootSelector:"groupSection"});return(0,r.jsx)(s.Box,{...j("groupSection"),ref:t,variant:m,...B})});p.classes=d.A,p.displayName="@mantine/core/ButtonGroupSection"},96778:(e,t,o)=>{"use strict";o.d(t,{Button:()=>x});var r=o(95155),n=o(28428);o(12115);var i=o(49957),l=o(80533),a=o(23653),s=o(39398),c=o(67623),d=o(24454),u=o(63090),p=o(63652),g=o(73643),h=o(98929),m=o(72995),f=o(41789);let b={in:{opacity:1,transform:"translate(-50%, calc(-50% + ".concat((0,n.D)(1),"))")},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},v=(0,l.createVarsResolver)((e,t)=>{let{radius:o,color:r,gradient:n,variant:l,size:a,justify:s,autoContrast:c}=t,d=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:l||"filled",autoContrast:c});return{root:{"--button-justify":s,"--button-height":(0,i.getSize)(a,"button-height"),"--button-padding-x":(0,i.getSize)(a,"button-padding-x"),"--button-fz":(null==a?void 0:a.includes("compact"))?(0,i.getFontSize)(a.replace("compact-","")):(0,i.getFontSize)(a),"--button-radius":void 0===o?void 0:(0,i.getRadius)(o),"--button-bg":r||l?d.background:void 0,"--button-hover":r||l?d.hover:void 0,"--button-color":d.color,"--button-bd":r||l?d.border:void 0,"--button-hover-color":r||l?d.hoverColor:void 0}}}),x=(0,d.polymorphicFactory)((e,t)=>{let o=(0,a.useProps)("Button",null,e),{style:n,vars:i,className:l,color:d,disabled:h,children:m,leftSection:x,rightSection:B,fullWidth:j,variant:y,radius:S,loading:k,loaderProps:z,gradient:w,classNames:C,styles:_,unstyled:G,"data-disabled":N,autoContrast:R,mod:A,attributes:P,...E}=o,M=(0,s.useStyles)({name:"Button",props:o,classes:f.A,className:l,style:n,classNames:C,styles:_,unstyled:G,attributes:P,vars:i,varsResolver:v}),T=!!x,F=!!B;return(0,r.jsxs)(g.UnstyledButton,{ref:t,...M("root",{active:!h&&!k&&!N}),unstyled:G,variant:y,disabled:h||k,mod:[{disabled:h||N,loading:k,block:j,"with-left-section":T,"with-right-section":F},A],...E,children:["boolean"==typeof k&&(0,r.jsx)(p.Transition,{mounted:k,transition:b,duration:150,children:e=>(0,r.jsx)(c.Box,{component:"span",...M("loader",{style:e}),"aria-hidden":!0,children:(0,r.jsx)(u.Loader,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...z})})}),(0,r.jsxs)("span",{...M("inner"),children:[x&&(0,r.jsx)(c.Box,{component:"span",...M("section"),mod:{position:"left"},children:x}),(0,r.jsx)(c.Box,{component:"span",mod:{loading:k},...M("label"),children:m}),B&&(0,r.jsx)(c.Box,{component:"span",...M("section"),mod:{position:"right"},children:B})]})]})});x.classes=f.A,x.displayName="@mantine/core/Button",x.Group=h.ButtonGroup,x.GroupSection=m.ButtonGroupSection},98929:(e,t,o)=>{"use strict";o.d(t,{ButtonGroup:()=>g});var r=o(95155),n=o(28428);o(12115);var i=o(80533),l=o(23653),a=o(39398),s=o(67623),c=o(91853),d=o(41789);let u={orientation:"horizontal"},p=(0,i.createVarsResolver)((e,t)=>{let{borderWidth:o}=t;return{group:{"--button-border-width":(0,n.D)(o)}}}),g=(0,c.factory)((e,t)=>{let o=(0,l.useProps)("ButtonGroup",u,e),{className:n,style:i,classNames:c,styles:g,unstyled:h,orientation:m,vars:f,borderWidth:b,variant:v,mod:x,attributes:B,...j}=(0,l.useProps)("ButtonGroup",u,e),y=(0,a.useStyles)({name:"ButtonGroup",props:o,classes:d.A,className:n,style:i,classNames:c,styles:g,unstyled:h,attributes:B,vars:f,varsResolver:p,rootSelector:"group"});return(0,r.jsx)(s.Box,{...y("group"),ref:t,variant:v,mod:[{"data-orientation":m},x],role:"group",...j})});g.classes=d.A,g.displayName="@mantine/core/ButtonGroup"}},e=>{e.O(0,[6507,2545,2829,9318,9457,101,8441,1255,7358],()=>e(e.s=48131)),_N_E=e.O()}]);