(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4345],{53987:(e,t,a)=>{"use strict";a.d(t,{Wf:()=>c,yc:()=>p,MT:()=>i,i5:()=>r,WC:()=>o,Pt:()=>l});let s=JSON.parse('[{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"Data","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_DATA_LENGTH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_NAME_LENGTH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NAME_LENGTH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deleteData","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"deleteName","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getData","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"getOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"nameOwners","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"names","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_data","type":"string"}],"name":"setData","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_newName","type":"string"}],"name":"setName","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),n=["https://base.llamarpc.com","https://mainnet.base.org","https://developer-access-mainnet.base.org","https://base-mainnet.diamondswap.org/rpc","https://base.public.blockpi.network/v1/rpc/public","https://1rpc.io/base","https://base-pokt.nodies.app","https://base.meowrpc.com","https://base-mainnet.public.blastapi.io","https://base.gateway.tenderly.co","https://gateway.tenderly.co/public/base","https://rpc.notadegen.com/base","https://base-rpc.publicnode.com","https://base.drpc.org","https://base.api.onfinality.io/public","https://public.stackup.sh/api/v1/node/base-mainnet","https://base-mainnet.gateway.tatum.io","https://base.rpc.subquery.network/public","https://api.zan.top/base-mainnet","https://endpoints.omniatech.io/v1/base/mainnet/public","https://base.lava.build","https://rpc.numa.network/base","https://node.histori.xyz/base-mainnet/8ry9f6t9dct1se2hlagxnd9n2a","https://0xrpc.io/base","https://rpc.owlracle.info/base/70d38ce1826c4a60bb2a8e05a6c8b20f","https://base.therpc.io"],i="0xB67662F0d2BB106B055503062e1dba4f072f5781",r="0x1bcB1bD1c669e154c1d69D7c7C2Ab5D19C9109DB",l=()=>n[Math.floor(Math.random()*n.length)],o={mainnet:{chainId:8453,rpc:"https://mainnet.base.org",name:"Base 主网",color:"blue",explorer:"https://basescan.org"},testnet:{chainId:84532,rpc:"https://sepolia.base.org",name:"Base 测试网",color:"orange",explorer:"https://sepolia.basescan.org"}},c=[{inputs:[],name:"getAllDots",outputs:[{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"string[]",name:"names",type:"string[]"},{internalType:"string[][]",name:"APIss",type:"string[][]"},{internalType:"string[][]",name:"CIDss",type:"string[][]"},{internalType:"uint256[]",name:"updates",type:"uint256[]"}],stateMutability:"view",type:"function"}],p=s},59401:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>K});var s=a(95155),n=a(25107),i=a(2369),r=a(70305),l=a(96778),o=a(13877),c=a(63090),p=a(15239),d=a(20063),u=a(12115),h=a(90101),m=a(12834),y=a(41970),x=a(67661),b=a(74264),f=a(60688),g=a(93852),j=a(9457),w=a(58380),v=a(73524),T=a(82726),M=a(52619),k=a.n(M),D=a(13297),A=a(67812),C=a(26195),N=a(29722);let I=()=>{let e=(0,d.usePathname)(),t=(0,d.useSearchParams)(),a=t.get("type")||"file",n=e.split("/")[2]||"",o=t.get("filename")||"",[c,p]=(0,u.useState)(o),M=(0,D.k)(e=>e.dotCID),I=(0,D.k)(e=>e.dotAPI),S=(0,u.useMemo)(()=>{if(I&&n){let e=new URL(location.origin);e.pathname="/ipfs/".concat(n),c&&(e.searchParams.set("filename",c),e.searchParams.set("type",a));try{e.hash=new URL(I).host}catch(e){}return e.href}return""},[I,n,c]),_=(0,u.useMemo)(()=>{if(M&&n){let e=new URL(M);return e.pathname="/ipfs/".concat(n),c&&e.searchParams.set("filename",c),e.href}return""},[M,n,c]),P=(0,u.useMemo)(()=>{if(M&&n){let e=new URL(M);return e.pathname="/ipfs/".concat(n),e.searchParams.set("download","true"),c&&("dir"===a||"note"===a?(e.searchParams.set("format","tar"),e.searchParams.set("filename","".concat(c,".tar"))):e.searchParams.set("filename",c)),e.href}return""},[M,n,c,a]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.AppHeader,{title:c||n||"CID"}),(0,s.jsxs)(i.Stack,{gap:"lg",children:[!n&&(0,s.jsx)(y.Alert,{icon:(0,s.jsx)(A.A,{size:18}),color:"orange",radius:"md",children:"未提供 CID，请通过带有 cid 的链接访问本页。"}),(0,s.jsxs)(x.Group,{justify:"space-between",align:"center",children:[(0,s.jsxs)(x.Group,{gap:8,children:["dir"===a?"\uD83D\uDCC1":"\uD83D\uDCC4",(0,s.jsxs)(b.Title,{order:4,children:["dir"===a?"文件夹":"文件","信息"]})]}),o&&(0,s.jsx)(r.Text,{size:"sm",c:"dimmed",children:o})]}),(0,s.jsxs)(i.Stack,{children:[(0,s.jsx)(f.TextInput,{radius:"md",label:"CID",placeholder:"请输入 CID",value:n,readOnly:!0,variant:"filled"}),(0,s.jsx)(f.TextInput,{radius:"md",label:"dir"===a?"文件夹":"文件名",placeholder:"dir"===a?"文件夹":"文件名",value:c,onChange:e=>p(e.currentTarget.value)})]}),(0,s.jsx)(x.Group,{justify:"space-between",children:(0,s.jsxs)(x.Group,{gap:8,children:["\uD83D\uDCD6",(0,s.jsx)(b.Title,{order:4,children:"查看 / 下载"})]})}),!M&&(0,s.jsx)(y.Alert,{color:"gray",radius:"md",mb:"sm",children:"未连接到 Dot 节点，下载链接将不可用。"}),(0,s.jsx)(f.TextInput,{radius:"md",value:_||"",readOnly:!0,variant:"filled",disabled:!_,placeholder:"无可用链接",rightSection:(0,s.jsx)(g.CopyButton,{value:_||"",children:e=>{let{copied:t,copy:a}=e;return(0,s.jsx)(j.Tooltip,{label:t?"已复制":"复制链接",position:"top",children:(0,s.jsx)(w.ActionIcon,{variant:"subtle",color:t?"teal":"gray",onClick:a,disabled:!_,children:(0,s.jsx)(C.A,{size:16})})})}})}),(0,s.jsxs)(x.Group,{wrap:"nowrap",children:[(0,s.jsx)(l.Button,{color:"green",variant:"light",w:"100%",component:k(),target:"_blank",href:_,children:"查看"}),c?(0,s.jsx)(l.Button,{variant:"light",color:"blue",w:"100%",component:k(),target:"_blank",href:P,children:"下载"}):(0,s.jsx)(l.Button,{variant:"light",color:"blue",w:"100%",disabled:!0,children:"下载"})]}),"note"===a&&(0,s.jsx)(l.Button,{variant:"light",w:"100%",component:k(),href:"/note/?cid=".concat(n,"&name=").concat(c),target:"_blank",children:"打开笔记"}),(0,s.jsx)(x.Group,{justify:"space-between",children:(0,s.jsxs)(x.Group,{gap:8,children:["\uD83D\uDCE4",(0,s.jsx)(b.Title,{order:4,children:"分享本页"})]})}),!I&&(0,s.jsx)(y.Alert,{color:"gray",radius:"md",mb:"sm",children:"未设置 Dot API，分享链接将不可用。"}),(0,s.jsx)(f.TextInput,{radius:"md",value:S||"",readOnly:!0,variant:"filled",disabled:!S,placeholder:"无可用链接",rightSection:(0,s.jsx)(g.CopyButton,{value:S||"",children:e=>{let{copied:t,copy:a}=e;return(0,s.jsx)(j.Tooltip,{label:t?"已复制":"复制链接",position:"top",children:(0,s.jsx)(w.ActionIcon,{variant:"subtle",color:t?"teal":"gray",onClick:a,disabled:!S,children:(0,s.jsx)(C.A,{size:16})})})}})}),S&&(0,s.jsx)(v.Flex,{justify:"center",children:(0,s.jsx)(T.Paper,{radius:"md",p:12,withBorder:!0,style:{backgroundColor:"white"},children:(0,s.jsxs)(i.Stack,{gap:9,children:[(0,s.jsxs)(x.Group,{justify:"center",gap:6,children:[(0,s.jsx)(N.A,{size:18}),(0,s.jsx)(r.Text,{size:"sm",c:"dimmed",children:"扫码分享"}),(0,s.jsx)(N.A,{size:18})]}),(0,s.jsx)(m.h,{value:S,size:200,bgColor:"white",fgColor:"#333",level:"M"})]})})})]})]})};function S(){return(0,s.jsx)(u.Suspense,{children:(0,s.jsx)(I,{})})}var _=a(40387);a(62755);let P=()=>{let e="https://most.box/ipns/",t="k51qzi5uqu5dmdudfnx05uaaehyo5yceivmvhjehy2isy7o3nj5coyw9ycy2qv";return(0,s.jsxs)(_.Center,{id:"page-ipns",children:[(0,s.jsx)(h.AppHeader,{title:"IPNS 二维码"}),(0,s.jsxs)("div",{className:"ipns-qrcode",children:[(0,s.jsx)("div",{className:"qrcode-frame",children:(0,s.jsx)(m.h,{className:"qrcode",value:e+t+"",size:138,bgColor:"transparent",fgColor:"#ffffff"})}),(0,s.jsx)("div",{className:"line"}),(0,s.jsxs)("div",{className:"info",children:[(0,s.jsx)("div",{className:"name",children:"HEU KMS Activator"}),(0,s.jsx)("div",{className:"host",children:e}),(0,s.jsx)("div",{className:"ipns",children:t}),(0,s.jsx)("div",{className:"path",children:""})]})]})]})};function B(){return(0,s.jsx)(u.Suspense,{children:(0,s.jsx)(P,{})})}var E=a(53987),z=a(33864),G=a(67623),L=a(81216),O=a(41524),H=a(54827),R=a(97443),U=a(21794),W=a(61505),q=a(99682),F=a(59126);function J(){let e=(0,d.usePathname)(),[t,a]=(0,u.useState)(""),n=E.WC.mainnet.rpc,[l,o]=(0,u.useState)(""),c=(0,u.useMemo)(()=>new L.FR(n),[n]),p=(0,u.useMemo)(()=>new O.NZ(E.i5,E.yc,c),[c]),[m,y]=(0,u.useState)(""),[x,b]=(0,u.useState)("");(0,u.useEffect)(()=>{a(e.split("/")[1].slice(1))},[e]);let f=async e=>{try{let t=await p.getOwner(e);y(t),g(t)}catch(e){console.warn("获取地址失败",e),F.notifications.show({message:"获取地址失败",color:"red"})}},g=async e=>{try{let t=await p.getName(e);t?j(t):F.notifications.show({message:"没有绑定用户名"})}catch(e){console.warn("获取用户名失败",e)}},j=t=>{b(t);let a=e.split("/");a[1]="@"+t;let s=new URL(window.location.href);s.pathname=a.join("/"),window.history.replaceState(null,"",s.href)};(0,u.useEffect)(()=>{t&&((0,H.PW)(t)?(y(t),g(t)):(f(t),b(t)))},[t]);let v=(0,D.k)(e=>e.nodeDark),T=(0,D.k)(e=>e.dotAPI),M=(0,D.k)(e=>e.updateDot),A=(0,u.useRef)(null),C=(0,W.B)(),N=e.split("/")[2]||".profile",[I,S]=(0,u.useState)(""),_=async(e,t,a)=>{T||M(t);try{let s=(await U.FH.get("/files.cid/".concat(e,"/.note/").concat(N),{baseURL:t})).data;if(s){S(s);let e=await fetch("".concat(a,"/ipfs/").concat(s,"/index.md")),t=await e.text();t&&A.current&&(await C.initViewer(A.current)).setMarkdown(t)}else throw Error("cid 不存在")}catch(e){console.warn("获取笔记失败",e),F.notifications.show({message:"获取笔记 ".concat(N," 失败"),color:"red"})}},P=async e=>{try{let t=await p.getData(e);if(t){let a=JSON.parse(t);if(null==a?void 0:a.dot){o(a.dot);let t=(await U.FH.get("/api.dot",{baseURL:a.dot})).data;if(t){let s=t.CIDs[0];T.endsWith(":1976")&&(s=T.slice(0,-5)+":8080"),_(e,a.dot,s)}else throw Error("获取 api.dot 失败")}else throw Error("获取 data.dot 失败")}else throw Error("获取 data 失败")}catch(e){console.warn("获取数据失败",e),F.notifications.show({message:"获取数据失败",color:"red"})}};return(0,u.useEffect)(()=>{m&&P(m)},[m]),(0,s.jsxs)(i.Stack,{children:[(0,s.jsx)(h.AppHeader,{title:x||R.A.formatAddress(m),right:(0,s.jsxs)(z.Menu,{shadow:"md",children:[(0,s.jsx)(z.Menu.Target,{children:(0,s.jsx)(w.ActionIcon,{variant:"transparent",color:"--text-color",children:(0,s.jsx)(q.I,{name:"More",size:24})})}),(0,s.jsx)(z.Menu.Dropdown,{children:(0,s.jsx)(z.Menu.Item,{leftSection:"✏️",component:k(),href:"/note/?uid=".concat(m,"&name=").concat(N,"&cid=").concat(I),target:"_blank",children:"编辑"})})]})}),(0,s.jsxs)(r.Text,{children:["用户名：",x]}),(0,s.jsxs)(r.Text,{children:["地址：",m]}),(0,s.jsxs)(r.Text,{children:["节点：",l]}),(0,s.jsxs)(r.Text,{children:["CID：",I]}),(0,s.jsx)(G.Box,{className:v,ref:A})]})}let X=()=>{let e=(0,n.h)();return(0,s.jsxs)(i.Stack,{gap:"md",align:"center",children:[(0,s.jsx)(p.default,{src:"/img/404.svg",alt:"404",width:300,height:225}),(0,s.jsx)(r.Text,{c:"dimmed",children:"抱歉，你要找的页面不见了"}),(0,s.jsx)(l.Button,{onClick:e,variant:"gradient",children:"返回首页"})]})};function K(){let e=(0,d.usePathname)(),[t,a]=(0,u.useState)("");return(0,u.useEffect)(()=>{e.startsWith("/ipfs/")?a("ipfs"):e.startsWith("/ipns/")?a("ipns"):e.startsWith("/@")?e.slice(2,-1)&&a("user"):a("404")},[e]),(0,s.jsx)(o.Container,{w:"100%",p:"md",children:""===t?(0,s.jsx)(i.Stack,{align:"center",children:(0,s.jsx)(c.Loader,{color:"black",size:"lg",type:"bars"})}):"user"===t?(0,s.jsx)(J,{}):"ipfs"===t?(0,s.jsx)(S,{}):"ipns"===t?(0,s.jsx)(B,{}):(0,s.jsx)(X,{})})}},62755:()=>{},92861:(e,t,a)=>{Promise.resolve().then(a.bind(a,59401))}},e=>{e.O(0,[4530,8198,2545,642,2829,5619,6714,8555,8990,5125,9287,9318,3252,9457,8835,3843,6982,2834,7141,101,8289,8441,1255,7358],()=>e(e.s=92861)),_N_E=e.O()}]);