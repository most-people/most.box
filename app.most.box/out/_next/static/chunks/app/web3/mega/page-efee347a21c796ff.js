(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4099],{4673:(e,t,o)=>{"use strict";o.d(t,{BP:()=>m,OM:()=>g,yO:()=>p});var n=o(30167),r=o(71425),a=o(44532),s=o(87788),i=o(56076),l=o(88413),c=o(70358),d=o(26634),u=o.n(d);let m=(e,t,o)=>{let c=(0,n.YW)(t),d=(0,n.YW)("/most.box/"+e),m=(0,r.A)(c,d,3,32,"sha512"),p=(0,a.q5)((0,s.s)(m)),g=p.slice(0,32),h=u().box.keyPair.fromSecretKey(g),f=(0,a.c$)(h.publicKey),v=(0,a.c$)(h.secretKey),w=i.v.entropyToPhrase(p);return{username:e,address:l.QX.fromPhrase(w).address,public_key:f,private_key:v,mnemonic:"I know loss mnemonic will lose my wallet."===o?w:""}},p=(e,t,o)=>{let n=new TextEncoder().encode(e),r=u().randomBytes(u().box.nonceLength),s=u().box(n,r,new Uint8Array((0,a.q5)(t)),new Uint8Array((0,a.q5)(o)));return s?["mp://2",(0,c.W)(r),(0,c.W)(s)].join("."):(console.info("加密失败"),"")},g=(e,t,o)=>{let[n,r,s]=e.split(".");if("mp://2"!==n)return console.info("无效的密文"),"";let i=u().box.open((0,c.y)(s),(0,c.y)(r),new Uint8Array((0,a.q5)(t)),new Uint8Array((0,a.q5)(o)));return i?new TextDecoder().decode(i):(console.info("解密失败"),"")}},7248:(e,t,o)=>{"use strict";o.d(t,{h:()=>r});var n=o(35695);let r=()=>{let e=(0,n.useRouter)(),t=(0,n.usePathname)();return()=>{sessionStorage.firstPath===t?(sessionStorage.firstPath="/",e.replace("/")):e.back()}}},9482:(e,t,o)=>{"use strict";o.d(t,{A:()=>b});var n=o(70358),r=o(30167),a=o(88413),s=o(19396),i=o(96842),l=o(42995),c=o(3648),d=o(4673),u=o(59909),m=o(30832),p=o.n(m),g=o(99758),h=o.n(g);o(38464);var f=o(76920),v=o.n(f);p().extend(v()),p().extend(h()),p().locale("zh-cn");let w=e=>{let t=String(Date.now()),o=(0,n.W)(crypto.getRandomValues(new Uint8Array(32))),r=sessionStorage.getItem("fingerprint")||"",a=[location.origin,r].join("/"),s=[t,o].join("."),{public_key:i,private_key:l}=(0,d.BP)(a,s);return{jwt:(0,d.yO)(JSON.stringify(e),i,l),jwtSecret:s}},y=(e,t)=>{let[o]=t.split(".");if(Date.now()-Number(o)>288e5)return console.log("jwt 已过期"),null;try{let o=sessionStorage.getItem("fingerprint")||"",n=[location.origin,o].join("/"),{public_key:r,private_key:a}=(0,d.BP)(n,t),s=(0,d.OM)(e,r,a);if(s)return JSON.parse(s)}catch(e){console.log("验证失败:",e)}return null},x=async e=>{let t=Date.now().toString(),o=a.QX.fromPhrase(e.mnemonic),n=await o.signMessage(t);localStorage.token=[e.address,t,n].join(".")},b={avatar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,i.gn)(l,{seed:"most.box@"+e,flip:!0,backgroundType:["gradientLinear"]}).toDataUri()},avatarCID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,i.gn)(c,{seed:"most.box#"+e,flip:!0,backgroundType:["gradientLinear","solid"]}).toDataUri()},formatTime:e=>{let t;if(!e)return"";let o=p()(Number(e)),n=o.hour();return t=n>=0&&n<3?"凌晨":n>=3&&n<6?"拂晓":n>=6&&n<9?"早晨":n>=9&&n<12?"上午":n>=12&&n<15?"下午":n>=15&&n<18?"傍晚":n>=18&&n<21?"薄暮":"深夜",o.format("YYYY年M月D日 ".concat(t,"h点m分"))},formatDate:e=>{let t=p()(Number(e)),o=p()();return t.isSame(o,"day")?t.format("HH:mm"):t.isSame(o.subtract(1,"day"),"day")?"昨天 ".concat(t.format("HH:mm")):t.isoWeek()===o.isoWeek()?"".concat(["周日","周一","周二","周三","周四","周五","周六"][t.day()]," ").concat(t.format("HH:mm")):t.year()===o.year()?t.format("M月D日"):t.format("YY年M月D日")},formatAddress:e=>e?e.slice(0,6)+"..."+e.slice(-4):"",enBase64:e=>(0,n.W)((0,r.YW)(e)),deBase64:e=>(0,r._v)((0,n.y)(e)),createJWT:w,verifyJWT:y,login:(e,t)=>{try{var o;let n=(0,d.BP)(e,t,"I know loss mnemonic will lose my wallet."),{jwt:r,jwtSecret:a}=w(n);if((null==(o=y(r,a))?void 0:o.address)===n.address)return localStorage.setItem("jwt",r),localStorage.setItem("jwtSecret",a),x(n),n}catch(e){console.log("登录失败:",e)}return null},ZeroAddress:s.j,createToken:x,pinyin:function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(t.length<o)return!1;if(e.toLowerCase().includes(t.toLowerCase()))return!0;let n=(0,u.YW)(e,t,{continuous:!0});return!!n&&!!(n.length>=o)}}},26903:(e,t,o)=>{"use strict";o.d(t,{Button:()=>y});var n=o(95155),r=o(5903);o(12115);var a=o(56204),s=o(68918),i=o(43664),l=o(53791),c=o(69604),d=o(64511),u=o(83347),m=o(60384),p=o(43608),g=o(62614),h=o(80096),f=o(41930);let v={in:{opacity:1,transform:"translate(-50%, calc(-50% + ".concat((0,r.D)(1),"))")},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},w=(0,s.createVarsResolver)((e,t)=>{let{radius:o,color:n,gradient:r,variant:s,size:i,justify:l,autoContrast:c}=t,d=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:s||"filled",autoContrast:c});return{root:{"--button-justify":l,"--button-height":(0,a.getSize)(i,"button-height"),"--button-padding-x":(0,a.getSize)(i,"button-padding-x"),"--button-fz":(null==i?void 0:i.includes("compact"))?(0,a.getFontSize)(i.replace("compact-","")):(0,a.getFontSize)(i),"--button-radius":void 0===o?void 0:(0,a.getRadius)(o),"--button-bg":n||s?d.background:void 0,"--button-hover":n||s?d.hover:void 0,"--button-color":d.color,"--button-bd":n||s?d.border:void 0,"--button-hover-color":n||s?d.hoverColor:void 0}}}),y=(0,d.polymorphicFactory)((e,t)=>{let o=(0,i.useProps)("Button",null,e),{style:r,vars:a,className:s,color:d,disabled:g,children:h,leftSection:y,rightSection:x,fullWidth:b,variant:S,radius:j,loading:A,loaderProps:k,gradient:B,classNames:I,styles:M,unstyled:D,"data-disabled":P,autoContrast:N,mod:L,attributes:R,...C}=o,z=(0,l.useStyles)({name:"Button",props:o,classes:f.A,className:s,style:r,classNames:I,styles:M,unstyled:D,attributes:R,vars:a,varsResolver:w}),U=!!y,E=!!x;return(0,n.jsxs)(p.UnstyledButton,{ref:t,...z("root",{active:!g&&!A&&!P}),unstyled:D,variant:S,disabled:g||A,mod:[{disabled:g||P,loading:A,block:b,"with-left-section":U,"with-right-section":E},L],...C,children:[(0,n.jsx)(m.Transition,{mounted:!!A,transition:v,duration:150,children:e=>(0,n.jsx)(c.Box,{component:"span",...z("loader",{style:e}),"aria-hidden":!0,children:(0,n.jsx)(u.Loader,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...k})})}),(0,n.jsxs)("span",{...z("inner"),children:[y&&(0,n.jsx)(c.Box,{component:"span",...z("section"),mod:{position:"left"},children:y}),(0,n.jsx)(c.Box,{component:"span",mod:{loading:A},...z("label"),children:h}),x&&(0,n.jsx)(c.Box,{component:"span",...z("section"),mod:{position:"right"},children:x})]})]})});y.classes=f.A,y.displayName="@mantine/core/Button",y.Group=g.ButtonGroup,y.GroupSection=h.ButtonGroupSection},41930:(e,t,o)=>{"use strict";o.d(t,{A:()=>n});var n={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"}},48764:(e,t,o)=>{"use strict";o.d(t,{k:()=>i});var n=o(9482),r=o(65453),a=o(54205),s=o(6942);let i=(0,r.v)((e,t)=>({wallet:void 0,initWallet(){let o=localStorage.getItem("jwt"),r=localStorage.getItem("jwtSecret");if(o&&r){let a=n.A.verifyJWT(o,r);a?(n.A.createToken(a),e({wallet:a})):t().exit()}},async updateDot(t){let o=new URL(t).origin;try{let t=(await a.FH.get(o+"/api.dot",{timeout:3e3})).data;a.FH.defaults.baseURL=o,e({dotAPI:o}),localStorage.setItem("dotAPI",o);let n=t.CIDs[0];return o.endsWith(":1976")&&(n=o.slice(0,-5)+":8080"),n&&(e({dotCID:n}),localStorage.setItem("dotCID",n)),e({notes:void 0,files:void 0}),t.APIs}catch(t){s.notifications.show({title:"节点切换失败",message:o,color:"red"}),console.error(t),e({dotAPI:a.FH.defaults.baseURL||""})}return null},setItem:(t,o)=>e(e=>({...e,[t]:o})),firstPath:"",dotAPI:a.MN,dotCID:a.AF,dotNodes:[],notes:void 0,files:void 0,exit(){e({wallet:void 0,notes:void 0,files:void 0}),localStorage.removeItem("jwt"),localStorage.removeItem("jwtSecret"),localStorage.removeItem("token")}}))},49739:(e,t,o)=>{Promise.resolve().then(o.bind(o,99929))},54205:(e,t,o)=>{"use strict";o.d(t,{AF:()=>a,C2:()=>s,FH:()=>i,MN:()=>r});var n=o(23464);let r="https://dot.most.red",a="https://cid.most.red",s="https://most.box/auth/callback",i=n.A.create({baseURL:r});i.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>("ERR_NETWORK"===e.code&&(window.location.href="/dot"),Promise.reject(e)))},62614:(e,t,o)=>{"use strict";o.d(t,{ButtonGroup:()=>p});var n=o(95155),r=o(5903);o(12115);var a=o(68918),s=o(43664),i=o(53791),l=o(69604),c=o(36960),d=o(41930);let u={orientation:"horizontal"},m=(0,a.createVarsResolver)((e,t)=>{let{borderWidth:o}=t;return{group:{"--button-border-width":(0,r.D)(o)}}}),p=(0,c.factory)((e,t)=>{let o=(0,s.useProps)("ButtonGroup",u,e),{className:r,style:a,classNames:c,styles:p,unstyled:g,orientation:h,vars:f,borderWidth:v,variant:w,mod:y,attributes:x,...b}=(0,s.useProps)("ButtonGroup",u,e),S=(0,i.useStyles)({name:"ButtonGroup",props:o,classes:d.A,className:r,style:a,classNames:c,styles:p,unstyled:g,attributes:x,vars:f,varsResolver:m,rootSelector:"group"});return(0,n.jsx)(l.Box,{...S("group"),ref:t,variant:w,mod:[{"data-orientation":h},y],role:"group",...b})});p.classes=d.A,p.displayName="@mantine/core/ButtonGroup"},65453:(e,t,o)=>{"use strict";o.d(t,{v:()=>s});var n=o(12115);let r=e=>{let t,o=new Set,n=(e,n)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=n?n:"object"!=typeof r||null===r)?r:Object.assign({},t,r),o.forEach(o=>o(t,e))}},r=()=>t,a={setState:n,getState:r,getInitialState:()=>s,subscribe:e=>(o.add(e),()=>o.delete(e))},s=t=e(n,r,a);return a},a=e=>{let t=(e=>e?r(e):r)(e),o=e=>(function(e,t=e=>e){let o=n.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return n.useDebugValue(o),o})(t,e);return Object.assign(o,t),o},s=e=>e?a(e):a},66810:()=>{},71281:()=>{},74275:(e,t,o)=>{"use strict";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mantine-";return"".concat(e).concat(Math.random().toString(36).slice(2,11))}o.d(t,{randomId:()=>n})},80096:(e,t,o)=>{"use strict";o.d(t,{ButtonGroupSection:()=>m});var n=o(95155);o(12115);var r=o(56204),a=o(68918),s=o(43664),i=o(53791),l=o(69604),c=o(36960),d=o(41930);let u=(0,a.createVarsResolver)((e,t)=>{let{radius:o,color:n,gradient:a,variant:s,autoContrast:i,size:l}=t,c=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:a,variant:s||"filled",autoContrast:i});return{groupSection:{"--section-height":(0,r.getSize)(l,"section-height"),"--section-padding-x":(0,r.getSize)(l,"section-padding-x"),"--section-fz":(null==l?void 0:l.includes("compact"))?(0,r.getFontSize)(l.replace("compact-","")):(0,r.getFontSize)(l),"--section-radius":void 0===o?void 0:(0,r.getRadius)(o),"--section-bg":n||s?c.background:void 0,"--section-color":c.color,"--section-bd":n||s?c.border:void 0}}}),m=(0,c.factory)((e,t)=>{let o=(0,s.useProps)("ButtonGroupSection",null,e),{className:r,style:a,classNames:c,styles:m,unstyled:p,vars:g,variant:h,gradient:f,radius:v,autoContrast:w,attributes:y,...x}=o,b=(0,i.useStyles)({name:"ButtonGroupSection",props:o,classes:d.A,className:r,style:a,classNames:c,styles:m,unstyled:p,attributes:y,vars:g,varsResolver:u,rootSelector:"groupSection"});return(0,n.jsx)(l.Box,{...b("groupSection"),ref:t,variant:h,...x})});m.classes=d.A,m.displayName="@mantine/core/ButtonGroupSection"},80630:(e,t,o)=>{"use strict";o.d(t,{AppHeader:()=>c});var n=o(95155),r=o(70112),a=o(81001),s=o(58887),i=o(20042),l=o(7248);let c=e=>{let{title:t,right:o}=e,c=(0,l.h)();return(0,n.jsxs)(r.Group,{className:"app-header",children:[(0,n.jsx)(a.ActionIcon,{variant:"transparent",onClick:c,color:"--text-color",children:(0,n.jsx)(i.I,{name:"Back",size:24})}),(0,n.jsx)(s.Text,{lineClamp:2,variant:"gradient",children:t}),o||(0,n.jsx)(a.ActionIcon,{variant:"transparent",color:"--text-color",children:(0,n.jsx)(i.I,{name:"More",size:24})})]})}},99929:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>h});var n=o(95155),r=o(80630),a=o(69604),s=o(26903),i=o(12115),l=o(59117),c=o(39329),d=o(67703),u=o(6874),m=o.n(u),p=o(6942);o(66810);var g=o(48764);function h(){var e;let t=(0,g.k)(e=>e.wallet),[o,u]=(0,i.useState)(null),[h,f]=(0,i.useState)("mega"),v={mega:{rpc:"https://carrot.megaeth.com/rpc",explorer:"https://www.megaexplorer.xyz",faucet:"https://testnet.megaeth.com/#2",name:"Mega ETH"},monad:{rpc:"https://testnet-rpc.monad.xyz",explorer:"https://testnet.monadexplorer.com",faucet:"https://faucet.monad.xyz",name:"Monad"}};(0,i.useEffect)(()=>{let e=e=>{["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&(u(e.key),e.preventDefault())},t=()=>{u(null)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]);let w=e=>{u(e)},y=()=>{u(null)},[x]=(0,i.useState)(new l.FR(v.mega.rpc)),[b]=(0,i.useState)(new l.FR(v.monad.rpc)),[S,j]=(0,i.useState)(null),[A,k]=(0,i.useState)(null),[B,I]=(0,i.useState)(null),[M,D]=(0,i.useState)(null),P=async e=>{try{let t=await x.getTransactionCount(e);I(t),console.log("".concat(v.mega.name," 网络 nonce:"),t);let o=await b.getTransactionCount(e);D(o),console.log("".concat(v.monad.name," 网络 nonce:"),o)}catch(e){console.error("获取 nonce 失败:",e)}};(0,i.useEffect)(()=>{if(t){let e=c.u.fromPhrase(t.mnemonic);j(e.connect(x)),k(e.connect(b)),P(e.address)}},[t]);let N=async()=>{let e="mega"===h?S:A,t="mega"===h?B:M;if(null!==e&&null!==t)try{"mega"===h?I(t+1):D(t+1);let o=await e.sendTransaction({to:e.address,value:d.g5("0"),nonce:t});console.log("交易哈希:",v[h].explorer+"/tx/"+o.hash),p.notifications.show({color:"green",title:"".concat(v[h].name," 交易哈希"),message:o.hash})}catch(e){console.error("交易失败:",e),p.notifications.show({color:"red",title:"交易失败",message:e.message})}};(0,i.useEffect)(()=>{o&&(console.log("按下按键:",o),p.notifications.show({title:"按下按键",message:o}),N())},[o]);let L=()=>"mega"===h?S:A;return(0,n.jsxs)(a.Box,{id:"page-mega",p:20,children:[(0,n.jsx)(r.AppHeader,{title:"".concat(v[h].name," 测试网")}),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.Button.Group,{mt:20,children:[(0,n.jsx)(s.Button,{variant:"mega"===h?"filled":"outline",onClick:()=>f("mega"),children:"Mega ETH"}),(0,n.jsx)(s.Button,{variant:"monad"===h?"filled":"outline",onClick:()=>f("monad"),children:"Monad"})]}),L()&&(0,n.jsxs)("p",{children:[v[h].explorer,"/address/",null==(e=L())?void 0:e.address]}),(0,n.jsx)("p",{children:v[h].rpc}),(0,n.jsx)("p",{children:(0,n.jsxs)(m(),{href:v[h].faucet,target:"_blank",children:[v[h].name," 水龙头"]})}),(0,n.jsxs)("p",{children:["Nonce: ","mega"===h?B:M]}),(0,n.jsx)("div",{className:"keyboard-container",children:(0,n.jsxs)("div",{className:"key-pad",children:[(0,n.jsx)(s.Button,{className:"direction-key up ".concat("ArrowUp"===o?"pressed":""),onMouseDown:()=>w("ArrowUp"),onMouseUp:y,onMouseLeave:y,children:"↑"}),(0,n.jsx)(s.Button,{className:"direction-key left ".concat("ArrowLeft"===o?"pressed":""),onMouseDown:()=>w("ArrowLeft"),onMouseUp:y,onMouseLeave:y,children:"←"}),(0,n.jsx)(s.Button,{className:"direction-key down ".concat("ArrowDown"===o?"pressed":""),onMouseDown:()=>w("ArrowDown"),onMouseUp:y,onMouseLeave:y,children:"↓"}),(0,n.jsx)(s.Button,{className:"direction-key right ".concat("ArrowRight"===o?"pressed":""),onMouseDown:()=>w("ArrowRight"),onMouseUp:y,onMouseLeave:y,children:"→"})]})})]}):(0,n.jsx)(s.Button,{variant:"gradient",component:m(),href:"/login",children:"请先登录"})]})}}},e=>{e.O(0,[1697,8198,2059,3268,2598,8694,3464,6874,8607,3775,42,8441,5881,7358],()=>e(e.s=49739)),_N_E=e.O()}]);