(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4099],{7248:(e,n,t)=>{"use strict";t.d(n,{h:()=>r});var o=t(35695),a=t(48764);let r=()=>{let e=(0,a.k)(e=>e.firstPath),n=(0,a.k)(e=>e.setItem),t=(0,o.useRouter)(),r=(0,o.usePathname)();return()=>{e===r?(n("firstPath","/"),t.replace("/")):t.back()}}},49739:(e,n,t)=>{Promise.resolve().then(t.bind(t,99929))},66810:()=>{},80630:(e,n,t)=>{"use strict";t.d(n,{AppHeader:()=>i});var o=t(95155),a=t(70112),r=t(81001),s=t(58887),c=t(30578),l=t(7248);let i=e=>{let{title:n,right:t}=e,i=(0,l.h)();return(0,o.jsxs)(a.Group,{className:"app-header",children:[(0,o.jsx)(r.ActionIcon,{variant:"transparent",onClick:i,color:"--text-color",children:(0,o.jsx)(c.I,{name:"back",size:24})}),(0,o.jsx)(s.Text,{lineClamp:2,variant:"gradient",children:n}),t||(0,o.jsx)(r.ActionIcon,{variant:"transparent",color:"--text-color",children:(0,o.jsx)(c.I,{name:"more",size:24})})]})}},99929:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>w});var o=t(95155),a=t(80630),r=t(69604),s=t(26903),c=t(12115),l=t(35474),i=t(77635),d=t(62741),u=t(6874),m=t.n(u),p=t(6942);t(66810);var h=t(48764);function w(){var e;let n=(0,h.k)(e=>e.wallet),[t,u]=(0,c.useState)(null),[w,g]=(0,c.useState)("mega"),x={mega:{rpc:"https://carrot.megaeth.com/rpc",explorer:"https://www.megaexplorer.xyz",faucet:"https://testnet.megaeth.com/#2",name:"Mega ETH"},monad:{rpc:"https://testnet-rpc.monad.xyz",explorer:"https://testnet.monadexplorer.com",faucet:"https://faucet.monad.xyz",name:"Monad"}};(0,c.useEffect)(()=>{let e=e=>{["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&(u(e.key),e.preventDefault())},n=()=>{u(null)};return window.addEventListener("keydown",e),window.addEventListener("keyup",n),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",n)}},[]);let f=e=>{u(e)},v=()=>{u(null)},[j]=(0,c.useState)(new l.FR(x.mega.rpc)),[k]=(0,c.useState)(new l.FR(x.monad.rpc)),[y,A]=(0,c.useState)(null),[M,E]=(0,c.useState)(null),[L,N]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),D=async e=>{try{let n=await j.getTransactionCount(e);N(n),console.log("".concat(x.mega.name," 网络 nonce:"),n);let t=await k.getTransactionCount(e);C(t),console.log("".concat(x.monad.name," 网络 nonce:"),t)}catch(e){console.error("获取 nonce 失败:",e)}};(0,c.useEffect)(()=>{if(n){let e=i.u.fromPhrase(n.mnemonic);A(e.connect(j)),E(e.connect(k)),D(e.address)}},[n]);let S=async()=>{let e="mega"===w?y:M,n="mega"===w?L:B;if(null!==e&&null!==n)try{"mega"===w?N(n+1):C(n+1);let t=await e.sendTransaction({to:e.address,value:d.g5("0"),nonce:n});console.log("交易哈希:",x[w].explorer+"/tx/"+t.hash),p.notifications.show({color:"green",title:"".concat(x[w].name," 交易哈希"),message:t.hash})}catch(e){console.error("交易失败:",e),p.notifications.show({color:"red",title:"交易失败",message:e.message})}};(0,c.useEffect)(()=>{t&&(console.log("按下按键:",t),p.notifications.show({title:"按下按键",message:t}),S())},[t]);let b=()=>"mega"===w?y:M;return(0,o.jsxs)(r.Box,{id:"page-mega",children:[(0,o.jsx)(a.AppHeader,{title:"".concat(x[w].name," 测试网")}),n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{marginBottom:"15px"},children:(0,o.jsxs)(s.Button.Group,{children:[(0,o.jsx)(s.Button,{variant:"mega"===w?"filled":"outline",onClick:()=>g("mega"),children:"Mega ETH"}),(0,o.jsx)(s.Button,{variant:"monad"===w?"filled":"outline",onClick:()=>g("monad"),children:"Monad"})]})}),b()&&(0,o.jsxs)("p",{children:[x[w].explorer,"/address/",null==(e=b())?void 0:e.address]}),(0,o.jsx)("p",{children:x[w].rpc}),(0,o.jsx)("p",{children:(0,o.jsxs)(m(),{href:x[w].faucet,target:"_blank",children:[x[w].name," 水龙头"]})}),(0,o.jsxs)("p",{children:["Nonce: ","mega"===w?L:B]}),(0,o.jsx)("div",{className:"keyboard-container",children:(0,o.jsxs)("div",{className:"key-pad",children:[(0,o.jsx)(s.Button,{className:"direction-key up ".concat("ArrowUp"===t?"pressed":""),onMouseDown:()=>f("ArrowUp"),onMouseUp:v,onMouseLeave:v,children:"↑"}),(0,o.jsx)(s.Button,{className:"direction-key left ".concat("ArrowLeft"===t?"pressed":""),onMouseDown:()=>f("ArrowLeft"),onMouseUp:v,onMouseLeave:v,children:"←"}),(0,o.jsx)(s.Button,{className:"direction-key down ".concat("ArrowDown"===t?"pressed":""),onMouseDown:()=>f("ArrowDown"),onMouseUp:v,onMouseLeave:v,children:"↓"}),(0,o.jsx)(s.Button,{className:"direction-key right ".concat("ArrowRight"===t?"pressed":""),onMouseDown:()=>f("ArrowRight"),onMouseUp:v,onMouseLeave:v,children:"→"})]})})]}):(0,o.jsx)(s.Button,{variant:"gradient",component:m(),href:"/login",children:"请先登录"})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[1697,8161,7244,5915,6222,9421,8441,2721,7358],()=>n(49739)),_N_E=e.O()}]);