(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9591],{4673:(e,t,n)=>{"use strict";n.d(t,{BP:()=>x,OM:()=>p,yO:()=>h});var s=n(30167),r=n(71425),i=n(44532),a=n(87788),o=n(56076),l=n(51544),c=n(70358),d=n(26634),m=n.n(d);let x=(e,t,n)=>{let c=(0,s.YW)(t),d=(0,s.YW)("/most.box/"+e),x=(0,r.A)(c,d,3,32,"sha512"),h=(0,i.q5)((0,a.s)(x)),p=h.slice(0,32),u=m().box.keyPair.fromSecretKey(p),g=(0,i.c$)(u.publicKey),j=(0,i.c$)(u.secretKey),f=o.v.entropyToPhrase(h);return{username:e,address:l.QX.fromPhrase(f).address,public_key:g,private_key:j,mnemonic:"I know loss mnemonic will lose my wallet."===n?f:""}},h=(e,t,n)=>{let s=new TextEncoder().encode(e),r=m().randomBytes(m().box.nonceLength),a=m().box(s,r,new Uint8Array((0,i.q5)(t)),new Uint8Array((0,i.q5)(n)));return a?["mp://2",(0,c.W)(r),(0,c.W)(a)].join("."):(console.info("加密失败"),"")},p=(e,t,n)=>{let[s,r,a]=e.split(".");if("mp://2"!==s)return console.info("无效的密文"),"";let o=m().box.open((0,c.y)(a),(0,c.y)(r),new Uint8Array((0,i.q5)(t)),new Uint8Array((0,i.q5)(n)));return o?new TextDecoder().decode(o):(console.info("解密失败"),"")}},7248:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var s=n(35695);let r=()=>{let e=(0,s.useRouter)(),t=(0,s.usePathname)();return()=>{sessionStorage.firstPath===t?(sessionStorage.firstPath="/",e.replace("/")):e.back()}}},9482:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var s=n(70358),r=n(30167),i=n(51544),a=n(19396),o=n(96842),l=n(42995),c=n(3648),d=n(4673),m=n(59909),x=n(30832),h=n.n(x),p=n(99758),u=n.n(p);n(38464);var g=n(76920),j=n.n(g);h().extend(j()),h().extend(u()),h().locale("zh-cn");let f=e=>{let t=String(Date.now()),n=(0,s.W)(crypto.getRandomValues(new Uint8Array(32))),r=sessionStorage.getItem("fingerprint")||"",i=[location.origin,r].join("/"),a=[t,n].join("."),{public_key:o,private_key:l}=(0,d.BP)(i,a);return{jwt:(0,d.yO)(JSON.stringify(e),o,l),jwtSecret:a}},y=(e,t)=>{let[n]=t.split(".");if(Date.now()-Number(n)>288e5)return console.log("jwt 已过期"),null;try{let n=sessionStorage.getItem("fingerprint")||"",s=[location.origin,n].join("/"),{public_key:r,private_key:i}=(0,d.BP)(s,t),a=(0,d.OM)(e,r,i);if(a)return JSON.parse(a)}catch(e){console.log("验证失败:",e)}return null},b=async e=>{let t=Date.now().toString(),n=i.QX.fromPhrase(e.mnemonic),s=await n.signMessage(t);localStorage.token=[e.address,t,s].join(".")},w={avatar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,o.gn)(l,{seed:"most.box@"+e,flip:!0,backgroundType:["gradientLinear"]}).toDataUri()},avatarCID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,o.gn)(c,{seed:"most.box#"+e,flip:!0,backgroundType:["gradientLinear","solid"]}).toDataUri()},formatTime:e=>{let t;if(!e)return"";let n=h()(Number(e)),s=n.hour();return t=s>=0&&s<3?"凌晨":s>=3&&s<6?"拂晓":s>=6&&s<9?"早晨":s>=9&&s<12?"上午":s>=12&&s<15?"下午":s>=15&&s<18?"傍晚":s>=18&&s<21?"薄暮":"深夜",n.format("YYYY年M月D日 ".concat(t,"h点m分"))},formatDate:e=>{let t=h()(Number(e)),n=h()();return t.isSame(n,"day")?t.format("HH:mm"):t.isSame(n.subtract(1,"day"),"day")?"昨天 ".concat(t.format("HH:mm")):t.isoWeek()===n.isoWeek()?"".concat(["周日","周一","周二","周三","周四","周五","周六"][t.day()]," ").concat(t.format("HH:mm")):t.year()===n.year()?t.format("M月D日"):t.format("YY年M月D日")},formatAddress:e=>e?e.slice(0,6)+"..."+e.slice(-4):"",enBase64:e=>(0,s.W)((0,r.YW)(e)),deBase64:e=>(0,r._v)((0,s.y)(e)),createJWT:f,verifyJWT:y,login:(e,t)=>{try{var n;let s=(0,d.BP)(e,t,"I know loss mnemonic will lose my wallet."),{jwt:r,jwtSecret:i}=f(s);if((null==(n=y(r,i))?void 0:n.address)===s.address)return localStorage.setItem("jwt",r),localStorage.setItem("jwtSecret",i),b(s),s}catch(e){console.log("登录失败:",e)}return null},ZeroAddress:a.j,createToken:b,pinyin:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(t.length<n)return!1;if(e.toLowerCase().includes(t.toLowerCase()))return!0;let s=(0,m.YW)(e,t,{continuous:!0});return!!s&&!!(s.length>=n)}}},27142:()=>{},29115:(e,t,n)=>{Promise.resolve().then(n.bind(n,67045))},67045:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var s=n(95155),r=n(80630),i=n(69604),a=n(91590),o=n(97287),l=n(35049),c=n(93751),d=n(58887),m=n(74634),x=n(26903),h=n(70058),p=n(70112),u=n(15763),g=n(27361),j=n(81001),f=n(89047),y=n(18403),b=n(26029),w=n(53776),T=n(21220),A=n(12115),v=n(89902),z=n(11681),k=n(6942),D=n(12257),C=n(96482),P=n(54395),S=n(41698),I=n(54476),O=n(89586),B=n(30699),_=n(50828),G=n(2737),M=n(9482);n(27142);let N=[{inputs:[],name:"getAllDots",outputs:[{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"string[]",name:"names",type:"string[]"},{internalType:"uint256[]",name:"timestamps",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"dot",type:"address"}],name:"getDot",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string[]",name:"APIs",type:"string[]"},{internalType:"string[]",name:"CIDs",type:"string[]"},{internalType:"uint256",name:"update",type:"uint256"}],stateMutability:"view",type:"function"}];function Y(){let[e,t]=(0,A.useState)([]),[n,Y]=(0,A.useState)(!0),[W,H]=(0,A.useState)(!1),[L,U]=(0,A.useState)(null),[E,R]=(0,A.useState)("testnet"),q={mainnet:{rpc:"https://mainnet.base.org",name:"Base 主网",color:"blue",explorer:"https://basescan.org"},testnet:{rpc:"https://sepolia.base.org",name:"Base 测试网",color:"orange",explorer:"https://sepolia.basescan.org"}},F=q[E].rpc,K=q[E].explorer,J=async()=>{try{Y(!0),U(null);let e=new v.FR(F),n=new z.NZ("0xdc82cef1a8416210afb87caeec908a4df843f016",N,e),[s,r,i]=await n.getAllDots(),a=s.map(async(e,t)=>{let[s,a,o,l]=await n.getDot(e);return{address:e,name:s||r[t]||"节点 ".concat(t+1),APIs:a||[],CIDs:o||[],lastUpdate:Number(l||i[t])}}),o=await Promise.all(a);t(o)}catch(e){console.error("获取节点列表失败:",e),U("获取节点列表失败，请检查网络连接"),k.notifications.show({title:"获取失败",message:"无法获取节点列表",color:"red"})}finally{Y(!1)}},Q=e=>new Promise(t=>{if(!e.APIs||0===e.APIs.length)return{isOnline:!1,responseTime:0};let n=e.APIs[0],s=Date.now(),r=new AbortController,i=setTimeout(()=>r.abort(),3e3);fetch("".concat(n,"/ipv6"),{method:"GET",signal:r.signal,mode:"cors"}).then(()=>{clearTimeout(i),t({isOnline:!0,responseTime:Date.now()-s})}).catch(e=>{clearTimeout(i);let n=Date.now()-s,r=e.message.toLowerCase(),a=e.name.toLowerCase();r.includes("cors")||r.includes("mixed content")||r.includes("blocked")||"typeerror"===a&&r.includes("failed to fetch")?t({isOnline:!0,responseTime:n}):(r.includes("network")||r.includes("timeout")||r.includes("connection")||"aborterror"===a||console.warn("未知错误类型: ".concat(a," - ").concat(r)),t({isOnline:!1,responseTime:n}))})}),X=async()=>{H(!0);try{let n=await Promise.all(e.map(async e=>{let{isOnline:t,responseTime:n}=await Q(e);return{...e,isOnline:t,responseTime:n}}));t(n);let s=n.filter(e=>e.isOnline).length;k.notifications.show({title:"连通性检测完成",message:"".concat(s,"/").concat(n.length," 个节点在线"),color:s>0?"green":"orange"})}catch(e){console.log("连通性检测失败:",e),k.notifications.show({title:"检测失败",message:"连通性检测过程中出现错误",color:"red"})}finally{H(!1)}},Z=e=>e?new Date(1e3*e).toLocaleString("zh-CN"):"未知",$=e=>void 0===e?"":"".concat(e,"ms"),V=e=>{var t;return null==(t=e.APIs.find(e=>e.endsWith(":1976")))?void 0:t.replace(":1976",":8080/ipfs")};if((0,A.useEffect)(()=>{J()},[E]),n)return(0,s.jsxs)(i.Box,{id:"page-dot-list",children:[(0,s.jsx)(r.AppHeader,{title:"节点列表"}),(0,s.jsx)(a.Container,{size:"lg",py:"xl",children:(0,s.jsxs)(o.Paper,{p:"xl",radius:"md",style:{textAlign:"center"},children:[(0,s.jsx)(l.ThemeIcon,{size:60,radius:"xl",variant:"light",color:"blue",mb:"md",children:(0,s.jsx)(C.A,{size:30})}),(0,s.jsx)(c.Title,{order:3,c:"dimmed",children:"正在加载节点列表..."}),(0,s.jsx)(d.Text,{size:"sm",c:"dimmed",mt:"xs",children:"请稍候，正在从区块链获取数据"})]})})]});if(L)return(0,s.jsxs)(i.Box,{id:"page-dot-list",children:[(0,s.jsx)(r.AppHeader,{title:"节点列表"}),(0,s.jsx)(a.Container,{size:"lg",py:"xl",children:(0,s.jsxs)(o.Paper,{shadow:"sm",p:"xl",radius:"md",children:[(0,s.jsx)(m.Alert,{color:"red",title:"加载失败",icon:(0,s.jsx)(P.A,{size:16}),children:L}),(0,s.jsx)(x.Button,{mt:"md",onClick:J,leftSection:(0,s.jsx)(S.A,{size:16}),variant:"light",color:"red",children:"重新加载"})]})})]});let ee=e.filter(e=>e.isOnline),et=e.filter(e=>!1===e.isOnline);return(0,s.jsxs)(i.Box,{id:"page-dot-list",children:[(0,s.jsx)(r.AppHeader,{title:"节点列表"}),(0,s.jsxs)(a.Container,{size:"lg",py:"md",children:[(0,s.jsx)(o.Paper,{shadow:"sm",p:"lg",radius:"md",mb:"lg",children:(0,s.jsxs)(h.Flex,{justify:"space-between",align:"center",wrap:"wrap",gap:"md",children:[(0,s.jsxs)(p.Group,{children:[(0,s.jsx)(l.ThemeIcon,{size:40,radius:"md",variant:"light",color:"blue",children:(0,s.jsx)(C.A,{size:20})}),(0,s.jsxs)(i.Box,{children:[(0,s.jsx)(c.Title,{order:2,children:"节点监控"}),(0,s.jsxs)(d.Text,{size:"sm",c:"dimmed",children:["共 ",e.length," 个节点",e.some(e=>void 0!==e.isOnline)&&(0,s.jsxs)(s.Fragment,{children:[" ","• ",ee.length," 在线 • ",et.length," 离线"]})]})]})]}),(0,s.jsxs)(p.Group,{children:[(0,s.jsx)(u.Select,{value:E,onChange:e=>{e&&("mainnet"===e||"testnet"===e)&&(R(e),k.notifications.show({title:"网络已切换",message:"已切换到 ".concat(q[e].name),color:q[e].color,icon:(0,s.jsx)(D.A,{size:16})}))},data:[{value:"testnet",label:"\uD83E\uDDEA Base 测试网"},{value:"mainnet",label:"\uD83C\uDF10 Base 主网"}],leftSection:(0,s.jsx)(D.A,{size:16}),variant:"filled",radius:"md",w:180}),(0,s.jsx)(g.Tooltip,{label:"刷新节点列表",children:(0,s.jsx)(j.ActionIcon,{size:"lg",variant:"light",color:"blue",onClick:J,loading:n,children:(0,s.jsx)(S.A,{size:18})})}),(0,s.jsx)(x.Button,{leftSection:(0,s.jsx)(I.A,{size:16}),onClick:X,loading:W,disabled:0===e.length,variant:"gradient",gradient:{from:"blue",to:"cyan"},children:"检测连通性"})]})]})}),(0,s.jsx)(m.Alert,{mb:"lg",color:q[E].color,variant:"light",icon:(0,s.jsx)(D.A,{size:16}),title:"当前网络: ".concat(q[E].name),children:(0,s.jsxs)(d.Text,{size:"sm",children:["RPC 端点:",(0,s.jsx)(d.Text,{component:"span",ff:"monospace",c:"dimmed",children:q[E].rpc})]})}),0===e.length?(0,s.jsxs)(o.Paper,{shadow:"sm",p:"xl",radius:"md",style:{textAlign:"center"},children:[(0,s.jsx)(l.ThemeIcon,{size:60,radius:"xl",variant:"light",color:"gray",mb:"md",children:(0,s.jsx)(C.A,{size:30})}),(0,s.jsx)(c.Title,{order:3,c:"dimmed",mb:"xs",children:"暂无节点"}),(0,s.jsx)(d.Text,{size:"sm",c:"dimmed",children:"当前网络没有注册的节点"})]}):(0,s.jsx)(f.Grid,{children:e.map(e=>(0,s.jsx)(f.Grid.Col,{span:{base:12,md:6,lg:4},children:(0,s.jsxs)(y.Card,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,h:"100%",style:{transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=""},children:[(0,s.jsxs)(p.Group,{justify:"space-between",mb:"md",children:[(0,s.jsxs)(p.Group,{children:[(0,s.jsx)(l.ThemeIcon,{size:36,radius:"md",variant:"light",color:e.isOnline?"green":!1===e.isOnline?"red":"gray",children:e.isOnline?(0,s.jsx)(I.A,{size:18}):!1===e.isOnline?(0,s.jsx)(O.A,{size:18}):(0,s.jsx)(C.A,{size:18})}),(0,s.jsxs)(i.Box,{children:[(0,s.jsx)(d.Text,{fw:600,size:"md",lineClamp:1,children:e.name}),(0,s.jsx)(d.Text,{size:"xs",c:"dimmed",children:"节点地址"})]})]}),void 0!==e.isOnline&&(0,s.jsxs)(b.Badge,{color:e.isOnline?"green":"red",variant:"light",leftSection:e.isOnline?(0,s.jsx)(B.A,{size:12}):(0,s.jsx)(P.A,{size:12}),children:[e.isOnline?"在线":"离线",void 0!==e.responseTime&&" (".concat($(e.responseTime),")")]})]}),(0,s.jsx)(w.Divider,{mb:"md"}),(0,s.jsxs)(T.Stack,{gap:"sm",children:[(0,s.jsxs)(p.Group,{gap:"xs",wrap:"nowrap",children:[(0,s.jsx)(_.A,{size:14,color:"gray",style:{flexShrink:0}}),(0,s.jsx)(d.Text,{size:"xs",c:"dimmed",children:M.A.formatAddress(e.address)})]}),(0,s.jsxs)(p.Group,{gap:"xs",children:[(0,s.jsx)(G.A,{size:14,color:"gray"}),(0,s.jsx)(d.Text,{size:"xs",c:"dimmed",children:Z(e.lastUpdate)})]}),e.APIs.length>0&&(0,s.jsx)(T.Stack,{gap:2,children:e.APIs.map((e,t)=>(0,s.jsx)(d.Text,{c:"blue",component:"a",href:e,target:"_blank",style:{textDecoration:"none"},lineClamp:1,children:e},t))}),(0,s.jsxs)(i.Box,{children:[(0,s.jsx)(d.Text,{size:"xs",fw:500,mb:4,c:"gray",children:"CID 浏览器"}),(0,s.jsxs)(p.Group,{gap:2,children:[e.CIDs.map((e,t)=>(0,s.jsx)(d.Text,{c:"blue",component:"a",href:e+"/ipfs",target:"_blank",style:{textDecoration:"none"},lineClamp:1,children:e+"/ipfs"},t)),V(e)&&(0,s.jsx)(d.Text,{c:"blue",component:"a",href:V(e),target:"_blank",style:{textDecoration:"none"},lineClamp:1,children:V(e)})]})]})]})]})},e.address))}),(0,s.jsxs)(p.Group,{gap:"xs",mt:"lg",justify:"center",children:[(0,s.jsx)(d.Text,{size:"sm",c:"blue",component:"a",href:"https://docs.base.org/chain/connecting-to-base",target:"_blank",style:{textDecoration:"none"},children:"官方 RPC"}),(0,s.jsx)(d.Text,{size:"sm",c:"blue",component:"a",href:"https://chainlist.org/chain/8453",target:"_blank",style:{textDecoration:"none"},children:"主网 RPC"}),(0,s.jsx)(d.Text,{size:"sm",c:"blue",component:"a",href:"https://chainlist.org/chain/84532",target:"_blank",style:{textDecoration:"none"},children:"测试网 RPC"}),(0,s.jsx)(d.Text,{size:"sm",c:"blue",component:"a",href:"https://docs.base.org/chain/network-faucets",target:"_blank",style:{textDecoration:"none"},children:"水龙头列表"}),(0,s.jsx)(d.Text,{size:"sm",c:"blue",component:"a",href:"https://portal.cdp.coinbase.com/products/faucet?projectId=0b869244-5000-43dd-8aba-c9feee07f6ab",target:"_blank",style:{textDecoration:"none"},children:"注册领水"}),(0,s.jsx)(d.Text,{size:"sm",c:"blue",component:"a",href:K+"/address/0xdc82cef1a8416210afb87caeec908a4df843f016",target:"_blank",style:{textDecoration:"none"},children:"合约地址"})]})]})]})}},71281:()=>{},80630:(e,t,n)=>{"use strict";n.d(t,{AppHeader:()=>c});var s=n(95155),r=n(70112),i=n(81001),a=n(58887),o=n(69159),l=n(7248);let c=e=>{let{title:t,right:n}=e,c=(0,l.h)();return(0,s.jsxs)(r.Group,{className:"app-header",children:[(0,s.jsx)(i.ActionIcon,{variant:"transparent",onClick:c,color:"--text-color",children:(0,s.jsx)(o.I,{name:"back",size:24})}),(0,s.jsx)(a.Text,{lineClamp:2,variant:"gradient",children:t}),n||(0,s.jsx)(i.ActionIcon,{variant:"transparent",color:"--text-color",children:(0,s.jsx)(o.I,{name:"more",size:24})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5417,8198,2545,2059,3819,5232,279,1938,70,8925,5776,9902,3745,9159,8441,2721,7358],()=>t(29115)),_N_E=e.O()}]);