(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6566],{13297:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var s=n(97443),a=n(25959),r=n(21794),i=n(59126);let o=(0,a.v)((e,t)=>({wallet:void 0,initWallet(n){e({fingerprint:n});let a=localStorage.getItem("jwt");if(a)try{let t=s.A.verifyJWT(a);t&&(s.A.createToken(t),e({wallet:t}))}catch(e){i.notifications.show({message:"登录过期",color:"red"}),console.warn("登录过期",e),t().exit()}},async updateDot(t){try{let n=new URL(t).origin,s=(await r.FH.get("/api.dot",{baseURL:n})).data;r.FH.defaults.baseURL=n,e({dotAPI:n}),localStorage.setItem("dotAPI",n);let a=s.CIDs[0];return n.endsWith(":1976")&&(a=n.slice(0,-5)+":8080"),a&&(e({dotCID:a}),localStorage.setItem("dotCID",a)),e({notes:void 0,files:void 0}),s.APIs}catch(t){i.notifications.show({message:"节点不可用",color:"red"}),console.info(t),e({dotAPI:r.FH.defaults.baseURL||""})}return null},setItem:(t,n)=>e(e=>({...e,[t]:n})),firstPath:"",dotAPI:"",dotCID:"",dotNodes:[],notes:void 0,notesQuery:"",nodeDark:"",files:void 0,filesPath:"",fingerprint:"",exit(){e({wallet:void 0,notes:void 0,files:void 0}),console.log("\uD83C\uDF0A",localStorage),localStorage.removeItem("jwt"),localStorage.removeItem("token")}}))},20003:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X});var s=n(95155),a=n(12115),r=n(90101),i=n(13877),o=n(67623),l=n(2369),c=n(70305),d=n(74264),p=n(67661),u=n(77147),m=n(60688),h=n(96778),g=n(73524),x=n(78094),y=n(63498),f=n(9457),b=n(58380),j=n(82726),w=n(41970),T=n(44634),v=n(17998),A=n(71165),k=n(81216),I=n(41524),S=n(59126),C=n(69424),z=n(30928),D=n(86233),P=n(58255),M=n(20921),B=n(1371),N=n(69367),O=n(77252),W=n(2186),_=n(7080),Y=n(47522),E=n(44191),U=n(45600),L=n(83392),H=n(97443),G=n(49188),R=n(52619),F=n.n(R),q=n(13297),J=n(53987);function X(){let e=(0,q.k)(e=>e.setItem),t=(0,q.k)(e=>e.dotAPI),n=(0,q.k)(e=>e.dotNodes),R=(0,q.k)(e=>e.updateDot),[X,K]=(0,a.useState)(!1),[Q,Z]=(0,a.useState)([]),[$,V]=(0,a.useState)(""),[ee,et]=(0,a.useState)(!0),[en,es]=(0,a.useState)(!1),[ea,er]=(0,a.useState)(null),[ei,eo]=(0,a.useState)(null),[el,ec]=(0,a.useState)("mainnet"),ed=J.WC[el].rpc,[ep,eu]=(0,a.useState)(ed),em=J.WC[el].explorer,[eh,eg]=(0,a.useState)("bafkreihp5o7tdipf6ajkgkdxknnffkuxpeecwqydi4q5iqt4gko6r2agk4?filename=长征.jpg"),[ex,ey]=(0,a.useState)(!1),[ef,eb]=(0,a.useState)({}),ej=n.filter(e=>e.isOnline),ew=n.filter(e=>!1===e.isOnline),eT=(0,a.useMemo)(()=>{try{return new URL(t).host.toUpperCase()}catch(e){return"DOT.MOST.BOX"}},[t]),ev=e=>{var t;let n=e.CIDs.map(e=>"".concat(e,"/ipfs")),s=null==(t=e.APIs.find(e=>e.endsWith(":1976")))?void 0:t.replace(":1976",":8080/ipfs");return s&&n.push(s),[...new Set(n)]},eA=e=>e.APIs.some(e=>{try{return new URL(e).origin===new URL(t).origin}catch(e){return!1}}),ek=(e,t,n)=>{S.notifications.show({title:e,message:t,color:n})},eI=async e=>{let t=Date.now(),n=new AbortController,s=setTimeout(()=>n.abort(),2e3);try{let a=await fetch(e,{headers:{Range:"bytes=0-1023"},signal:n.signal}),r=Date.now()-t;if(clearTimeout(s),a.ok||206===a.status)return{status:"success",responseTime:r};return{status:"error",responseTime:r}}catch(e){if(clearTimeout(s),"AbortError"===e.name)return{status:"timeout"};return{status:"error"}}},eS=async()=>{if(!(e=>{if(!(e=e.trim().split("?")[0]))return ek("CID不能为空","请输入一个CID进行检测","orange"),!1;try{return G.TO.parse(e),!0}catch(e){return ek("无效的 CID","输入的值不是有效的 CID","red"),!1}})(eh))return;ey(!0);let e=(()=>{let e=[];return n.forEach(t=>{ev(t).filter(e=>!!e).forEach(t=>{e.push("".concat(t,"/").concat(eh))})}),[...new Set(e)]})(),t={};e.forEach(e=>{t[e]={status:"pending"}}),eb(t);let s=e.map(async e=>{let t=await eI(e);eb(n=>({...n,[e]:t}))});await Promise.all(s),ey(!1)},eC=async t=>{try{var n;et(!0),er(null);let s=new k.FR(t||ep||ed),a=await s.getNetwork();if(!((n=Number(a.chainId))===J.WC.mainnet.chainId?(ec("mainnet"),!0):n===J.WC.testnet.chainId?(ec("testnet"),!0):(ek("网络错误","网络 ID 为 ".concat(n,"，不支持 Base 协议"),"red"),eu(""),!1)))return;let r=new I.NZ(J.MT,J.Wf,s),[i,o,l,c,d]=await r.getAllDots(),p=i.map((e,t)=>({address:e,name:o[t]||"节点 ".concat(t+1),APIs:l[t]||[],CIDs:c[t]||[],lastUpdate:Number(d[t])}));localStorage.setItem("dotNodes",JSON.stringify(p)),p&&e("dotNodes",p)}catch(e){console.info("获取节点列表失败:",e),er("获取节点列表失败，请更换 RPC"),ek("获取失败","无法获取节点列表","red")}finally{et(!1)}},ez=async()=>{es(!0);try{let t=await Promise.all(n.map(async e=>{let{isOnline:t,responseTime:n}=await new Promise(t=>{if(!e.APIs||0===e.APIs.length)return void t({isOnline:!1,responseTime:0});let n=e.APIs[0],s=Date.now(),a=new AbortController,r=setTimeout(()=>a.abort(),2e3);fetch("".concat(n,"/api.dot"),{signal:a.signal,mode:"cors"}).then(()=>{clearTimeout(r),t({isOnline:!0,responseTime:Date.now()-s})}).catch(()=>{clearTimeout(r),t({isOnline:!1,responseTime:Date.now()-s})})});return{...e,isOnline:t,responseTime:n}}));e("dotNodes",t);let s=t.filter(e=>e.isOnline).length;ek("连通性检测完成","".concat(s,"/").concat(t.length," 个节点在线"),s>0?"green":"orange")}catch(e){console.log("连通性检测失败:",e),ek("检测失败","连通性检测过程中出现错误","red")}finally{es(!1)}},eD=async()=>{K(!0);let e=await R($);e&&(Z(e),ek("节点切换成功",e[0],"green")),K(!1)},eP=async e=>{eo(e.address);try{let t=e.APIs[0],n=await R(t);n&&(Z(n),ek("节点切换成功","已切换到 ".concat(e.name),"green"))}catch(e){console.error(e),ek("切换失败","无法连接到该节点","red")}finally{eo(null)}};return(0,a.useEffect)(()=>{if(n.length>0)return void et(!1);let t=localStorage.getItem("dotNodes");if(t)try{e("dotNodes",JSON.parse(t)),et(!1);return}catch(e){}eC()},[]),(0,s.jsxs)(i.Container,{size:"lg",w:"100%",style:{wordBreak:"break-all"},children:[(0,s.jsx)(r.AppHeader,{title:"请选择节点"}),(0,s.jsx)(o.Box,{mb:"lg",children:(0,s.jsxs)(l.Stack,{align:"center",children:[(0,s.jsx)(c.Text,{mt:"md",children:"当前节点"}),(0,s.jsx)(d.Title,{children:eT}),(0,s.jsxs)(p.Group,{gap:0,children:[(0,s.jsx)(z.A,{}),(0,s.jsx)(u.Anchor,{c:"dimmed",component:F(),href:"https://github.com/most-people/most.box",target:"_blank",children:"「轻松简单、开源免费、部署自己的节点」"})]}),Q.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Text,{children:"已成功接入"}),(0,s.jsx)(l.Stack,{justify:"center",children:Q.map((e,t)=>(0,s.jsx)(u.Anchor,{onClick:()=>H.A.openDot(e),lineClamp:1,children:e},t))})]}):(0,s.jsx)(u.Anchor,{component:F(),href:t,target:"_blank",children:t}),(0,s.jsxs)(p.Group,{mt:"lg",w:"100%",justify:"space-between",children:[(0,s.jsx)(m.TextInput,{flex:1,leftSection:(0,s.jsx)(D.A,{}),value:$,onChange:e=>V(e.currentTarget.value),placeholder:"私有节点地址"}),(0,s.jsx)(h.Button,{leftSection:(0,s.jsx)(P.A,{size:16}),onClick:eD,loading:X,children:"私有节点"})]})]})}),(0,s.jsx)(o.Box,{mb:"lg",children:(0,s.jsxs)(g.Flex,{justify:"space-between",align:"center",wrap:"wrap",gap:"md",children:[(0,s.jsxs)(p.Group,{children:[(0,s.jsx)(x.ThemeIcon,{size:40,radius:"md",variant:"light",color:"blue",children:(0,s.jsx)(M.A,{size:20})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(d.Title,{order:2,children:"节点列表"}),(0,s.jsxs)(c.Text,{size:"sm",c:"dimmed",children:["共 ",n.length," 个节点",n.some(e=>void 0!==e.isOnline)&&(0,s.jsxs)(s.Fragment,{children:[" ","• ",ej.length," 在线 • ",ew.length," 离线"]})]})]})]}),(0,s.jsxs)(p.Group,{children:[(0,s.jsx)(y.Select,{value:el,onChange:e=>{if(e&&("mainnet"===e||"testnet"===e)){let t=J.WC[e].rpc;eu(t),ec(e),eC(t),S.notifications.show({title:"网络已切换",message:"已切换到 ".concat(J.WC[e].name),color:J.WC[e].color,icon:(0,s.jsx)(C.A,{size:16})})}},data:[{value:"testnet",label:"\uD83E\uDDEA Base 测试网"},{value:"mainnet",label:"\uD83C\uDF10 Base 主网"}],leftSection:(0,s.jsx)(C.A,{size:16}),variant:"filled",radius:"md",w:180}),(0,s.jsx)(f.Tooltip,{label:"刷新节点列表",children:(0,s.jsx)(b.ActionIcon,{size:"lg",variant:"light",color:"blue",onClick:()=>eC(),loading:ee,children:(0,s.jsx)(B.A,{size:18})})}),(0,s.jsx)(h.Button,{leftSection:(0,s.jsx)(N.A,{size:16}),onClick:ez,loading:en,disabled:0===n.length,variant:"gradient",gradient:{from:"blue",to:"cyan"},children:"检测连通性"})]})]})}),(0,s.jsxs)(p.Group,{align:"flex-end",mb:"lg",children:[(0,s.jsx)(m.TextInput,{style:{flex:1},placeholder:"输入要查询的 CID...",value:eh,onChange:e=>eg(e.currentTarget.value)}),(0,s.jsxs)(h.Button,{onClick:eS,loading:ex,disabled:!eh,children:[(0,s.jsx)(O.A,{size:16}),(0,s.jsx)(c.Text,{ml:"xs",children:"CID"})]})]}),ee?(0,s.jsxs)(j.Paper,{p:"xl",radius:"md",style:{textAlign:"center"},children:[(0,s.jsx)(x.ThemeIcon,{size:60,radius:"xl",variant:"light",color:"blue",mb:"md",children:(0,s.jsx)(M.A,{size:30})}),(0,s.jsx)(d.Title,{order:3,c:"dimmed",children:"正在加载节点列表..."}),(0,s.jsx)(c.Text,{size:"sm",c:"dimmed",mt:"xs",children:"请稍候，正在从区块链获取数据"})]}):ea?(0,s.jsxs)(j.Paper,{shadow:"sm",p:"xl",radius:"md",children:[(0,s.jsx)(w.Alert,{color:"red",title:"加载失败",icon:(0,s.jsx)(W.A,{size:16}),children:ea}),(0,s.jsx)(p.Group,{mt:"md",children:(0,s.jsx)(h.Button,{size:"sm",color:"orange",variant:"light",onClick:()=>{eu((0,J.Pt)()),eC()},children:"重新尝试"})})]}):0===n.length?(0,s.jsxs)(j.Paper,{shadow:"sm",p:"xl",radius:"md",style:{textAlign:"center"},children:[(0,s.jsx)(x.ThemeIcon,{size:60,radius:"xl",variant:"light",color:"gray",mb:"md",children:(0,s.jsx)(M.A,{size:30})}),(0,s.jsx)(d.Title,{order:3,c:"dimmed",mb:"xs",children:"暂无节点"}),(0,s.jsx)(c.Text,{size:"sm",c:"dimmed",children:"当前网络没有注册的节点"})]}):(0,s.jsx)(g.Flex,{wrap:"wrap",gap:"md",children:n.map((e,t)=>{var n;let a;return(0,s.jsxs)(T.Card,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,maw:"100%",w:358,style:{transition:"transform 0.2s ease, box-shadow 0.2s ease",border:eA(e)?"2px solid #228be6":void 0},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=""},children:[(0,s.jsxs)(p.Group,{justify:"space-between",mb:"md",children:[(0,s.jsxs)(p.Group,{children:[(0,s.jsx)(x.ThemeIcon,{size:36,radius:"md",variant:"light",color:e.isOnline?"green":!1===e.isOnline?"red":"gray",children:e.isOnline?(0,s.jsx)(N.A,{size:18}):!1===e.isOnline?(0,s.jsx)(_.A,{size:18}):(0,s.jsx)(M.A,{size:18})}),(0,s.jsxs)(o.Box,{children:[(0,s.jsxs)(p.Group,{gap:"xs",children:[(0,s.jsx)(c.Text,{fw:600,size:"md",lineClamp:1,children:e.name}),eA(e)&&(0,s.jsx)(v.Badge,{size:"xs",color:"blue",variant:"filled",children:"当前"})]}),(0,s.jsxs)(c.Text,{size:"xs",c:"dimmed",children:["节点地址 ",el.slice(0,1).toUpperCase(),t+1]})]})]}),void 0!==e.isOnline&&(0,s.jsxs)(v.Badge,{color:e.isOnline?"green":"red",variant:"light",leftSection:e.isOnline?(0,s.jsx)(Y.A,{size:12}):(0,s.jsx)(W.A,{size:12}),children:[e.isOnline?"在线":"离线",void 0!==e.responseTime&&" (".concat(void 0===(a=e.responseTime)?"":"".concat(a,"ms"),")")]})]}),(0,s.jsx)(A.Divider,{mb:"md"}),(0,s.jsxs)(l.Stack,{justify:"space-between",flex:1,children:[(0,s.jsxs)(l.Stack,{gap:"sm",children:[(0,s.jsxs)(p.Group,{gap:"xs",wrap:"nowrap",children:[(0,s.jsx)(E.A,{size:14,color:"gray",style:{flexShrink:0}}),(0,s.jsxs)(c.Text,{size:"xs",c:"dimmed",children:[H.A.formatAddress(e.address)," ",(0,s.jsx)(u.Anchor,{component:F(),href:{pathname:"/dot/deploy",query:{address:e.address,api:e.APIs[0]}},c:"dimmed",children:"Deploy"})]})]}),(0,s.jsxs)(p.Group,{gap:"xs",children:[(0,s.jsx)(U.A,{size:14,color:"gray"}),(0,s.jsx)(c.Text,{size:"xs",c:"dimmed",children:(n=e.lastUpdate)?new Date(1e3*n).toLocaleString("zh-CN"):"未知"})]}),e.APIs.length>0&&(0,s.jsx)(l.Stack,{gap:2,align:"flex-start",children:e.APIs.map((e,t)=>(0,s.jsx)(u.Anchor,{c:"blue",onClick:()=>H.A.openDot(e),lineClamp:1,children:e},t))}),(0,s.jsxs)(o.Box,{children:[(0,s.jsx)(c.Text,{size:"xs",fw:500,mb:4,c:"gray",children:"IPFS 网关"}),(0,s.jsx)(l.Stack,{gap:"xs",align:"flex-start",children:ev(e).map((e,t)=>{let n=eh?"".concat(e,"/").concat(eh):e,a=ef[n];return(0,s.jsxs)(l.Stack,{gap:"xs",children:[(0,s.jsx)(u.Anchor,{component:F(),c:"blue",href:n,target:"_blank",lineClamp:1,children:n}),(0,s.jsxs)(v.Badge,{flex:1,size:"sm",color:(null==a?void 0:a.status)==="success"?"green":"gray",variant:"light",children:[(null==a?void 0:a.status)||"CID",(null==a?void 0:a.responseTime)!=null&&" (".concat(null==a?void 0:a.responseTime,"ms)")]})]},t)})})]})]}),(0,s.jsx)(p.Group,{children:(0,s.jsx)(h.Button,{flex:1,variant:eA(e)?"filled":"light",color:eA(e)?"green":"blue",leftSection:(0,s.jsx)(L.A,{size:16}),onClick:()=>eP(e),loading:ei===e.address,disabled:!!(!e.APIs.length||"https:"===location.protocol&&e.APIs[0].startsWith("http:"))||eA(e),children:eA(e)?"当前节点":"切换节点"})})]})]},e.address)})}),(0,s.jsxs)(p.Group,{mt:"lg",gap:"xs",justify:"space-between",children:[(0,s.jsx)(h.Button,{size:"sm",color:"yellow",variant:"light",onClick:()=>eu((0,J.Pt)()),children:"更换 RPC"}),(0,s.jsx)(m.TextInput,{size:"sm",flex:1,leftSection:(0,s.jsx)(M.A,{size:16}),value:ep,onChange:e=>eu(e.currentTarget.value),placeholder:"自定义 RPC"}),(0,s.jsx)(f.Tooltip,{label:"刷新节点列表",children:(0,s.jsx)(b.ActionIcon,{size:"lg",variant:"light",color:"blue",onClick:()=>eC(),loading:ee,children:(0,s.jsx)(B.A,{size:18})})})]}),(0,s.jsxs)(p.Group,{gap:"xs",mt:"lg",justify:"center",children:[(0,s.jsx)(u.Anchor,{size:"sm",c:"blue",component:F(),href:"https://docs.base.org/chain/connecting-to-base",target:"_blank",children:"官方 RPC"}),(0,s.jsx)(u.Anchor,{size:"sm",c:"blue",component:F(),href:"https://chainlist.org/chain/8453",target:"_blank",children:"主网 RPC"}),(0,s.jsx)(u.Anchor,{size:"sm",c:"blue",component:F(),href:"https://docs.base.org/chain/network-faucets",target:"_blank",children:"水龙头列表"}),(0,s.jsx)(u.Anchor,{size:"sm",c:"blue",component:F(),href:"https://portal.cdp.coinbase.com/products/faucet?projectId=0b869244-5000-43dd-8aba-c9feee07f6ab",target:"_blank",children:"注册领水"}),(0,s.jsxs)(u.Anchor,{size:"sm",c:"blue",component:F(),href:em+"/address/"+J.MT,target:"_blank",children:["节点合约 ",H.A.formatAddress(J.MT)]})]})]})}},21794:(e,t,n)=>{"use strict";n.d(t,{C2:()=>a,FH:()=>r});var s=n(95125);let a="https://most.box/auth/callback",r=s.A.create({baseURL:""});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>Promise.reject(e))},53987:(e,t,n)=>{"use strict";n.d(t,{Wf:()=>c,yc:()=>d,MT:()=>r,i5:()=>i,WC:()=>l,Pt:()=>o});let s=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"string","name":"oldData","type":"string"},{"indexed":false,"internalType":"string","name":"newData","type":"string"}],"name":"DataSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"string","name":"oldName","type":"string"},{"indexed":false,"internalType":"string","name":"newName","type":"string"}],"name":"NameSet","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"Data","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_NAME_LENGTH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NAME_LENGTH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deleteData","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"deleteName","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getData","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"getOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"nameOwners","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"names","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_data","type":"string"}],"name":"setData","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_newName","type":"string"}],"name":"setName","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),a=["https://base.llamarpc.com","https://mainnet.base.org","https://developer-access-mainnet.base.org","https://base-mainnet.diamondswap.org/rpc","https://base.public.blockpi.network/v1/rpc/public","https://1rpc.io/base","https://base-pokt.nodies.app","https://base.meowrpc.com","https://base-mainnet.public.blastapi.io","https://base.gateway.tenderly.co","https://gateway.tenderly.co/public/base","https://rpc.notadegen.com/base","https://base-rpc.publicnode.com","https://base.drpc.org","https://base.api.onfinality.io/public","https://public.stackup.sh/api/v1/node/base-mainnet","https://base-mainnet.gateway.tatum.io","https://base.rpc.subquery.network/public","https://api.zan.top/base-mainnet","https://endpoints.omniatech.io/v1/base/mainnet/public","https://base.lava.build","https://rpc.numa.network/base","https://node.histori.xyz/base-mainnet/8ry9f6t9dct1se2hlagxnd9n2a","https://0xrpc.io/base","https://rpc.owlracle.info/base/70d38ce1826c4a60bb2a8e05a6c8b20f","https://base.therpc.io"],r="0xB67662F0d2BB106B055503062e1dba4f072f5781",i="0x15b28F5a471215221f4f28Fe9E2B7ac576278b81",o=()=>a[Math.floor(Math.random()*a.length)],l={mainnet:{chainId:8453,rpc:"https://mainnet.base.org",name:"Base 主网",color:"blue",explorer:"https://basescan.org"},testnet:{chainId:84532,rpc:"https://sepolia.base.org",name:"Base 测试网",color:"orange",explorer:"https://sepolia.basescan.org"}},c=[{inputs:[],name:"getAllDots",outputs:[{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"string[]",name:"names",type:"string[]"},{internalType:"string[][]",name:"APIss",type:"string[][]"},{internalType:"string[][]",name:"CIDss",type:"string[][]"},{internalType:"uint256[]",name:"updates",type:"uint256[]"}],stateMutability:"view",type:"function"}],d=s},56612:(e,t,n)=>{"use strict";n.d(t,{BP:()=>u,OM:()=>h,yO:()=>m});var s=n(68110),a=n(330),r=n(16405),i=n(42779),o=n(10179),l=n(38798),c=n(43591),d=n(28555),p=n.n(d);let u=(e,t,n)=>{let c=(0,s.YW)(t),d=(0,s.YW)("/most.box/"+e),u=(0,a.A)(c,d,3,32,"sha512"),m=(0,r.q5)((0,i.s)(u)),h=m.slice(0,32),g=p().box.keyPair.fromSecretKey(h),x=(0,r.c$)(g.publicKey),y=(0,r.c$)(g.secretKey),f=o.v.entropyToPhrase(m);return{username:e,address:l.QX.fromPhrase(f).address,public_key:x,private_key:y,mnemonic:"I know loss mnemonic will lose my wallet."===n?f:""}},m=(e,t,n)=>{let s=new TextEncoder().encode(e),a=p().randomBytes(p().box.nonceLength),i=p().box(s,a,new Uint8Array((0,r.q5)(t)),new Uint8Array((0,r.q5)(n)));return i?["mp://2",(0,c.W)(a),(0,c.W)(i)].join("."):(console.info("加密失败"),"")},h=(e,t,n)=>{let[s,a,i]=e.split(".");if("mp://2"!==s)return console.info("无效协议"),"";let o=p().box.open((0,c.y)(i),(0,c.y)(a),new Uint8Array((0,r.q5)(t)),new Uint8Array((0,r.q5)(n)));return o?new TextDecoder().decode(o):(console.info("无法解密"),"")}},71281:()=>{},76889:(e,t,n)=>{Promise.resolve().then(n.bind(n,20003))},97443:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var s=n(43591),a=n(68110),r=n(38798),i=n(82127),o=n(34477),l=n(55544),c=n(85179),d=n(56612),p=n(86710),u=n(36117),m=n.n(u),h=n(44839),g=n.n(h);n(28223);var x=n(78595),y=n.n(x);m().extend(y()),m().extend(g()),m().locale("zh-cn");let f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMM",n=m()().isoWeek(),s=m()().format(t)+n,a=sessionStorage.getItem("fingerprint");if(!a)throw Error("请先获取设备指纹");let r=[location.origin,a].join("/"),{public_key:i,private_key:o}=(0,d.BP)(s,r);return(0,d.yO)(JSON.stringify(e),i,o)},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMM",n=m()().isoWeek(),s=m()().format(t)+n,a=sessionStorage.getItem("fingerprint");if(!a)throw Error("请先获取设备指纹");let r=[location.origin,a].join("/"),{public_key:i,private_key:o}=(0,d.BP)(s,r),l=(0,d.OM)(e,i,o);if(!l)throw Error("jwt 解析失败");let c=JSON.parse(l);if(!c.address)throw Error("jwt json 解析失败");return c},j=async e=>{let t=Date.now().toString(),n=r.QX.fromPhrase(e.mnemonic),s=await n.signMessage(t);localStorage.token=[e.address,t,s].join(".")},w=e=>{try{var t;let n=f(e);if((null==(t=b(n))?void 0:t.address)===e.address)return localStorage.setItem("jwt",n),j(e),e}catch(e){console.log("登录失败:",e)}return null},T={avatar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,o.gn)(l,{seed:"most.box@"+e,flip:!0,backgroundType:["gradientLinear"]}).toDataUri()},avatarCID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,o.gn)(c,{seed:"most.box#"+e,flip:!0,backgroundType:["gradientLinear","solid"]}).toDataUri()},formatTime:e=>{let t;if(!e)return"";let n=m()(Number(e)),s=n.hour();return t=s>=0&&s<3?"凌晨":s>=3&&s<6?"拂晓":s>=6&&s<9?"早晨":s>=9&&s<12?"上午":s>=12&&s<15?"下午":s>=15&&s<18?"傍晚":s>=18&&s<21?"薄暮":"深夜",n.format("YYYY年M月D日 ".concat(t,"h点m分"))},formatDate:e=>{let t=m()(Number(e)),n=m()();if(t.isSame(n,"minute"))return t.format("HH:mm:ss");if(t.isSame(n,"day"))return t.format("HH:mm");if(t.isSame(n.subtract(1,"day"),"day"))return"昨天 ".concat(t.format("HH:mm"));if(t.isoWeek()===n.isoWeek())return"".concat(["周日","周一","周二","周三","周四","周五","周六"][t.day()]," ").concat(t.format("HH:mm"));if(t.year()===n.year())return t.format("M月D日");else return t.format("YY年M月D日")},formatAddress:e=>e?e.slice(0,6)+"..."+e.slice(-4):"",enBase64:e=>(0,s.W)((0,a.YW)(e)),deBase64:e=>(0,a._v)((0,s.y)(e)),createJWT:f,verifyJWT:b,login:(e,t)=>w((0,d.BP)(e,t,"I know loss mnemonic will lose my wallet.")),loginSave:w,ZeroAddress:i.j,createToken:j,pinyin:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(t.length<n)return!1;if(e.toLowerCase().includes(t.toLowerCase()))return!0;let s=(0,p.YW)(e,t,{continuous:!0});return!!s&&!!(s.length>=n)},openDot:e=>{let t=new URL("/auth/jwt/",e),n=localStorage.getItem("jwt");if(n){let e=T.verifyJWT(n);if(e){let n=m()().format("YY/M/D HH:mm"),{public_key:s,private_key:a}=(0,d.BP)("auth/jwt",n),r=(0,d.yO)(JSON.stringify(e),s,a);t.searchParams.set("token",r)}}window.open(t.href)}},v=T}},e=>{e.O(0,[8198,2545,2829,5619,6714,8555,8990,5125,9287,9318,3252,9457,4988,8835,547,983,4997,101,8441,1255,7358],()=>e(e.s=76889)),_N_E=e.O()}]);