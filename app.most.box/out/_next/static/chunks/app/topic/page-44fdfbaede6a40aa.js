(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4794],{56373:(e,s,t)=>{Promise.resolve().then(t.bind(t,92516))},92516:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>B});var n=t(95155),a=t(11681),l=t(65703),r=t(21220),i=t(69604),c=t(58887),o=t(90557),d=t(39926),u=t(54853),x=t(70112),h=t(66121),j=t(25345),p=t(26903),m=t(59741),g=t(70058),b=t(12115),S=t(9482),f=t(4673),w=t(80630),k=t(35695);t(10516);var v=t(72652),A=t(81603),C=t(16701),T=t(33139),z=t(7248);let y=e=>{let{onUpdate:s}=e,t=(0,k.useRouter)(),[l,{toggle:m}]=(0,a.useDisclosure)(!1),[g,w]=(0,b.useState)(""),[v,A]=(0,b.useState)(""),[C,T]=(0,b.useState)(!1);return(0,n.jsxs)(r.Stack,{gap:"md",className:"add-box",children:[(0,n.jsxs)(i.Box,{className:"header",children:[(0,n.jsx)(c.Text,{size:"xl",fw:500}),(0,n.jsx)(o.Space,{h:"sx"}),(0,n.jsx)(d.Avatar,{size:"xl",radius:"md",src:S.A.topic((0,f.BP)(g,"most.box#"+v).address),alt:"topic"})]}),(0,n.jsxs)(r.Stack,{gap:"md",children:[(0,n.jsx)(u.Input,{autoFocus:!0,placeholder:"话题名称",value:g,onChange:e=>w(e.currentTarget.value)}),(0,n.jsx)(x.Group,{justify:"flex-end",children:(0,n.jsx)(h.Switch,{label:"加密",size:"md",labelPosition:"left",checked:C,onChange:e=>{T(e.currentTarget.checked),A("")}})}),(0,n.jsx)(j.PasswordInput,{placeholder:"话题密码",visible:l,onVisibilityChange:m,value:v,disabled:!C,onChange:e=>A(e.currentTarget.value)}),(0,n.jsx)(p.Button,{onClick:()=>{let e="#"+S.A.topicJoin(g,v);t.replace("/topic"+e),s(e)},disabled:!g,children:"加入话题"})]})]})};function B(){let[e]=(0,l.useHash)(),s=(0,z.h)(),[t,a]=(0,b.useState)(null),r=e=>{try{let[s,t]=S.A.topicSplit(e),n=(0,f.BP)(s,"most.box#"+t,"I know loss mnemonic will lose my wallet.");a(n)}catch(e){console.log("hash 解析错误",e)}},[o,u]=(0,b.useState)(!1),[h,j]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{u(!0),e&&r(e)},[e]),(0,n.jsxs)(i.Box,{id:"page-chat",children:[(0,n.jsx)(w.AppHeader,{title:t?"".concat(t.username,"#").concat(t.address.slice(-4)):"话题",right:(0,n.jsxs)(m.Menu,{shadow:"md",position:"bottom-end",withArrow:!0,arrowPosition:"center",disabled:!t,children:[(0,n.jsx)(m.Menu.Target,{children:(0,n.jsx)(d.Avatar,{style:{cursor:"pointer"},src:t?S.A.topic(t.address):"/icons/pwa-512x512.png"})}),(0,n.jsxs)(m.Menu.Dropdown,{children:[(0,n.jsx)(m.Menu.Item,{leftSection:(0,n.jsx)(A.A,{size:24}),onClick:()=>j(!h),children:(0,n.jsxs)(c.Text,{children:[h?"隐藏":"显示","成员"]})}),(0,n.jsx)(m.Menu.Item,{leftSection:(0,n.jsx)(C.A,{size:24}),onClick:()=>{},children:(0,n.jsx)(c.Text,{children:"清空我的消息"})}),(0,n.jsx)(m.Menu.Item,{leftSection:(0,n.jsx)(T.A,{size:24}),onClick:()=>{t&&s()},children:(0,n.jsx)(c.Text,{children:"退出话题"})})]})]})}),h&&(0,n.jsx)(x.Group,{justify:"center",pb:10,pt:10,children:[].map(e=>(0,n.jsxs)(g.Flex,{direction:"column",align:"center",gap:2,children:[(0,n.jsx)(d.Avatar,{src:S.A.avatar(e.address)}),(0,n.jsx)(c.Text,{size:"sm",children:e.username})]},e.address))}),t&&(0,n.jsx)(v.B,{onSend:()=>{},messages:[],onDelete:()=>{}}),o&&!t&&(0,n.jsx)(y,{onUpdate:r})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2119,2545,9729,9816,5232,1281,5111,5604,266,7989,2682,6874,6618,4460,578,2764,8441,2721,7358],()=>s(56373)),_N_E=e.O()}]);