(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4345],{13297:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var a=n(97443),r=n(25959),s=n(21794),i=n(59126);let o=(0,r.v)((e,t)=>({wallet:void 0,initWallet(n){e({fingerprint:n});let r=localStorage.getItem("jwt");if(r)try{let t=a.A.verifyJWT(r);t&&(a.A.createToken(t),e({wallet:t}))}catch(e){i.notifications.show({message:"登录过期",color:"red"}),console.warn("登录过期",e),t().exit()}},async updateDot(t){try{let n=new URL(t).origin,a=(await s.FH.get("/api.dot",{baseURL:n})).data;s.FH.defaults.baseURL=n,e({dotAPI:n}),localStorage.setItem("dotAPI",n);let r=a.CIDs[0];return n.endsWith(":1976")&&(r=n.slice(0,-5)+":8080"),r&&(e({dotCID:r}),localStorage.setItem("dotCID",r)),e({notes:void 0,files:void 0}),a.APIs}catch(t){i.notifications.show({message:"节点不可用",color:"red"}),console.info(t),e({dotAPI:s.FH.defaults.baseURL||""})}return null},setItem:(t,n)=>e(e=>({...e,[t]:n})),firstPath:"",dotAPI:"",dotCID:"",dotNodes:[],notes:void 0,notesQuery:"",nodeDark:"",files:void 0,filesPath:"",fingerprint:"",exit(){e({wallet:void 0,notes:void 0,files:void 0}),console.log("\uD83C\uDF0A",localStorage),localStorage.removeItem("jwt"),localStorage.removeItem("token")}}))},21794:(e,t,n)=>{"use strict";n.d(t,{C2:()=>r,FH:()=>s});var a=n(95125);let r="https://most.box/auth/callback",s=a.A.create({baseURL:""});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>Promise.reject(e))},45248:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>U});var a=n(95155),r=n(25107),s=n(2369),i=n(70305),o=n(96778),l=n(13877),c=n(63090),p=n(15239),d=n(20063),u=n(12115),m=n(90101),h=n(12834),y=n(41970),g=n(67661),f=n(74264),b=n(60688),w=n(93852),x=n(9457),j=n(58380),v=n(73524),T=n(82726),k=n(52619),A=n.n(k),D=n(13297),M=n(67812),I=n(26195),P=n(29722);let S=()=>{let e=(0,d.usePathname)(),t=(0,d.useSearchParams)(),n=t.get("type")||"file",r=e.split("/")[2]||"",l=t.get("filename")||"",[c,p]=(0,u.useState)(l),k=(0,D.k)(e=>e.dotCID),S=(0,D.k)(e=>e.dotAPI),C=(0,u.useMemo)(()=>{if(S&&r){let e=new URL(location.origin);e.pathname="/ipfs/".concat(r),c&&(e.searchParams.set("filename",c),e.searchParams.set("type",n));try{e.hash=new URL(S).host}catch(e){}return e.href}return""},[S,r,c]),B=(0,u.useMemo)(()=>{if(k&&r){let e=new URL(k);return e.pathname="/ipfs/".concat(r),c&&e.searchParams.set("filename",c),e.href}return""},[k,r,c]),N=(0,u.useMemo)(()=>{if(k&&r){let e=new URL(k);return e.pathname="/ipfs/".concat(r),e.searchParams.set("download","true"),c&&("dir"===n||"note"===n?(e.searchParams.set("format","tar"),e.searchParams.set("filename","".concat(c,".tar"))):e.searchParams.set("filename",c)),e.href}return""},[k,r,c,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.AppHeader,{title:c||r||"CID"}),(0,a.jsxs)(s.Stack,{gap:"lg",children:[!r&&(0,a.jsx)(y.Alert,{icon:(0,a.jsx)(M.A,{size:18}),color:"orange",radius:"md",children:"未提供 CID，请通过带有 cid 的链接访问本页。"}),(0,a.jsxs)(g.Group,{justify:"space-between",align:"center",children:[(0,a.jsxs)(g.Group,{gap:8,children:["dir"===n?"\uD83D\uDCC1":"\uD83D\uDCC4",(0,a.jsxs)(f.Title,{order:4,children:["dir"===n?"文件夹":"文件","信息"]})]}),l&&(0,a.jsx)(i.Text,{size:"sm",c:"dimmed",children:l})]}),(0,a.jsxs)(s.Stack,{children:[(0,a.jsx)(b.TextInput,{radius:"md",label:"CID",placeholder:"请输入 CID",value:r,readOnly:!0,variant:"filled"}),(0,a.jsx)(b.TextInput,{radius:"md",label:"dir"===n?"文件夹":"文件名",placeholder:"dir"===n?"文件夹":"文件名",value:c,onChange:e=>p(e.currentTarget.value)})]}),(0,a.jsx)(g.Group,{justify:"space-between",children:(0,a.jsxs)(g.Group,{gap:8,children:["\uD83D\uDCD6",(0,a.jsx)(f.Title,{order:4,children:"查看 / 下载"})]})}),!k&&(0,a.jsx)(y.Alert,{color:"gray",radius:"md",mb:"sm",children:"未连接到 Dot 节点，下载链接将不可用。"}),(0,a.jsx)(b.TextInput,{radius:"md",value:B||"",readOnly:!0,variant:"filled",disabled:!B,placeholder:"无可用链接",rightSection:(0,a.jsx)(w.CopyButton,{value:B||"",children:e=>{let{copied:t,copy:n}=e;return(0,a.jsx)(x.Tooltip,{label:t?"已复制":"复制链接",position:"top",children:(0,a.jsx)(j.ActionIcon,{variant:"subtle",color:t?"teal":"gray",onClick:n,disabled:!B,children:(0,a.jsx)(I.A,{size:16})})})}})}),(0,a.jsxs)(g.Group,{wrap:"nowrap",children:[(0,a.jsx)(o.Button,{color:"green",variant:"light",w:"100%",component:A(),target:"_blank",href:B,children:"查看"}),c?(0,a.jsx)(o.Button,{variant:"light",color:"blue",w:"100%",component:A(),target:"_blank",href:N,children:"下载"}):(0,a.jsx)(o.Button,{variant:"light",color:"blue",w:"100%",disabled:!0,children:"下载"})]}),"note"===n&&(0,a.jsx)(o.Button,{variant:"light",w:"100%",component:A(),href:"/note/?cid=".concat(r,"&name=").concat(c),target:"_blank",children:"打开笔记"}),(0,a.jsx)(g.Group,{justify:"space-between",children:(0,a.jsxs)(g.Group,{gap:8,children:["\uD83D\uDCE4",(0,a.jsx)(f.Title,{order:4,children:"分享本页"})]})}),!S&&(0,a.jsx)(y.Alert,{color:"gray",radius:"md",mb:"sm",children:"未设置 Dot API，分享链接将不可用。"}),(0,a.jsx)(b.TextInput,{radius:"md",value:C||"",readOnly:!0,variant:"filled",disabled:!C,placeholder:"无可用链接",rightSection:(0,a.jsx)(w.CopyButton,{value:C||"",children:e=>{let{copied:t,copy:n}=e;return(0,a.jsx)(x.Tooltip,{label:t?"已复制":"复制链接",position:"top",children:(0,a.jsx)(j.ActionIcon,{variant:"subtle",color:t?"teal":"gray",onClick:n,disabled:!C,children:(0,a.jsx)(I.A,{size:16})})})}})}),C&&(0,a.jsx)(v.Flex,{justify:"center",children:(0,a.jsx)(T.Paper,{radius:"md",p:12,withBorder:!0,style:{backgroundColor:"white"},children:(0,a.jsxs)(s.Stack,{gap:9,children:[(0,a.jsxs)(g.Group,{justify:"center",gap:6,children:[(0,a.jsx)(P.A,{size:18}),(0,a.jsx)(i.Text,{size:"sm",c:"dimmed",children:"扫码分享"}),(0,a.jsx)(P.A,{size:18})]}),(0,a.jsx)(h.h,{value:C,size:200,bgColor:"white",fgColor:"#333",level:"M"})]})})})]})]})};function C(){return(0,a.jsx)(u.Suspense,{children:(0,a.jsx)(S,{})})}var B=n(53987),N=n(77147),W=n(81216),_=n(41524),L=n(54827),Y=n(97443);function H(){let e=(0,d.usePathname)(),t=e.split("/")[1].slice(1),n=B.WC.mainnet.rpc,r=B.WC.mainnet.explorer,o=(0,u.useMemo)(()=>new W.FR(n),[n]),l=(0,u.useMemo)(()=>new _.NZ(B.i5,B.yc,o),[o]),[c,p]=(0,u.useState)(""),[h,y]=(0,u.useState)(""),f=async e=>{try{let t=await l.getOwner(e);p(t),b(t)}catch(e){console.warn("获取地址失败",e)}},b=async e=>{try{let t=await l.getName(e);w(t)}catch(e){console.warn("获取用户名失败",e)}},w=t=>{y(t);let n=e.split("/");n[1]="@"+t;let a=new URL(window.location.href);a.pathname=n.join("/"),window.history.replaceState(null,"",a.href)};return(0,u.useEffect)(()=>{(0,L.PW)(t)?(p(t),b(t)):(f(t),y(t))},[l,t]),(0,a.jsxs)(s.Stack,{children:[(0,a.jsx)(m.AppHeader,{title:h||Y.A.formatAddress(c)}),(0,a.jsxs)(i.Text,{children:["用户名：",h]}),(0,a.jsxs)(i.Text,{children:["地址：",c]}),(0,a.jsx)(g.Group,{children:(0,a.jsxs)(N.Anchor,{c:"blue",component:A(),href:r+"/address/"+B.i5,target:"_blank",children:["合约地址：",Y.A.formatAddress(B.i5)]})})]})}let O=()=>{let e=(0,r.h)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.default,{src:"/img/404.svg",alt:"404",width:300,height:225}),(0,a.jsxs)(s.Stack,{gap:"md",align:"center",children:[(0,a.jsx)(i.Text,{c:"dimmed",children:"抱歉，你要找的页面不见了"}),(0,a.jsx)(o.Button,{onClick:e,w:"100%",children:"返回"})]})]})};function U(){let e=(0,d.usePathname)(),[t,n]=(0,u.useState)("");return(0,u.useEffect)(()=>{e.startsWith("/ipfs/")?n("ipfs"):e.startsWith("/@")?e.slice(2,-1)&&n("website"):n("404")},[e]),(0,a.jsx)(l.Container,{w:"100%",p:"md",children:""===t?(0,a.jsx)(s.Stack,{align:"center",children:(0,a.jsx)(c.Loader,{color:"black",size:"lg",type:"bars"})}):"website"===t?(0,a.jsx)(H,{}):"ipfs"===t?(0,a.jsx)(C,{}):(0,a.jsx)(O,{})})}},53987:(e,t,n)=>{"use strict";n.d(t,{Wf:()=>c,yc:()=>p,MT:()=>s,i5:()=>i,WC:()=>l,Pt:()=>o});let a=JSON.parse('[{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"Data","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_DATA_LENGTH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_NAME_LENGTH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NAME_LENGTH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deleteData","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"deleteName","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getData","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"getOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"name":"nameOwners","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"names","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_data","type":"string"}],"name":"setData","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_newName","type":"string"}],"name":"setName","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),r=["https://base.llamarpc.com","https://mainnet.base.org","https://developer-access-mainnet.base.org","https://base-mainnet.diamondswap.org/rpc","https://base.public.blockpi.network/v1/rpc/public","https://1rpc.io/base","https://base-pokt.nodies.app","https://base.meowrpc.com","https://base-mainnet.public.blastapi.io","https://base.gateway.tenderly.co","https://gateway.tenderly.co/public/base","https://rpc.notadegen.com/base","https://base-rpc.publicnode.com","https://base.drpc.org","https://base.api.onfinality.io/public","https://public.stackup.sh/api/v1/node/base-mainnet","https://base-mainnet.gateway.tatum.io","https://base.rpc.subquery.network/public","https://api.zan.top/base-mainnet","https://endpoints.omniatech.io/v1/base/mainnet/public","https://base.lava.build","https://rpc.numa.network/base","https://node.histori.xyz/base-mainnet/8ry9f6t9dct1se2hlagxnd9n2a","https://0xrpc.io/base","https://rpc.owlracle.info/base/70d38ce1826c4a60bb2a8e05a6c8b20f","https://base.therpc.io"],s="0xB67662F0d2BB106B055503062e1dba4f072f5781",i="0x1bcB1bD1c669e154c1d69D7c7C2Ab5D19C9109DB",o=()=>r[Math.floor(Math.random()*r.length)],l={mainnet:{chainId:8453,rpc:"https://mainnet.base.org",name:"Base 主网",color:"blue",explorer:"https://basescan.org"},testnet:{chainId:84532,rpc:"https://sepolia.base.org",name:"Base 测试网",color:"orange",explorer:"https://sepolia.basescan.org"}},c=[{inputs:[],name:"getAllDots",outputs:[{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"string[]",name:"names",type:"string[]"},{internalType:"string[][]",name:"APIss",type:"string[][]"},{internalType:"string[][]",name:"CIDss",type:"string[][]"},{internalType:"uint256[]",name:"updates",type:"uint256[]"}],stateMutability:"view",type:"function"}],p=a},56612:(e,t,n)=>{"use strict";n.d(t,{BP:()=>u,OM:()=>h,yO:()=>m});var a=n(68110),r=n(330),s=n(16405),i=n(42779),o=n(10179),l=n(38798),c=n(43591),p=n(28555),d=n.n(p);let u=(e,t,n)=>{let c=(0,a.YW)(t),p=(0,a.YW)("/most.box/"+e),u=(0,r.A)(c,p,3,32,"sha512"),m=(0,s.q5)((0,i.s)(u)),h=m.slice(0,32),y=d().box.keyPair.fromSecretKey(h),g=(0,s.c$)(y.publicKey),f=(0,s.c$)(y.secretKey),b=o.v.entropyToPhrase(m);return{username:e,address:l.QX.fromPhrase(b).address,public_key:g,private_key:f,mnemonic:"I know loss mnemonic will lose my wallet."===n?b:""}},m=(e,t,n)=>{let a=new TextEncoder().encode(e),r=d().randomBytes(d().box.nonceLength),i=d().box(a,r,new Uint8Array((0,s.q5)(t)),new Uint8Array((0,s.q5)(n)));return i?["mp://2",(0,c.W)(r),(0,c.W)(i)].join("."):(console.info("加密失败"),"")},h=(e,t,n)=>{let[a,r,i]=e.split(".");if("mp://2"!==a)return console.info("无效协议"),"";let o=d().box.open((0,c.y)(i),(0,c.y)(r),new Uint8Array((0,s.q5)(t)),new Uint8Array((0,s.q5)(n)));return o?new TextDecoder().decode(o):(console.info("无法解密"),"")}},71281:()=>{},92861:(e,t,n)=>{Promise.resolve().then(n.bind(n,45248))},97443:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var a=n(43591),r=n(68110),s=n(38798),i=n(82127),o=n(34477),l=n(55544),c=n(85179),p=n(56612),d=n(86710),u=n(36117),m=n.n(u),h=n(44839),y=n.n(h);n(28223);var g=n(78595),f=n.n(g);m().extend(f()),m().extend(y()),m().locale("zh-cn");let b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMM",n=m()().isoWeek(),a=m()().format(t)+n,r=sessionStorage.getItem("fingerprint");if(!r)throw Error("请先获取设备指纹");let s=[location.origin,r].join("/"),{public_key:i,private_key:o}=(0,p.BP)(a,s);return(0,p.yO)(JSON.stringify(e),i,o)},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMM",n=m()().isoWeek(),a=m()().format(t)+n,r=sessionStorage.getItem("fingerprint");if(!r)throw Error("请先获取设备指纹");let s=[location.origin,r].join("/"),{public_key:i,private_key:o}=(0,p.BP)(a,s),l=(0,p.OM)(e,i,o);if(!l)throw Error("jwt 解析失败");let c=JSON.parse(l);if(!c.address)throw Error("jwt json 解析失败");return c},x=async e=>{let t=Date.now().toString(),n=s.QX.fromPhrase(e.mnemonic),a=await n.signMessage(t);localStorage.token=[e.address,t,a].join(".")},j=e=>{try{var t;let n=b(e);if((null==(t=w(n))?void 0:t.address)===e.address)return localStorage.setItem("jwt",n),x(e),e}catch(e){console.log("登录失败:",e)}return null},v={avatar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,o.gn)(l,{seed:"most.box@"+e,flip:!0,backgroundType:["gradientLinear"]}).toDataUri()},avatarCID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,o.gn)(c,{seed:"most.box#"+e,flip:!0,backgroundType:["gradientLinear","solid"]}).toDataUri()},formatTime:e=>{let t;if(!e)return"";let n=m()(Number(e)),a=n.hour();return t=a>=0&&a<3?"凌晨":a>=3&&a<6?"拂晓":a>=6&&a<9?"早晨":a>=9&&a<12?"上午":a>=12&&a<15?"下午":a>=15&&a<18?"傍晚":a>=18&&a<21?"薄暮":"深夜",n.format("YYYY年M月D日 ".concat(t,"h点m分"))},formatDate:e=>{let t=m()(Number(e)),n=m()();if(t.isSame(n,"minute"))return t.format("HH:mm:ss");if(t.isSame(n,"day"))return t.format("HH:mm");if(t.isSame(n.subtract(1,"day"),"day"))return"昨天 ".concat(t.format("HH:mm"));if(t.isoWeek()===n.isoWeek())return"".concat(["周日","周一","周二","周三","周四","周五","周六"][t.day()]," ").concat(t.format("HH:mm"));if(t.year()===n.year())return t.format("M月D日");else return t.format("YY年M月D日")},formatAddress:e=>e?e.slice(0,6)+"..."+e.slice(-4):"",enBase64:e=>(0,a.W)((0,r.YW)(e)),deBase64:e=>(0,r._v)((0,a.y)(e)),createJWT:b,verifyJWT:w,login:(e,t)=>j((0,p.BP)(e,t,"I know loss mnemonic will lose my wallet.")),loginSave:j,ZeroAddress:i.j,createToken:x,pinyin:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(t.length<n)return!1;if(e.toLowerCase().includes(t.toLowerCase()))return!0;let a=(0,d.YW)(e,t,{continuous:!0});return!!a&&!!(a.length>=n)},openDot:e=>{let t=new URL("/auth/jwt/",e),n=localStorage.getItem("jwt");if(n){let e=v.verifyJWT(n);if(e){let n=m()().format("YY/M/D HH:mm"),{public_key:a,private_key:r}=(0,p.BP)("auth/jwt",n),s=(0,p.yO)(JSON.stringify(e),a,r);t.searchParams.set("token",s)}}window.open(t.href)}},T=v}},e=>{e.O(0,[8198,2545,2829,5619,6714,8555,8990,5125,9287,9318,3252,9457,529,2834,6898,101,8441,1255,7358],()=>e(e.s=92861)),_N_E=e.O()}]);