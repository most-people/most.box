(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{13297:(e,r,o)=>{"use strict";o.d(r,{k:()=>l});var n=o(97443),s=o(25959),i=o(21794),t=o(59126);let l=(0,s.v)((e,r)=>({wallet:void 0,initWallet(o){e({fingerprint:o});let s=localStorage.getItem("jwt");if(s)try{let r=n.A.verifyJWT(s);r&&(n.A.createToken(r),e({wallet:r}))}catch(e){t.notifications.show({message:"登录过期",color:"red"}),console.warn("登录过期",e),r().exit()}},async updateDot(r){try{let o=new URL(r).origin,n=(await i.FH.get("/api.dot",{baseURL:o})).data;i.FH.defaults.baseURL=o,e({dotAPI:o}),localStorage.setItem("dotAPI",o);let s=n.CIDs[0];return o.endsWith(":1976")&&(s=o.slice(0,-5)+":8080"),s&&(e({dotCID:s}),localStorage.setItem("dotCID",s)),e({notes:void 0,files:void 0}),n.APIs}catch(r){console.info(r),e({dotAPI:i.FH.defaults.baseURL||""})}return null},setItem:(r,o)=>e(e=>({...e,[r]:o})),firstPath:"",dotAPI:"",dotCID:"",dotNodes:[],notes:void 0,notesQuery:"",nodeDark:"",files:void 0,filesPath:"",fingerprint:"",exit(){e({wallet:void 0,notes:void 0,files:void 0}),localStorage.removeItem("jwt"),localStorage.removeItem("token")}}))},16228:()=>{},21794:(e,r,o)=>{"use strict";o.d(r,{C2:()=>s,FH:()=>i});var n=o(95125);let s="https://most.box/auth/callback",i=n.A.create({baseURL:""});i.interceptors.request.use(e=>{let r=localStorage.getItem("token");return r&&(e.headers.Authorization=r),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>Promise.reject(e))},43606:()=>{},48492:(e,r,o)=>{Promise.resolve().then(o.bind(o,33380)),Promise.resolve().then(o.bind(o,44947)),Promise.resolve().then(o.bind(o,45247)),Promise.resolve().then(o.bind(o,44503)),Promise.resolve().then(o.bind(o,44629)),Promise.resolve().then(o.bind(o,58380)),Promise.resolve().then(o.bind(o,17764)),Promise.resolve().then(o.bind(o,23924)),Promise.resolve().then(o.bind(o,23188)),Promise.resolve().then(o.bind(o,41970)),Promise.resolve().then(o.bind(o,77147)),Promise.resolve().then(o.bind(o,22756)),Promise.resolve().then(o.bind(o,75802)),Promise.resolve().then(o.bind(o,47424)),Promise.resolve().then(o.bind(o,82422)),Promise.resolve().then(o.bind(o,57486)),Promise.resolve().then(o.bind(o,44190)),Promise.resolve().then(o.bind(o,32608)),Promise.resolve().then(o.bind(o,28316)),Promise.resolve().then(o.bind(o,11592)),Promise.resolve().then(o.bind(o,8358)),Promise.resolve().then(o.bind(o,5480)),Promise.resolve().then(o.bind(o,55302)),Promise.resolve().then(o.bind(o,99825)),Promise.resolve().then(o.bind(o,17998)),Promise.resolve().then(o.bind(o,72110)),Promise.resolve().then(o.bind(o,64153)),Promise.resolve().then(o.bind(o,49111)),Promise.resolve().then(o.bind(o,96778)),Promise.resolve().then(o.bind(o,98929)),Promise.resolve().then(o.bind(o,72995)),Promise.resolve().then(o.bind(o,44634)),Promise.resolve().then(o.bind(o,7487)),Promise.resolve().then(o.bind(o,40387)),Promise.resolve().then(o.bind(o,22797)),Promise.resolve().then(o.bind(o,13097)),Promise.resolve().then(o.bind(o,67317)),Promise.resolve().then(o.bind(o,50328)),Promise.resolve().then(o.bind(o,64894)),Promise.resolve().then(o.bind(o,60775)),Promise.resolve().then(o.bind(o,13484)),Promise.resolve().then(o.bind(o,42683)),Promise.resolve().then(o.bind(o,2679)),Promise.resolve().then(o.bind(o,76167)),Promise.resolve().then(o.bind(o,72451)),Promise.resolve().then(o.bind(o,41417)),Promise.resolve().then(o.bind(o,86029)),Promise.resolve().then(o.bind(o,94766)),Promise.resolve().then(o.bind(o,97186)),Promise.resolve().then(o.bind(o,9317)),Promise.resolve().then(o.bind(o,82074)),Promise.resolve().then(o.bind(o,68861)),Promise.resolve().then(o.bind(o,96394)),Promise.resolve().then(o.bind(o,67391)),Promise.resolve().then(o.bind(o,34292)),Promise.resolve().then(o.bind(o,89536)),Promise.resolve().then(o.bind(o,50872)),Promise.resolve().then(o.bind(o,64206)),Promise.resolve().then(o.bind(o,60640)),Promise.resolve().then(o.bind(o,90844)),Promise.resolve().then(o.bind(o,16464)),Promise.resolve().then(o.bind(o,38762)),Promise.resolve().then(o.bind(o,79220)),Promise.resolve().then(o.bind(o,43174)),Promise.resolve().then(o.bind(o,81288)),Promise.resolve().then(o.bind(o,55694)),Promise.resolve().then(o.bind(o,69984)),Promise.resolve().then(o.bind(o,30096)),Promise.resolve().then(o.bind(o,89198)),Promise.resolve().then(o.bind(o,7186)),Promise.resolve().then(o.bind(o,18296)),Promise.resolve().then(o.bind(o,47152)),Promise.resolve().then(o.bind(o,21150)),Promise.resolve().then(o.bind(o,65246)),Promise.resolve().then(o.bind(o,13564)),Promise.resolve().then(o.bind(o,69902)),Promise.resolve().then(o.bind(o,14953)),Promise.resolve().then(o.bind(o,13877)),Promise.resolve().then(o.bind(o,93852)),Promise.resolve().then(o.bind(o,57779)),Promise.resolve().then(o.bind(o,71165)),Promise.resolve().then(o.bind(o,14604)),Promise.resolve().then(o.bind(o,15388)),Promise.resolve().then(o.bind(o,7738)),Promise.resolve().then(o.bind(o,97245)),Promise.resolve().then(o.bind(o,46219)),Promise.resolve().then(o.bind(o,94658)),Promise.resolve().then(o.bind(o,18060)),Promise.resolve().then(o.bind(o,35558)),Promise.resolve().then(o.bind(o,55704)),Promise.resolve().then(o.bind(o,96710)),Promise.resolve().then(o.bind(o,37494)),Promise.resolve().then(o.bind(o,36628)),Promise.resolve().then(o.bind(o,32129)),Promise.resolve().then(o.bind(o,73524)),Promise.resolve().then(o.bind(o,44635)),Promise.resolve().then(o.bind(o,74124)),Promise.resolve().then(o.bind(o,85784)),Promise.resolve().then(o.bind(o,18256)),Promise.resolve().then(o.bind(o,67661)),Promise.resolve().then(o.bind(o,64637)),Promise.resolve().then(o.bind(o,56278)),Promise.resolve().then(o.bind(o,45689)),Promise.resolve().then(o.bind(o,20981)),Promise.resolve().then(o.bind(o,98757)),Promise.resolve().then(o.bind(o,23967)),Promise.resolve().then(o.bind(o,67257)),Promise.resolve().then(o.bind(o,14777)),Promise.resolve().then(o.bind(o,17741)),Promise.resolve().then(o.bind(o,36035)),Promise.resolve().then(o.bind(o,15155)),Promise.resolve().then(o.bind(o,16939)),Promise.resolve().then(o.bind(o,32349)),Promise.resolve().then(o.bind(o,61576)),Promise.resolve().then(o.bind(o,67044)),Promise.resolve().then(o.bind(o,70847)),Promise.resolve().then(o.bind(o,64256)),Promise.resolve().then(o.bind(o,77834)),Promise.resolve().then(o.bind(o,70691)),Promise.resolve().then(o.bind(o,93774)),Promise.resolve().then(o.bind(o,14605)),Promise.resolve().then(o.bind(o,63090)),Promise.resolve().then(o.bind(o,18244)),Promise.resolve().then(o.bind(o,58565)),Promise.resolve().then(o.bind(o,33864)),Promise.resolve().then(o.bind(o,16964)),Promise.resolve().then(o.bind(o,91314)),Promise.resolve().then(o.bind(o,89770)),Promise.resolve().then(o.bind(o,40088)),Promise.resolve().then(o.bind(o,38258)),Promise.resolve().then(o.bind(o,90632)),Promise.resolve().then(o.bind(o,76984)),Promise.resolve().then(o.bind(o,19758)),Promise.resolve().then(o.bind(o,10545)),Promise.resolve().then(o.bind(o,17311)),Promise.resolve().then(o.bind(o,62310)),Promise.resolve().then(o.bind(o,45136)),Promise.resolve().then(o.bind(o,90594)),Promise.resolve().then(o.bind(o,55260)),Promise.resolve().then(o.bind(o,74872)),Promise.resolve().then(o.bind(o,86793)),Promise.resolve().then(o.bind(o,3416)),Promise.resolve().then(o.bind(o,32506)),Promise.resolve().then(o.bind(o,91229)),Promise.resolve().then(o.bind(o,71595)),Promise.resolve().then(o.bind(o,11171)),Promise.resolve().then(o.bind(o,15378)),Promise.resolve().then(o.bind(o,92415)),Promise.resolve().then(o.bind(o,64379)),Promise.resolve().then(o.bind(o,23794)),Promise.resolve().then(o.bind(o,33260)),Promise.resolve().then(o.bind(o,83683)),Promise.resolve().then(o.bind(o,32720)),Promise.resolve().then(o.bind(o,75122)),Promise.resolve().then(o.bind(o,93178)),Promise.resolve().then(o.bind(o,25542)),Promise.resolve().then(o.bind(o,83925)),Promise.resolve().then(o.bind(o,95771)),Promise.resolve().then(o.bind(o,41193)),Promise.resolve().then(o.bind(o,69481)),Promise.resolve().then(o.bind(o,64727)),Promise.resolve().then(o.bind(o,82726)),Promise.resolve().then(o.bind(o,27701)),Promise.resolve().then(o.bind(o,44500)),Promise.resolve().then(o.bind(o,6992)),Promise.resolve().then(o.bind(o,46434)),Promise.resolve().then(o.bind(o,83937)),Promise.resolve().then(o.bind(o,8736)),Promise.resolve().then(o.bind(o,58421)),Promise.resolve().then(o.bind(o,79770)),Promise.resolve().then(o.bind(o,36538)),Promise.resolve().then(o.bind(o,71706)),Promise.resolve().then(o.bind(o,63790)),Promise.resolve().then(o.bind(o,30732)),Promise.resolve().then(o.bind(o,70944)),Promise.resolve().then(o.bind(o,35240)),Promise.resolve().then(o.bind(o,35364)),Promise.resolve().then(o.bind(o,43796)),Promise.resolve().then(o.bind(o,49891)),Promise.resolve().then(o.bind(o,33235)),Promise.resolve().then(o.bind(o,54930)),Promise.resolve().then(o.bind(o,40411)),Promise.resolve().then(o.bind(o,92502)),Promise.resolve().then(o.bind(o,98163)),Promise.resolve().then(o.bind(o,74115)),Promise.resolve().then(o.bind(o,18845)),Promise.resolve().then(o.bind(o,25832)),Promise.resolve().then(o.bind(o,63498)),Promise.resolve().then(o.bind(o,92804)),Promise.resolve().then(o.bind(o,21179)),Promise.resolve().then(o.bind(o,94621)),Promise.resolve().then(o.bind(o,72179)),Promise.resolve().then(o.bind(o,33998)),Promise.resolve().then(o.bind(o,69772)),Promise.resolve().then(o.bind(o,61024)),Promise.resolve().then(o.bind(o,2369)),Promise.resolve().then(o.bind(o,66143)),Promise.resolve().then(o.bind(o,24164)),Promise.resolve().then(o.bind(o,91418)),Promise.resolve().then(o.bind(o,21155)),Promise.resolve().then(o.bind(o,47121)),Promise.resolve().then(o.bind(o,93480)),Promise.resolve().then(o.bind(o,21786)),Promise.resolve().then(o.bind(o,65878)),Promise.resolve().then(o.bind(o,55250)),Promise.resolve().then(o.bind(o,45766)),Promise.resolve().then(o.bind(o,89207)),Promise.resolve().then(o.bind(o,98005)),Promise.resolve().then(o.bind(o,11189)),Promise.resolve().then(o.bind(o,76503)),Promise.resolve().then(o.bind(o,70305)),Promise.resolve().then(o.bind(o,92364)),Promise.resolve().then(o.bind(o,60688)),Promise.resolve().then(o.bind(o,78094)),Promise.resolve().then(o.bind(o,27071)),Promise.resolve().then(o.bind(o,75958)),Promise.resolve().then(o.bind(o,74264)),Promise.resolve().then(o.bind(o,9457)),Promise.resolve().then(o.bind(o,58366)),Promise.resolve().then(o.bind(o,63326)),Promise.resolve().then(o.bind(o,10476)),Promise.resolve().then(o.bind(o,63652)),Promise.resolve().then(o.bind(o,14189)),Promise.resolve().then(o.bind(o,30198)),Promise.resolve().then(o.bind(o,55002)),Promise.resolve().then(o.bind(o,12007)),Promise.resolve().then(o.bind(o,32860)),Promise.resolve().then(o.bind(o,73643)),Promise.resolve().then(o.bind(o,15717)),Promise.resolve().then(o.bind(o,67623)),Promise.resolve().then(o.bind(o,59565)),Promise.resolve().then(o.bind(o,93668)),Promise.resolve().then(o.bind(o,38028)),Promise.resolve().then(o.bind(o,11934)),Promise.resolve().then(o.bind(o,89847)),Promise.resolve().then(o.bind(o,66645)),Promise.resolve().then(o.bind(o,91853)),Promise.resolve().then(o.bind(o,24454)),Promise.resolve().then(o.bind(o,96489)),Promise.resolve().then(o.bind(o,8485)),Promise.resolve().then(o.bind(o,56506)),Promise.resolve().then(o.bind(o,37117)),Promise.resolve().then(o.bind(o,60825)),Promise.resolve().then(o.bind(o,51345)),Promise.resolve().then(o.bind(o,19349)),Promise.resolve().then(o.bind(o,26225)),Promise.resolve().then(o.bind(o,38589)),Promise.resolve().then(o.bind(o,59144)),Promise.resolve().then(o.bind(o,71894)),Promise.resolve().then(o.bind(o,90533)),Promise.resolve().then(o.bind(o,87848)),Promise.resolve().then(o.bind(o,98865)),Promise.resolve().then(o.bind(o,86151)),Promise.resolve().then(o.bind(o,15203)),Promise.resolve().then(o.bind(o,99640)),Promise.resolve().then(o.bind(o,3601)),Promise.resolve().then(o.bind(o,58835)),Promise.resolve().then(o.bind(o,67821)),Promise.resolve().then(o.bind(o,89522)),Promise.resolve().then(o.bind(o,63475)),Promise.resolve().then(o.bind(o,98172)),Promise.resolve().then(o.bind(o,36805)),Promise.resolve().then(o.bind(o,23653)),Promise.resolve().then(o.bind(o,80533)),Promise.resolve().then(o.bind(o,61275)),Promise.resolve().then(o.bind(o,73606)),Promise.resolve().then(o.bind(o,3192)),Promise.resolve().then(o.bind(o,65197)),Promise.resolve().then(o.bind(o,39398)),Promise.resolve().then(o.bind(o,72603)),Promise.resolve().then(o.bind(o,74451)),Promise.resolve().then(o.bind(o,24413)),Promise.resolve().then(o.bind(o,41427)),Promise.resolve().then(o.bind(o,24655)),Promise.resolve().then(o.bind(o,27119)),Promise.resolve().then(o.bind(o,76213)),Promise.resolve().then(o.bind(o,94291)),Promise.resolve().then(o.bind(o,3439)),Promise.resolve().then(o.bind(o,38815)),Promise.resolve().then(o.bind(o,1021)),Promise.resolve().then(o.bind(o,9609)),Promise.resolve().then(o.bind(o,75459)),Promise.resolve().then(o.bind(o,94419)),Promise.resolve().then(o.bind(o,63427)),Promise.resolve().then(o.bind(o,5297)),Promise.resolve().then(o.bind(o,37047)),Promise.resolve().then(o.bind(o,49957)),Promise.resolve().then(o.bind(o,97511)),Promise.resolve().then(o.bind(o,24107)),Promise.resolve().then(o.bind(o,49165)),Promise.resolve().then(o.bind(o,58541)),Promise.resolve().then(o.bind(o,50099)),Promise.resolve().then(o.bind(o,86845)),Promise.resolve().then(o.bind(o,35747)),Promise.resolve().then(o.bind(o,80738)),Promise.resolve().then(o.bind(o,2380)),Promise.resolve().then(o.bind(o,94564)),Promise.resolve().then(o.t.bind(o,77994,23)),Promise.resolve().then(o.bind(o,53700)),Promise.resolve().then(o.bind(o,88240)),Promise.resolve().then(o.bind(o,37296)),Promise.resolve().then(o.bind(o,6424)),Promise.resolve().then(o.bind(o,35264)),Promise.resolve().then(o.bind(o,57720)),Promise.resolve().then(o.bind(o,4552)),Promise.resolve().then(o.bind(o,59680)),Promise.resolve().then(o.bind(o,31064)),Promise.resolve().then(o.bind(o,63078)),Promise.resolve().then(o.bind(o,55904)),Promise.resolve().then(o.bind(o,80324)),Promise.resolve().then(o.bind(o,29100)),Promise.resolve().then(o.bind(o,92380)),Promise.resolve().then(o.bind(o,79300)),Promise.resolve().then(o.bind(o,51568)),Promise.resolve().then(o.bind(o,72504)),Promise.resolve().then(o.bind(o,8225)),Promise.resolve().then(o.bind(o,48226)),Promise.resolve().then(o.bind(o,62280)),Promise.resolve().then(o.bind(o,56408)),Promise.resolve().then(o.bind(o,26442)),Promise.resolve().then(o.bind(o,74424)),Promise.resolve().then(o.bind(o,62295)),Promise.resolve().then(o.bind(o,27712)),Promise.resolve().then(o.bind(o,94232)),Promise.resolve().then(o.bind(o,8893)),Promise.resolve().then(o.bind(o,7054)),Promise.resolve().then(o.bind(o,21740)),Promise.resolve().then(o.bind(o,18364)),Promise.resolve().then(o.bind(o,56080)),Promise.resolve().then(o.bind(o,57256)),Promise.resolve().then(o.bind(o,1392)),Promise.resolve().then(o.bind(o,98200)),Promise.resolve().then(o.bind(o,50822)),Promise.resolve().then(o.bind(o,17092)),Promise.resolve().then(o.bind(o,7406)),Promise.resolve().then(o.bind(o,70382)),Promise.resolve().then(o.bind(o,69112)),Promise.resolve().then(o.bind(o,97032)),Promise.resolve().then(o.bind(o,11286)),Promise.resolve().then(o.bind(o,8320)),Promise.resolve().then(o.bind(o,87444)),Promise.resolve().then(o.bind(o,91128)),Promise.resolve().then(o.bind(o,77808)),Promise.resolve().then(o.bind(o,66308)),Promise.resolve().then(o.bind(o,90300)),Promise.resolve().then(o.bind(o,55026)),Promise.resolve().then(o.bind(o,11928)),Promise.resolve().then(o.bind(o,58190)),Promise.resolve().then(o.bind(o,91400)),Promise.resolve().then(o.bind(o,91388)),Promise.resolve().then(o.bind(o,53360)),Promise.resolve().then(o.bind(o,30548)),Promise.resolve().then(o.bind(o,20888)),Promise.resolve().then(o.bind(o,38606)),Promise.resolve().then(o.bind(o,59806)),Promise.resolve().then(o.bind(o,66748)),Promise.resolve().then(o.bind(o,60088)),Promise.resolve().then(o.bind(o,97224)),Promise.resolve().then(o.bind(o,94280)),Promise.resolve().then(o.bind(o,5070)),Promise.resolve().then(o.bind(o,24980)),Promise.resolve().then(o.bind(o,40038)),Promise.resolve().then(o.bind(o,386)),Promise.resolve().then(o.bind(o,32076)),Promise.resolve().then(o.bind(o,4268)),Promise.resolve().then(o.bind(o,44824)),Promise.resolve().then(o.bind(o,26578)),Promise.resolve().then(o.bind(o,31416)),Promise.resolve().then(o.bind(o,70936)),Promise.resolve().then(o.bind(o,58064)),Promise.resolve().then(o.bind(o,25528)),Promise.resolve().then(o.bind(o,27580)),Promise.resolve().then(o.bind(o,41030)),Promise.resolve().then(o.bind(o,2378)),Promise.resolve().then(o.bind(o,70134)),Promise.resolve().then(o.bind(o,96202)),Promise.resolve().then(o.bind(o,32130)),Promise.resolve().then(o.bind(o,34982)),Promise.resolve().then(o.bind(o,8350)),Promise.resolve().then(o.bind(o,90982)),Promise.resolve().then(o.bind(o,35263)),Promise.resolve().then(o.bind(o,61382)),Promise.resolve().then(o.bind(o,23767)),Promise.resolve().then(o.bind(o,59126)),Promise.resolve().then(o.t.bind(o,72893,23)),Promise.resolve().then(o.t.bind(o,46438,23)),Promise.resolve().then(o.t.bind(o,40857,23)),Promise.resolve().then(o.t.bind(o,14374,23)),Promise.resolve().then(o.t.bind(o,73694,23)),Promise.resolve().then(o.t.bind(o,16228,23)),Promise.resolve().then(o.t.bind(o,43606,23)),Promise.resolve().then(o.bind(o,61093))},56612:(e,r,o)=>{"use strict";o.d(r,{BP:()=>b,OM:()=>a,yO:()=>P});var n=o(68110),s=o(330),i=o(16405),t=o(42779),l=o(10179),d=o(38798),h=o(43591),m=o(28555),v=o.n(m);let b=(e,r,o)=>{let h=(0,n.YW)(r),m=(0,n.YW)("/most.box/"+e),b=(0,s.A)(h,m,3,32,"sha512"),P=(0,i.q5)((0,t.s)(b)),a=P.slice(0,32),c=v().box.keyPair.fromSecretKey(a),u=(0,i.c$)(c.publicKey),f=(0,i.c$)(c.secretKey),g=v().sign.keyPair.fromSeed(a),w=(0,i.c$)(g.publicKey),y=l.v.entropyToPhrase(P);return{username:e,address:d.QX.fromPhrase(y).address,public_key:u,private_key:f,mnemonic:"I know loss mnemonic will lose my wallet."===o?y:"",ed_public_key:w}},P=(e,r,o)=>{let n=new TextEncoder().encode(e),s=v().randomBytes(v().box.nonceLength),t=v().box(n,s,new Uint8Array((0,i.q5)(r)),new Uint8Array((0,i.q5)(o)));return t?["mp://2",(0,h.W)(s),(0,h.W)(t)].join("."):(console.info("加密失败"),"")},a=(e,r,o)=>{let[n,s,t]=e.split(".");if("mp://2"!==n)return console.info("无效协议"),"";let l=v().box.open((0,h.y)(t),(0,h.y)(s),new Uint8Array((0,i.q5)(r)),new Uint8Array((0,i.q5)(o)));return l?new TextDecoder().decode(l):(console.info("无法解密"),"")}},61093:(e,r,o)=>{"use strict";o.d(r,{default:()=>v});var n=o(1474),s=o(13297),i=o(12115),t=o(21794),l=o(63475),d=o(89522),h=o(20063),m=o(59126);function v(){let e=(0,s.k)(e=>e.initWallet),r=(0,s.k)(e=>e.setItem),o=(0,s.k)(e=>e.dotAPI),v=(0,s.k)(e=>e.updateDot),b=(0,h.usePathname)(),P=(0,h.useRouter)(),a=async()=>{try{let r=await n.Ay.load(),o=(await r.get()).visitorId;sessionStorage.setItem("fingerprint",o),e(o)}catch(e){return console.warn("登录失败:",e),""}};(0,i.useEffect)(()=>{(()=>{let e=window.location.hash.slice(1),o="http".concat(e.endsWith(":1976")?"":"s","://"),n=e?o+e:null;window.location.hash.includes("=")&&(n=null);let s=n||localStorage.getItem("dotAPI");s&&(t.FH.defaults.baseURL=s),v(s||location.origin).then(e=>{b.startsWith("/@")||null===e&&(m.notifications.show({message:"节点不可用",color:"red"}),P.push("/dot/?back"))});let i=localStorage.getItem("dotCID");i&&r("dotCID",i)})(),a(),sessionStorage.firstPath=window.location.pathname},[]),(0,i.useEffect)(()=>{if(b&&o)try{if(window.location.hash.includes("=")||b.startsWith("/@"))return;let e=new URL(window.location.href),r=new URL(o);e.hash!=="#"+r.host&&(e.host===r.host?e.hash="":e.hash=r.host,P.replace(e.href,{scroll:!1}))}catch(e){}},[b,o]);let{colorScheme:c}=(0,l.useMantineColorScheme)(),u=(0,d.useComputedColorScheme)();return(0,i.useEffect)(()=>{r("nodeDark","dark"===("auto"===c?u:c)?"toastui-editor-dark":"")},[c,u]),null}},71281:()=>{},97443:(e,r,o)=>{"use strict";o.d(r,{A:()=>D});var n=o(43591),s=o(68110),i=o(38798),t=o(16405),l=o(82127),d=o(34477),h=o(55544),m=o(85179),v=o(56612),b=o(86710),P=o(36117),a=o.n(P),c=o(44839),u=o.n(c);o(28223);var f=o(78595),g=o.n(f),w=o(28555),y=o.n(w);a().extend(g()),a().extend(u()),a().locale("zh-cn");let p=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMM",o=a()().isoWeek(),n=a()().format(r)+o,s=sessionStorage.getItem("fingerprint");if(!s)throw Error("请先获取设备指纹");let i=[location.origin,s].join("/"),{public_key:t,private_key:l}=(0,v.BP)(n,i);return(0,v.yO)(JSON.stringify(e),t,l)},k=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMM",o=a()().isoWeek(),n=a()().format(r)+o,s=sessionStorage.getItem("fingerprint");if(!s)throw Error("请先获取设备指纹");let i=[location.origin,s].join("/"),{public_key:t,private_key:l}=(0,v.BP)(n,i),d=(0,v.OM)(e,t,l);if(!d)throw Error("jwt 解析失败");let h=JSON.parse(d);if(!h.address)throw Error("jwt json 解析失败");return h},I=async e=>{let r=Date.now().toString(),o=i.QX.fromPhrase(e.mnemonic),n=await o.signMessage(r);localStorage.token=[e.address,r,n].join(".")},S=e=>{try{var r;let o=p(e);if((null==(r=k(o))?void 0:r.address)===e.address)return localStorage.setItem("jwt",o),I(e),e}catch(e){console.log("登录失败:",e)}return null},A=(e,r)=>{let o=r.slice(2),n=new Uint8Array((0,t.q5)(e+o));return y().sign.keyPair.fromSecretKey(n)},U={avatar:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,d.gn)(h,{seed:"most.box@"+e,flip:!0,backgroundType:["gradientLinear"]}).toDataUri()},avatarCID:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Most";return(0,d.gn)(m,{seed:"most.box#"+e,flip:!0,backgroundType:["gradientLinear","solid"]}).toDataUri()},formatTime:e=>{let r;if(!e)return"";let o=a()(Number(e)),n=o.hour();return r=n>=0&&n<3?"凌晨":n>=3&&n<6?"拂晓":n>=6&&n<9?"早晨":n>=9&&n<12?"上午":n>=12&&n<15?"下午":n>=15&&n<18?"傍晚":n>=18&&n<21?"薄暮":"深夜",o.format("YYYY年M月D日 ".concat(r,"h点m分"))},formatDate:e=>{let r=a()(Number(e)),o=a()();if(r.isSame(o,"minute"))return r.format("HH:mm:ss");if(r.isSame(o,"day"))return r.format("HH:mm");if(r.isSame(o.subtract(1,"day"),"day"))return"昨天 ".concat(r.format("HH:mm"));if(r.isoWeek()===o.isoWeek())return"".concat(["周日","周一","周二","周三","周四","周五","周六"][r.day()]," ").concat(r.format("HH:mm"));if(r.year()===o.year())return r.format("M月D日");else return r.format("YY年M月D日")},formatAddress:e=>e?e.slice(0,6)+"..."+e.slice(-4):"",enBase64:e=>(0,n.W)((0,s.YW)(e)),deBase64:e=>(0,s._v)((0,n.y)(e)),createJWT:p,verifyJWT:k,login:(e,r)=>S((0,v.BP)(e,r,"I know loss mnemonic will lose my wallet.")),loginSave:S,ZeroAddress:l.j,createToken:I,pinyin:function(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(r.length<o)return!1;if(e.toLowerCase().includes(r.toLowerCase()))return!0;let n=(0,b.YW)(e,r,{continuous:!0});return!!n&&!!(n.length>=o)},openDot:e=>{let r=new URL("/auth/jwt/",e),o=localStorage.getItem("jwt");if(o){let e=U.verifyJWT(o);if(e){let o=a()().format("YY/M/D HH:mm"),{public_key:n,private_key:s}=(0,v.BP)("auth/jwt",o),i=(0,v.yO)(JSON.stringify(e),n,s);r.searchParams.set("token",i)}}window.open(r.href)},getEdKeyPair:A,getIPNS:(e,r)=>{let o=(e=>{let r=new Uint8Array([8,1,18,...(e=>{let r=[];for(;e>=128;)r.push(127&e|128),e>>=7;return r.push(e),r})(e.length)]),o=new Uint8Array(r.length+e.length);return o.set(r,0),o.set(e,r.length),o})(A(e,r).publicKey),n=new Uint8Array(2+o.length);n[0]=0,n[1]=36,n.set(o,2);let s=new Uint8Array([1,114]),i=new Uint8Array(s.length+n.length);return i.set(s,0),i.set(n,s.length),"k"+((e,r)=>{if(0===e.length)return"";let o=r.length,n=0;for(;n<e.length&&0===e[n];)n++;let s=[0];for(let r=n;r<e.length;r++){let n=e[r];for(let e=0;e<s.length;e++){let r=256*s[e]+n;s[e]=r%o,n=Math.floor(r/o)}for(;n>0;)s.push(n%o),n=Math.floor(n/o)}let i="";for(let e=0;e<n;e++)i+=r[0];for(let e=s.length-1;e>=0;e--)i+=r[s[e]];return i})(i,"0123456789abcdefghijklmnopqrstuvwxyz")}},D=U}},e=>{e.O(0,[2997,4498,1069,4732,8198,2545,2829,5619,6714,8555,8990,5125,9287,9318,9457,4988,7985,3843,6982,9919,1510,5122,722,2835,6159,7155,8441,1255,7358],()=>e(e.s=48492)),_N_E=e.O()}]);