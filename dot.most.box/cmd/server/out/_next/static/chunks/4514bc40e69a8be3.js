(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77829,e=>{"use strict";var t,r,n,a,i,o=e.i(43476),l=e.i(26564),u=e.i(69625),s=e.i(44662),d=e.i(33372),c=e.i(51501),f=e.i(41710),h=e.i(653),v=e.i(26200),m=e.i(71645),g=e.i(7670);function p(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function x(){}function b(e){return!!(e||"").match(/\d/)}function y(e){return null==e}function j(e){return y(e)||"number"==typeof e&&isNaN(e)||"number"==typeof e&&!isFinite(e)}function w(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function S(e,t){void 0===t&&(t=!0);var r="-"===e[0],n=r&&t,a=(e=e.replace("-","")).split(".");return{beforeDecimal:a[0],afterDecimal:a[1]||"",hasNegation:r,addNegation:n}}function N(e,t,r){for(var n="",a=r?"0":"",i=0;i<=t-1;i++)n+=e[i]||a;return n}function D(e,t){return Array(t+1).join(e)}function k(e){var t=e+"",r="-"===t[0]?"-":"";r&&(t=t.substring(1));var n=t.split(/[eE]/g),a=n[0],i=n[1];if(!(i=Number(i)))return r+a;a=a.replace(".","");var o=1+i,l=a.length;return o<0?a="0."+D("0",Math.abs(o))+a:o>=l?a+=D("0",o-l):a=(a.substring(0,o)||"0")+"."+a.substring(o),r+a}function M(e,t,r){if(-1!==["","-"].indexOf(e))return e;var n=(-1!==e.indexOf(".")||r)&&t,a=S(e),i=a.beforeDecimal,o=a.afterDecimal,l=a.hasNegation,u=parseFloat("0."+(o||"0")),s=(o.length<=t?"0."+o:u.toFixed(t)).split("."),d=i;return i&&Number(s[0])&&(d=i.split("").reverse().reduce(function(e,t,r){return e.length>r?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e},s[0])),(l?"-":"")+d+(n?".":"")+N(s[1]||"",t,r)}function V(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var r=e.createTextRange();return r.move("character",t),r.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}(t=i||(i={})).event="event",t.props="prop";var B=(r=function(e,t){for(var r=0,n=0,a=e.length,i=t.length;e[r]===t[r]&&r<a;)r++;for(;e[a-1-n]===t[i-1-n]&&i-n>r&&a-n>r;)n++;return{from:{start:r,end:a-n},to:{start:r,end:i-n}}},a=void 0,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return n&&e.length===n.length&&e.every(function(e,t){return e===n[t]})?a:(n=e,a=r.apply(void 0,e))}),O=function(e,t){var r=Math.min(e.selectionStart,t);return{from:{start:r,end:e.selectionEnd},to:{start:r,end:t}}};function C(e){return Math.max(e.selectionStart,e.selectionEnd)}function T(e){var t=e.currentValue,r=e.formattedValue,n=e.currentValueIndex,a=e.formattedValueIndex;return t[n]===r[a]}function E(e,t,r,n){var a=e.length;if(t=Math.min(Math.max(t,0),a),"left"===n){for(;t>=0&&!r[t];)t--;-1===t&&(t=r.indexOf(!0))}else{for(;t<=a&&!r[t];)t++;t>a&&(t=r.lastIndexOf(!0))}return -1===t&&(t=a),t}function A(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),r=0,n=t.length;r<n;r++)t[r]=!!(b(e[r])||b(e[r-1]));return t}function I(e,t,r,n,a,i){void 0===i&&(i=x);var o,l,u=(o=function(e,t){var r,i;return j(e)?(i="",r=""):r="number"==typeof e||t?n(i="number"==typeof e?k(e):e):n(i=a(e,void 0)),{formattedValue:r,numAsString:i}},(l=(0,m.useRef)(o)).current=o,(0,m.useRef)(function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return l.current.apply(l,e)}).current),s=(0,m.useState)(function(){return u(y(e)?t:e,r)}),d=s[0],c=s[1],f=e,h=r;y(e)&&(f=d.numAsString,h=!0);var v=u(f,h);return(0,m.useMemo)(function(){c(v)},[v.formattedValue]),[d,function(e,t){e.formattedValue!==d.formattedValue&&c({formattedValue:e.formattedValue,numAsString:e.value}),i(e,t)}]}function R(e){return e.replace(/[^0-9]/g,"")}function G(e){return e}function F(e){var t=e.type;void 0===t&&(t="text");var r=e.displayType;void 0===r&&(r="input");var n=e.customInput,a=e.renderText,o=e.getInputRef,l=e.format;void 0===l&&(l=G);var u=e.removeFormatting;void 0===u&&(u=R);var s=e.defaultValue,d=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,h=e.onChange;void 0===h&&(h=x);var v=e.onKeyDown;void 0===v&&(v=x);var g=e.onMouseUp;void 0===g&&(g=x);var y=e.onFocus;void 0===y&&(y=x);var j=e.onBlur;void 0===j&&(j=x);var w=e.value,S=e.getCaretBoundary;void 0===S&&(S=A);var N=e.isValidInputCharacter;void 0===N&&(N=b);var D=e.isCharacterSame,k=p(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),M=I(w,s,!!d,l,u,c),F=M[0],z=F.formattedValue,P=F.numAsString,$=M[1],_=(0,m.useRef)(),L=(0,m.useRef)({formattedValue:z,numAsString:P}),K=function(e,t){L.current={formattedValue:e.formattedValue,numAsString:e.value},$(e,t)},U=(0,m.useState)(!1),H=U[0],W=U[1],Z=(0,m.useRef)(null),X=(0,m.useRef)({setCaretTimeout:null,focusTimeout:null});(0,m.useEffect)(function(){return W(!0),function(){clearTimeout(X.current.setCaretTimeout),clearTimeout(X.current.focusTimeout)}},[]);var q=l,J=function(e,t){var r=parseFloat(t);return{formattedValue:e,value:t,floatValue:isNaN(r)?void 0:r}},Q=function(e,t,r){(0!==e.selectionStart||e.selectionEnd!==e.value.length)&&(V(e,t),X.current.setCaretTimeout=setTimeout(function(){e.value===r&&e.selectionStart!==t&&V(e,t)},0))},Y=function(e,t,r){return E(e,t,S(e),r)},ee=function(e,t,r){var n=S(t),a=function(e,t,r,n,a,i,o){void 0===o&&(o=T);var l=a.findIndex(function(e){return e}),u=e.slice(0,l);t||r.startsWith(u)||(t=u,r=u+r,n+=u.length);for(var s=r.length,d=e.length,c={},f=Array(s),h=0;h<s;h++){f[h]=-1;for(var v=0;v<d;v++)if(o({currentValue:r,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:v})&&!0!==c[v]){f[h]=v,c[v]=!0;break}}for(var m=n;m<s&&(-1===f[m]||!i(r[m]));)m++;var g=m===s||-1===f[m]?d:f[m];for(m=n-1;m>0&&-1===f[m];)m--;var p=-1===m||-1===f[m]?0:f[m]+1;return p>g?g:n-p<g-n?p:g}(t,z,e,r,n,N,D);return E(t,a,n)},et=function(e){var t,r=e.formattedValue;void 0===r&&(r="");var n=e.input,a=e.source,i=e.event,o=e.numAsString;if(n){var l=e.inputValue||n.value,u=C(n);n.value=r,void 0!==(t=ee(l,r,u))&&Q(n,t,r)}r!==z&&K(J(r,o),{event:i,source:a})};(0,m.useEffect)(function(){var e=L.current,t=e.formattedValue,r=e.numAsString;(z!==t||P!==r)&&K(J(z,P),{event:void 0,source:i.props})},[z,P]);var er=Z.current?C(Z.current):void 0;("undefined"!=typeof window?m.useLayoutEffect:m.useEffect)(function(){var e=Z.current;if(z!==L.current.formattedValue&&e){var t=ee(L.current.formattedValue,z,er);e.value=z,Q(e,t,z)}},[z]);var en=function(e,t,r){var n=t.target,a=Object.assign(Object.assign({},_.current?O(_.current,n.selectionEnd):B(z,e)),{lastValue:z}),i=u(e,a),o=q(i);if(i=u(o,void 0),f&&!f(J(o,i))){var l=t.target,s=ee(e,z,C(l));return l.value=z,Q(l,s,z),!1}return et({formattedValue:o,numAsString:i,inputValue:e,event:t,source:r,input:t.target}),!0},ea=function(e,t){void 0===t&&(t=0),_.current={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd+t}},ei=Object.assign({inputMode:H&&"undefined"!=typeof navigator&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))?"numeric":void 0},k,{type:t,value:z,onChange:function(e){en(e.target.value,e,i.event)&&h(e),_.current=void 0},onKeyDown:function(e){var t,r=e.target,n=e.key,a=r.selectionStart,i=r.selectionEnd,o=r.value;void 0===o&&(o=""),"ArrowLeft"===n||"Backspace"===n?t=Math.max(a-1,0):"ArrowRight"===n?t=Math.min(a+1,o.length):"Delete"===n&&(t=a);var l=0;"Delete"===n&&a===i&&(l=1);var u="ArrowLeft"===n||"ArrowRight"===n;if(void 0===t||a!==i&&!u){v(e),ea(r,l);return}var s=t;u?(s=Y(o,t,"ArrowLeft"===n?"left":"right"))!==t&&e.preventDefault():"Delete"!==n||N(o[t])?"Backspace"!==n||N(o[t])||(s=Y(o,t,"left")):s=Y(o,t,"right"),s!==t&&Q(r,s,o),v(e),ea(r,l)},onMouseUp:function(e){var t=e.target,r=function(){var e=t.selectionStart,r=t.selectionEnd,n=t.value;if(void 0===n&&(n=""),e===r){var a=Y(n,e);a!==e&&Q(t,a,n)}};r(),requestAnimationFrame(function(){r()}),g(e),ea(t)},onFocus:function(e){e.persist&&e.persist();var t=e.target,r=e.currentTarget;Z.current=t,X.current.focusTimeout=setTimeout(function(){var n=t.selectionStart,a=t.selectionEnd,i=t.value;void 0===i&&(i="");var o=Y(i,n);o!==n&&(0!==n||a!==i.length)&&Q(t,o,i),y(Object.assign(Object.assign({},e),{currentTarget:r}))},0)},onBlur:function(e){Z.current=null,clearTimeout(X.current.focusTimeout),clearTimeout(X.current.setCaretTimeout),j(e)}});return"text"===r?a?m.default.createElement(m.default.Fragment,null,a(z,k)||null):m.default.createElement("span",Object.assign({},k,{ref:o}),z):n?m.default.createElement(n,Object.assign({},ei,{ref:o})):m.default.createElement("input",Object.assign({},ei,{ref:o}))}function z(e,t){var r,n,a,i=t.decimalScale,o=t.fixedDecimalScale,l=t.prefix;void 0===l&&(l="");var u=t.suffix;void 0===u&&(u="");var s=t.allowNegative,d=t.thousandsGroupStyle;if(void 0===d&&(d="thousand"),""===e||"-"===e)return e;var c=P(t),f=c.thousandSeparator,h=c.decimalSeparator,v=0!==i&&-1!==e.indexOf(".")||i&&o,m=S(e,s),g=m.beforeDecimal,p=m.afterDecimal,x=m.addNegation;return void 0!==i&&(p=N(p,i,!!o)),f&&(r=g,n=function(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;default:return/(\d)(?=(\d{3})+(?!\d))/g}}(d),a=-1===(a=r.search(/[1-9]/))?r.length:a,g=r.substring(0,a)+r.substring(a,r.length).replace(n,"$1"+f)),l&&(g=l+g),u&&(p+=u),x&&(g="-"+g),e=g+(v&&h||"")+p}function P(e){var t=e.decimalSeparator;void 0===t&&(t=".");var r=e.thousandSeparator,n=e.allowedDecimalSeparators;return!0===r&&(r=","),n||(n=[t,"."]),{decimalSeparator:t,thousandSeparator:r,allowedDecimalSeparators:n}}function $(e){var t,r,n,a,o,l,u,s,d,c,f,h,v,g,N,D,O,C,T,E,A,R,G,$,_,L,K,U,H,W=((t=function(e){var t=P(e),r=t.thousandSeparator,n=t.decimalSeparator,a=e.prefix;void 0===a&&(a="");var i=e.allowNegative;if(void 0===i&&(i=!0),r===n)throw Error("\n        Decimal separator can't be same as thousand separator.\n        thousandSeparator: "+r+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n        decimalSeparator: '+n+" (default value for decimalSeparator is .)\n     ");return a.startsWith("-")&&i&&(console.error("\n      Prefix can't start with '-' when allowNegative is true.\n      prefix: "+a+"\n      allowNegative: "+i+"\n    "),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}(t=e)).decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle,r=t.suffix,n=t.allowNegative,a=t.allowLeadingZeros,void 0===(o=t.onKeyDown)&&(o=x),void 0===(l=t.onBlur)&&(l=x),u=t.thousandSeparator,s=t.decimalScale,d=t.fixedDecimalScale,void 0===(c=t.prefix)&&(c=""),f=t.defaultValue,h=t.value,v=t.valueIsNumericString,g=t.onValueChange,N=p(t,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),O=(D=P(t)).decimalSeparator,C=D.allowedDecimalSeparators,T=function(e){return z(e,t)},E=function(e,r){return function(e,t,r){void 0===t&&(t={from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""});var n,a,i,o,l=r.allowNegative,u=r.prefix;void 0===u&&(u="");var s=r.suffix;void 0===s&&(s="");var d=r.decimalScale,c=t.from,f=t.to,h=f.start,v=f.end,m=P(r),g=m.allowedDecimalSeparators,p=m.decimalSeparator,x=e[v]===p;if(b(e)&&(e===u||e===s)&&""===t.lastValue)return e;if(v-h==1&&-1!==g.indexOf(e[h])){var y=0===d?"":p;e=e.substring(0,h)+y+e.substring(h+1,e.length)}var j=function(e,t,r){var n=!1,a=!1;u.startsWith("-")?n=!1:e.startsWith("--")?(n=!1,a=!0):s.startsWith("-")&&e.length===s.length?n=!1:"-"===e[0]&&(n=!0);var i=+!!n;return a&&(i=2),i&&(e=e.substring(i),t-=i,r-=i),{value:e,start:t,end:r,hasNegation:n}},N=j(e,h,v),D=N.hasNegation;e=N.value,h=N.start,v=N.end;var k=j(t.lastValue,c.start,c.end),M=k.start,V=k.end,B=k.value,O=e.substring(h,v);e.length&&B.length&&(M>B.length-s.length||V<u.length)&&!(O&&s.startsWith(O))&&(e=B);var C=0;e.startsWith(u)?C+=u.length:h<u.length&&(C=h),e=e.substring(C),v-=C;var T=e.length,E=e.length-s.length;e.endsWith(s)?T=E:v>E?T=v:v>e.length-s.length&&(T=v),e=e.substring(0,T),void 0===(n=D?"-"+e:e)&&(n=""),a=RegExp("(-)(.)*(-)"),i=/(-)/.test(n),o=a.test(n),n=n.replace(/-/g,""),i&&!o&&l&&(n="-"+n);var A=(e=((e=n).match(RegExp("(^-)|[0-9]|"+w(p),"g"))||[]).join("")).indexOf(p),I=S(e=e.replace(RegExp(w(p),"g"),function(e,t){return t===A?".":""}),l),R=I.beforeDecimal,G=I.afterDecimal,F=I.addNegation;return f.end-f.start<c.end-c.start&&""===R&&x&&!parseFloat(G)&&(e=F?"-":""),e}(e,r,t)},A=y(h)?f:h,G=null!=v?v:(R=c,""===A||!(null==R?void 0:R.match(/\d/))&&!(null==r?void 0:r.match(/\d/))&&"string"==typeof A&&!isNaN(Number(A))),y(h)?y(f)||(G=G||"number"==typeof f):G=G||"number"==typeof h,K=(L=(_=I(($=function(e){return j(e)?e:("number"==typeof e&&(e=k(e)),G&&"number"==typeof s)?M(e,s,!!d):e})(h),$(f),!!G,T,E,g))[0]).numAsString,U=L.formattedValue,H=_[1],Object.assign(Object.assign({},N),{value:U,valueIsNumericString:!1,isValidInputCharacter:function(e){return e===O||b(e)},isCharacterSame:function(e){var t=e.currentValue,r=e.lastValue,n=e.formattedValue,a=e.currentValueIndex,i=e.formattedValueIndex,o=t[a],l=n[i],u=B(r,t).to,f=function(e){return E(e).indexOf(".")+c.length};return!(0===h&&d&&s&&t[u.start]===O&&f(t)<a&&f(n)>i)&&(!!(a>=u.start&&a<u.end&&C&&C.includes(o))&&l===O||o===l)},onValueChange:H,format:T,removeFormatting:E,getCaretBoundary:function(e){var r,n,a,i,o,l;return void 0===(n=(r=t).prefix)&&(n=""),void 0===(a=r.suffix)&&(a=""),i=Array.from({length:e.length+1}).map(function(){return!0}),o="-"===e[0],i.fill(!1,0,n.length+ +!!o),l=e.length,i.fill(!1,l-a.length+1,l+1),i},onKeyDown:function(e){var t=e.target,r=e.key,a=t.selectionStart,i=t.selectionEnd,l=t.value;if(void 0===l&&(l=""),("Backspace"===r||"Delete"===r)&&i<c.length)return void e.preventDefault();if(a!==i)return void o(e);"Backspace"===r&&"-"===l[0]&&a===c.length+1&&n&&V(t,1),s&&d&&("Backspace"===r&&l[a-1]===O?(V(t,a-1),e.preventDefault()):"Delete"===r&&l[a]===O&&e.preventDefault()),(null==C?void 0:C.includes(r))&&l[a]===O&&V(t,a+1);var f=!0===u?",":u;"Backspace"===r&&l[a-1]===f&&V(t,a-1),"Delete"===r&&l[a]===f&&V(t,a+1),o(e)},onBlur:function(e){var r=K;r.match(/\d/g)||(r=""),a||(r=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var r=e.split("."),n=r[0].replace(/^0+/,"")||"0",a=r[1]||"";return(t?"-":"")+n+(a?"."+a:"")}(r)),d&&s&&(r=M(r,s,d)),r!==K&&H({formattedValue:z(r,t),value:r,floatValue:parseFloat(r)},{event:e,source:i.event}),l(e)}}));return m.default.createElement(F,Object.assign({},W))}var _=e.i(46614);function L(e,t,r){return void 0===t&&void 0===r?e:void 0!==t&&void 0===r?Math.max(e,t):void 0===t&&void 0!==r?Math.min(e,r):Math.min(Math.max(e,t),r)}var K=e.i(31316),U=e.i(44762),H=e.i(24848),W=e.i(43798),Z=e.i(8954),X=e.i(14037),q=e.i(89549),J=e.i(21879),Q=e.i(78565),Y=e.i(25436);function ee({direction:e,style:t,...r}){return(0,o.jsx)("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:"up"===e?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:(0,o.jsx)("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var et={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};let er=/^(0\.0*|-0(\.0*)?)$/,en=/^-?0\d+(\.\d+)?\.?$/,ea=/\.\d*0$/;function ei(e){return"string"==typeof e&&""!==e&&!Number.isNaN(Number(e))}function eo(e){return"number"==typeof e?e<Number.MAX_SAFE_INTEGER:""===e||ei(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function el(e,t,r){return void 0===e||(void 0===t||e>=t)&&(void 0===r||e<=r)}let eu={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0,allowedDecimalSeparators:[".",","]},es=(0,W.createVarsResolver)((e,{size:t})=>({controls:{"--ni-chevron-size":(0,H.getSize)(t,"ni-chevron-size")}})),ed=(0,J.factory)((e,t)=>{let r=(0,q.useProps)("NumberInput",eu,e),{className:n,classNames:a,styles:i,unstyled:l,vars:u,onChange:s,onValueChange:d,value:c,defaultValue:f,max:h,min:v,step:p,hideControls:x,rightSection:b,isAllowed:y,clampBehavior:j,onBlur:w,allowDecimal:S,decimalScale:N,onKeyDown:D,onKeyDownCapture:k,handlersRef:M,startValue:V,disabled:B,rightSectionPointerEvents:O,allowNegative:C,readOnly:T,size:E,rightSectionWidth:A,stepHoldInterval:I,stepHoldDelay:R,allowLeadingZeros:G,withKeyboardEvents:F,trimLeadingZeroesOnBlur:z,allowedDecimalSeparators:P,attributes:H,...W}=r,J=(0,X.useStyles)({name:"NumberInput",classes:et,props:r,classNames:a,styles:i,unstyled:l,attributes:H,vars:u,varsResolver:es}),{resolvedClassNames:ed,resolvedStyles:ec}=(0,Z.useResolvedStylesApi)({classNames:a,styles:i,props:r}),[ef,eh]=(0,_.useUncontrolled)({value:c,defaultValue:f,finalValue:"",onChange:s}),ev=void 0!==R&&void 0!==I,em=(0,m.useRef)(null),eg=(0,m.useRef)(null),ep=(0,m.useRef)(0),ex=e=>{let t=String(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},eb=e=>{em.current&&void 0!==e&&em.current.setSelectionRange(e,e)},ey=(0,m.useRef)(U.noop);ey.current=()=>{let e;if(!eo(ef))return;let t=Math.max(ex(ef),ex(p)),r=10**t;if(!ei(ef)&&("number"!=typeof ef||Number.isNaN(ef)))e=L(V,v,h);else if(void 0!==h){let t=(Math.round(Number(ef)*r)+Math.round(p*r))/r;e=t<=h?t:h}else e=(Math.round(Number(ef)*r)+Math.round(p*r))/r;let n=e.toFixed(t);eh(parseFloat(n)),d?.({floatValue:parseFloat(n),formattedValue:n,value:n},{source:"increment"}),setTimeout(()=>eb(em.current?.value.length),0)};let ej=(0,m.useRef)(U.noop);ej.current=()=>{let e;if(!eo(ef))return;let t=void 0!==v?v:C?Number.MIN_SAFE_INTEGER:0,r=Math.max(ex(ef),ex(p)),n=10**r;if(!ei(ef)&&"number"!=typeof ef||Number.isNaN(ef))e=L(V,t,h);else{let r=(Math.round(Number(ef)*n)-Math.round(p*n))/n;e=void 0!==t&&r<t?t:r}let a=e.toFixed(r);eh(parseFloat(a)),d?.({floatValue:parseFloat(a),formattedValue:a,value:a},{source:"decrement"}),setTimeout(()=>eb(em.current?.value.length),0)},(0,K.assignRef)(M,{increment:ey.current,decrement:ej.current});let ew=e=>{e?ey.current?.():ej.current?.(),ep.current+=1},eS=e=>{if(ew(e),ev){let t="number"==typeof I?I:I(ep.current);eg.current=window.setTimeout(()=>eS(e),t)}},eN=(e,t)=>{e.preventDefault(),em.current?.focus(),ew(t),ev&&(eg.current=window.setTimeout(()=>eS(t),R))},eD=()=>{eg.current&&window.clearTimeout(eg.current),eg.current=null,ep.current=0},ek=(0,o.jsxs)("div",{...J("controls"),children:[(0,o.jsx)(Y.UnstyledButton,{...J("control"),tabIndex:-1,"aria-hidden":!0,disabled:B||"number"==typeof ef&&void 0!==h&&ef>=h,mod:{direction:"up"},onMouseDown:e=>e.preventDefault(),onPointerDown:e=>{eN(e,!0)},onPointerUp:eD,onPointerLeave:eD,children:(0,o.jsx)(ee,{direction:"up"})}),(0,o.jsx)(Y.UnstyledButton,{...J("control"),tabIndex:-1,"aria-hidden":!0,disabled:B||"number"==typeof ef&&void 0!==v&&ef<=v,mod:{direction:"down"},onMouseDown:e=>e.preventDefault(),onPointerDown:e=>{eN(e,!1)},onPointerUp:eD,onPointerLeave:eD,children:(0,o.jsx)(ee,{direction:"down"})})]});return(0,o.jsx)(Q.InputBase,{component:$,allowNegative:C,className:(0,g.default)(et.root,n),size:E,inputMode:"decimal",...W,readOnly:T,disabled:B,value:ef,getInputRef:(0,K.useMergedRef)(t,em),onValueChange:(e,t)=>{var r,n;"event"===t.source&&eh((r=e.floatValue,n=e.value,("number"==typeof r?!(r<Number.MAX_SAFE_INTEGER):!!Number.isNaN(Number(r)))||Number.isNaN(r)||!(14>n.toString().replace(".","").length)||""===n||er.test(e.value)||G&&en.test(e.value)||ea.test(e.value))?e.value:e.floatValue),d?.(e,t)},rightSection:x||T||!eo(ef)?b:b||ek,classNames:ed,styles:ec,unstyled:l,__staticSelector:"NumberInput",decimalScale:S?N:0,onKeyDown:e=>{D?.(e),!T&&F&&("ArrowUp"===e.key&&(e.preventDefault(),ey.current?.()),"ArrowDown"===e.key&&(e.preventDefault(),ej.current?.()))},onKeyDownCapture:e=>{if(k?.(e),"Backspace"===e.key){let t=em.current;t&&0===t.selectionStart&&t.selectionStart===t.selectionEnd&&(e.preventDefault(),window.setTimeout(()=>eb(0),0))}},rightSectionPointerEvents:O??(B?"none":void 0),rightSectionWidth:A??`var(--ni-right-section-width-${E||"sm"})`,allowLeadingZeros:G,allowedDecimalSeparators:P,onBlur:e=>{let t,r,n=ef;"blur"===j&&"number"==typeof n&&(n=L(n,v,h)),z&&"string"==typeof n&&15>ex(n)&&(n=Number.isNaN(r=parseFloat(t=n.toString().replace(/^0+(?=\d)/,"")))?t:r>Number.MAX_SAFE_INTEGER?void 0!==h?h:t:L(r,v,h)),ef!==n&&eh(n),w?.(e)},attributes:H,isAllowed:e=>"strict"===j?y?y(e)&&el(e.floatValue,v,h):el(e.floatValue,v,h):!y||y(e)})});ed.classes={...Q.InputBase.classes,...et},ed.displayName="@mantine/core/NumberInput";var ec=e.i(81363),ef=e.i(77936),eh=e.i(94229),ev=e.i(25293),em=e.i(33550);let eg=(0,em.default)("outline","arrow-autofit-down","ArrowAutofitDown",[["path",{d:"M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h8",key:"svg-0"}],["path",{d:"M18 4v17",key:"svg-1"}],["path",{d:"M15 18l3 3l3 -3",key:"svg-2"}]]),ep=(0,em.default)("outline","player-play","PlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);var ex=e.i(18716);let eb=(0,em.default)("outline","user-plus","UserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);function ey(e){let t=0,r=0;for(let n of e)t+=n.value,"A"===n.rank&&r++;for(;t>21&&r>0;)t-=10,r--;let n=2===e.length&&21===t,a=e.some(e=>"A"===e.rank)&&t<=21&&r>0;return{total:t,isSoft:a,isBlackjack:n}}function ej({card:e}){let t="♥"===e.suit||"♦"===e.suit;return(0,o.jsx)(c.Card,{style:{width:52,height:72,borderRadius:8,background:"var(--mantine-color-6)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(eh.Text,{c:t?"red":"black",fw:700,size:"lg",children:`${e.rank}${e.suit}`})})}function ew(){return(0,o.jsx)(s.Box,{style:{width:52,height:72,borderRadius:8,border:"1px dashed var(--mantine-color-dark-4)",background:"repeating-linear-gradient(45deg, var(--mantine-color-dark-6), var(--mantine-color-dark-6) 8px, var(--mantine-color-dark-5) 8px, var(--mantine-color-dark-5) 16px)"}})}function eS(){let e,[t,r]=(0,m.useState)([]),[n,a]=(0,m.useState)({hand:[],hideHole:!0}),[i,s]=(0,m.useState)([]),[g,p]=(0,m.useState)(-1),[x,b]=(0,m.useState)(""),[y,j]=(0,m.useState)(1),[w,S]=(0,m.useState)("betting"),[N,D]=(0,m.useState)(!1),[k,M]=(0,m.useState)(null),[V,B]=(0,m.useState)(!1);function O(e,t){let r=e.filter(e=>!e.isOut);if(0===r.length)return null;if(!t)return r[0].id;let n=e.map(e=>e.id),a=Math.max(0,n.indexOf(t))+1;for(let t=0;t<n.length;t++){let t=n[a%n.length],r=e.find(e=>e.id===t);if(r&&!r.isOut)return r.id;a++}return r[0].id}function C(){let e=k??O(t,k),r=t.filter(t=>t.id!==e&&!t.isOut);return 0!==r.length&&r.every(e=>{let t="number"==typeof e.bet?e.bet:0;return t>0&&t<=e.coins})}let T="betting"===w&&t.filter(e=>!e.isOut).length>=2&&C(),E=(0,m.useMemo)(()=>ey(n.hand),[n.hand]);function A(e,t=1){let r=[];for(let n=0;n<t;n++){let t=e.pop();if(!t)throw Error("牌堆已空");r.push(t)}return r}function I(){let e=[...i],[t]=A(e);return s(e),t}function R(){p(e=>{let r=t.findIndex((t,r)=>r>e&&"pending"===t.status&&!t.isDealer&&!t.isOut);return -1===r?(a(e=>({...e,hideHole:!1})),B(!0),-1):r})}function G(){if(g<0||N)return;D(!0);let e=I(),n=[...t],a={...n[g]};a.hand=[...a.hand,e];let i=ey(a.hand).total;i>21?a.status="bust":21===i&&(a.status="stand"),n[g]=a,r(n),setTimeout(()=>{let e=n[g];(ey(e?.hand??[]).total>=21||e?.status!=="pending")&&R(),D(!1)},0)}function F(){g<0||(r(e=>{let t=[...e];return t[g]={...t[g],status:"stand"},t}),R())}function z(){let e=ey(n.hand).total;r(t=>{let r=0;return t.map(t=>{let n;if(t.isDealer)return{...t};if(t.isOut)return{...t,result:void 0};let a=ey(t.hand).total;n="bust"===t.status?"lose":e>21||"blackjack"===t.status&&21!==e||a>e?"win":a<e?"lose":"push";let i=Math.max(0,Math.min(t.bet??0,t.coins));"win"===n?r-=i:"lose"===n&&(r+=i);let o="win"===n?t.coins+i:"lose"===n?Math.max(0,t.coins-i):t.coins,l=o<=0||t.isOut;return{...t,result:n,coins:o,isOut:l}}).map(e=>{if(!e.isDealer)return e;let t=Math.max(0,e.coins+r),n=r>0?"win":r<0?"lose":"push";return{...e,coins:t,result:n,isOut:t<=0||e.isOut}})}),S("settled"),B(!1)}function P({player:e}){let t=t=>{r(r=>r.map(r=>r.id===e.id?{...r,bet:Math.max(1,Math.min(Math.floor(t)||0,r.coins))}:r))};return(0,o.jsxs)(ef.Stack,{gap:6,style:{width:"100%"},children:[(0,o.jsxs)(v.Group,{gap:"xs",wrap:"nowrap",children:[(0,o.jsx)(eh.Text,{c:"gray.5",children:"下注"}),(0,o.jsx)(ed,{value:e.bet??0,onChange:e=>{t("number"==typeof e?e:Number(e))},min:1,max:e.coins,clampBehavior:"strict",inputMode:"numeric",style:{width:120}})]}),(0,o.jsxs)(v.Group,{gap:4,wrap:"wrap",children:[(0,o.jsx)(d.Button,{size:"xs",variant:"light",onClick:()=>t(10),children:"10"}),(0,o.jsx)(d.Button,{size:"xs",variant:"light",onClick:()=>t(20),children:"20"}),(0,o.jsx)(d.Button,{size:"xs",variant:"light",onClick:()=>t(50),children:"50"}),(0,o.jsx)(d.Button,{size:"xs",variant:"light",onClick:()=>t(Math.min(e.coins,100)),children:"最大"})]})]})}return(0,o.jsxs)(f.Container,{py:20,w:"100%",children:[(0,o.jsx)(l.AppHeader,{title:"二十一点"}),(0,o.jsxs)(c.Card,{radius:"md",withBorder:!0,mt:"md",p:"md",children:[(0,o.jsxs)(v.Group,{align:"center",gap:"xs",mb:"sm",children:[(0,o.jsx)(eb,{size:18,color:"var(--mantine-color-blue-5)"}),(0,o.jsx)(eh.Text,{children:"添加玩家"}),(0,o.jsxs)(u.Badge,{variant:"light",color:"blue",radius:"sm",size:"sm",children:[t.length,"/",6]})]}),(0,o.jsxs)(ec.SimpleGrid,{cols:{base:1,sm:2},spacing:"md",children:[(0,o.jsxs)(v.Group,{children:[(0,o.jsx)(ev.TextInput,{placeholder:"例如：Alice",value:x,onChange:e=>b(e.currentTarget.value),style:{flex:1}}),(0,o.jsx)(d.Button,{size:"sm",onClick:()=>{x.trim()&&(r(e=>e.length>=6?e:[...e,{id:`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:x.trim(),hand:[],status:"pending",score:0,coins:100,bet:0,isDealer:!1,isOut:!1}]),b(""))},leftSection:(0,o.jsx)(eb,{size:16}),disabled:t.length>=6,children:"添加"})]}),(0,o.jsxs)(v.Group,{children:[(0,o.jsx)(ed,{value:y,onChange:e=>j("string"==typeof e?Number(e):e),min:1,max:6,clampBehavior:"strict",style:{width:120}}),(0,o.jsx)(d.Button,{size:"sm",variant:"light",onClick:()=>{var e;(e="number"==typeof y?y:1)<=0||r(t=>{let r=Math.min(Math.max(0,6-t.length),e),n=[];for(let e=0;e<r;e++){let r=`${Date.now()}-${e}-${Math.random().toString(36).slice(2,6)}`;n.push({id:r,name:`玩家${t.length+e+1}`,hand:[],status:"pending",score:0,coins:100,bet:0,isDealer:!1,isOut:!1})}return[...t,...n]})},leftSection:(0,o.jsx)(eb,{size:16}),disabled:t.length>=6,children:"快速添加"})]})]}),(0,o.jsxs)(eh.Text,{mt:"sm",c:"gray.5",children:["已添加 ",t.length,"/",6," 名；每人初始金币 100。"]}),(0,o.jsxs)(v.Group,{mt:"md",justify:"space-between",children:[(0,o.jsxs)(v.Group,{children:[(0,o.jsx)(d.Button,{onClick:function(){if(t.filter(e=>!e.isOut).length<2||!C())return;let e=function(){let e=["♠","♥","♦","♣"],t=[{r:"A",v:11},{r:"2",v:2},{r:"3",v:3},{r:"4",v:4},{r:"5",v:5},{r:"6",v:6},{r:"7",v:7},{r:"8",v:8},{r:"9",v:9},{r:"10",v:10},{r:"J",v:10},{r:"Q",v:10},{r:"K",v:10}],r=[];for(let n=0;n<2;n++)for(let n of e)for(let{r:e,v:a}of t)r.push({rank:e,value:a,suit:n});for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}return r}();s(e);let n=k??O(t,k);if(!n)return;M(n);let i=t.map(e=>({...e,hand:[],status:"pending",result:void 0,isDealer:e.id===n})),o={hand:[],hideHole:!0};for(let t=0;t<2;t++){for(let t=0;t<i.length;t++)i[t].isDealer||i[t].isOut||i[t].hand.push(...A(e));o.hand.push(...A(e))}let l=ey(o.hand).isBlackjack;for(let e of i)e.isDealer||e.isOut||ey(e.hand).isBlackjack&&(e.status="blackjack");if(r(i),a(o),S("playing"),l){r(()=>{let e=0;return i.map(t=>{if(t.isDealer||t.isOut)return{...t};let r=ey(t.hand).isBlackjack?"push":"lose",n=Math.max(0,Math.min(t.bet??0,t.coins));"lose"===r&&(e+=n);let a="lose"===r?Math.max(0,t.coins-n):t.coins,i=a<=0||t.isOut;return{...t,status:t.status,result:r,coins:a,isOut:i}}).map(t=>{if(!t.isDealer)return t;let r=Math.max(0,t.coins+e),n=e>0?"win":e<0?"lose":"push";return{...t,coins:r,result:n,isOut:r<=0||t.isOut}})}),a({...o,hideHole:!1}),p(-1),S("settled"),B(!1);return}p(i.findIndex(e=>"pending"===e.status&&!e.isDealer&&!e.isOut)),B(!1)},disabled:!T,leftSection:(0,o.jsx)(ep,{size:16,stroke:2}),children:"开始游戏"}),(0,o.jsx)(d.Button,{color:"orange",onClick:function(){let e=O(t,k);M(e),r(t=>t.map(t=>({...t,hand:[],status:"pending",result:void 0,isDealer:t.id===e}))),a({hand:[],hideHole:!0}),s([]),p(-1),B(!1),S("betting")},disabled:0===t.length||"settled"!==w,leftSection:(0,o.jsx)(eg,{size:16,stroke:2}),children:"下一局"})]}),(0,o.jsx)(d.Button,{variant:"outline",color:"gray",onClick:function(){r([]),a({hand:[],hideHole:!0}),s([]),p(-1),S("betting"),M(null),B(!1)},leftSection:(0,o.jsx)(ex.IconRefresh,{size:16,stroke:2}),children:"重置"})]})]}),(0,o.jsx)(h.Divider,{variant:"dashed",labelPosition:"center",my:"md",label:"游戏区域"}),(0,o.jsxs)(ef.Stack,{children:[(0,o.jsxs)(c.Card,{shadow:"md",withBorder:!0,radius:"md",p:"md",children:[(0,o.jsxs)(v.Group,{justify:"space-between",mb:8,children:[(0,o.jsxs)(v.Group,{gap:8,children:[(0,o.jsxs)(eh.Text,{fw:700,children:["庄家",k?`：${t.find(e=>e.id===k)?.name??""}`:""]}),k&&(0,o.jsxs)(u.Badge,{color:"yellow",variant:"light",children:["金币：",t.find(e=>e.id===k)?.coins??0]}),k&&((e=t.find(e=>e.id===k)?.result)?(0,o.jsx)(u.Badge,{color:"win"===e?"green":"lose"===e?"red":"yellow",children:"win"===e?"胜":"lose"===e?"负":"平"}):null)]}),!n.hideHole&&(0,o.jsxs)(u.Badge,{color:E.total>21?"red":"gray",children:["点数：",E.total]})]}),(0,o.jsx)(v.Group,{children:n.hand.map((e,t)=>1===t&&n.hideHole?(0,o.jsx)(ew,{},t):(0,o.jsx)(ej,{card:e},t))}),V&&"settled"!==w&&(0,o.jsxs)(v.Group,{mt:"sm",children:[(0,o.jsx)(d.Button,{onClick:function(){if(!V||N)return;D(!0);let e=I(),t=[...n.hand,e];a({hand:t,hideHole:!1});let r=ey(t);setTimeout(()=>{(r.total>21||21===r.total)&&z(),D(!1)},0)},color:"red",disabled:N,children:"庄家要牌"}),(0,o.jsx)(d.Button,{onClick:function(){V&&z()},color:"blue",children:"庄家停牌"})]}),n.hideHole&&(0,o.jsx)(eh.Text,{c:"gray.5",mt:"xs",children:"第二张牌未揭示"})]}),t.length>0?(0,o.jsx)(function(){return(0,o.jsx)(ec.SimpleGrid,{cols:{base:1,sm:2,md:3},spacing:"md",children:t.filter(e=>!e.isDealer).map(e=>{let r=ey(e.hand),n=t.findIndex(t=>t.id===e.id)===g;return(0,o.jsxs)(c.Card,{shadow:n?"md":"sm",radius:"md",p:"md",withBorder:!0,children:[(0,o.jsxs)(v.Group,{justify:"space-between",mb:8,children:[(0,o.jsxs)(v.Group,{gap:8,children:[(0,o.jsx)(eh.Text,{fw:700,children:e.name}),(0,o.jsxs)(u.Badge,{color:"yellow",variant:"light",children:["金币：",e.coins]}),e.isOut&&(0,o.jsx)(u.Badge,{color:"red",children:"出局"}),n&&(0,o.jsx)(u.Badge,{color:"blue",children:"当前操作"})]}),(0,o.jsxs)(v.Group,{gap:8,children:["bust"===e.status&&(0,o.jsx)(u.Badge,{color:"red",children:"爆了"}),"blackjack"===e.status&&(0,o.jsx)(u.Badge,{color:"green",children:"黑杰克"}),"stand"===e.status&&(0,o.jsx)(u.Badge,{color:"gray",children:"停牌"}),e.result&&(0,o.jsx)(u.Badge,{color:"win"===e.result?"green":"lose"===e.result?"red":"yellow",children:"win"===e.result?"胜":"lose"===e.result?"负":"平"})]})]}),(0,o.jsx)(v.Group,{children:e.hand.map((e,t)=>(0,o.jsx)(ej,{card:e},t))}),(0,o.jsxs)(v.Group,{justify:"space-between",mt:"sm",children:[(0,o.jsxs)(eh.Text,{c:"gray.4",children:["点数：",r.total]}),"betting"===w&&!e.isOut&&(0,o.jsx)(P,{player:e}),n&&"playing"===w&&!e.isOut&&(0,o.jsxs)(v.Group,{children:[(0,o.jsx)(d.Button,{onClick:G,color:"rgba(37, 132, 186, 0.8)",size:"sm",disabled:N,children:"要牌"}),(0,o.jsx)(d.Button,{onClick:F,variant:"gradient",size:"sm",children:"停牌"})]})]})]},e.id)})})},{}):(0,o.jsx)(c.Card,{withBorder:!0,radius:"md",p:"md",children:(0,o.jsx)(eh.Text,{c:"gray.5",children:"请先添加至少一位玩家并点击开始游戏。"})})]})]})}e.s(["default",()=>eS],77829)}]);