(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32503,e=>{"use strict";var t=e.i(71645);function o(e){let o=t.default.version;return"string"!=typeof t.default.version||o.startsWith("18.")?e?.ref:e?.props?.ref}e.s(["getRefProp",()=>o])},68637,e=>{"use strict";var t=e.i(43476),o=e.i(71645);e.i(7670);var r=e.i(17303);function i(e,t,o,r){return"center"===e||"center"===r?{top:t}:"end"===e?{bottom:o}:"start"===e?{top:o}:{}}function n(e,t,o,r,i){return"center"===e||"center"===r?{left:t}:"end"===e?{["ltr"===i?"right":"left"]:o}:"start"===e?{["ltr"===i?"left":"right"]:o}:{}}let l={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"},s=(0,o.forwardRef)(({position:e,arrowSize:o,arrowOffset:s,arrowRadius:a,arrowPosition:d,visible:u,arrowX:c,arrowY:p,style:f,...h},g)=>{let{dir:m}=(0,r.useDirection)();return u?(0,t.jsx)("div",{...h,ref:g,style:{...f,...function({position:e,arrowSize:t,arrowOffset:o,arrowRadius:r,arrowPosition:s,arrowX:a,arrowY:d,dir:u}){let[c,p="center"]=e.split("-"),f={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[l[c]]:r},h=-t/2;return"left"===c?{...f,...i(p,d,o,s),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:"right"===c?{...f,...i(p,d,o,s),left:h,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:"top"===c?{...f,...n(p,a,o,s,u),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:"bottom"===c?{...f,...n(p,a,o,s,u),top:h,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}({position:e,arrowSize:o,arrowOffset:s,arrowRadius:a,arrowPosition:d,dir:m,arrowX:c,arrowY:p})}}):null});s.displayName="@mantine/core/FloatingArrow",e.s(["FloatingArrow",()=>s],68637)},68598,e=>{"use strict";function t(e,t){if("rtl"===e&&(t.includes("right")||t.includes("left"))){let[e,o]=t.split("-"),r="right"===e?"left":"right";return void 0===o?r:`${r}-${o}`}return t}e.s(["getFloatingPosition",()=>t])},84086,19488,e=>{"use strict";var t=e.i(43476),o=e.i(71645),r=e.i(7670),i=e.i(31316),n=e.i(95991),l=e.i(98526),s=e.i(24848),a=e.i(32503),d=e.i(43798),u=e.i(89549),c=e.i(14037),p=e.i(44662),f=e.i(21879),h=e.i(17303),g=e.i(68637),m=e.i(68598),v=e.i(95556),x=e.i(98193);let y={duration:100,transition:"fade"};function b(e,t){return{...y,...t,...e}}var w=e.i(15259),j=e.i(22442);function P(e,t){return Array.isArray(e)?[...e].reduce((e,o)=>({...e,...P(o,t)}),{}):"function"==typeof e?e(t):null==e?{}:e}e.s(["getStyleObject",()=>P],19488);var R=e.i(43489),T=e.i(58950),B=e.i(29315),C={tooltip:"m_1b3c8819",arrow:"m_f898399f"};let F={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:(0,l.getDefaultZIndex)("popover")},M=(0,d.createVarsResolver)((e,{radius:t,color:o})=>({tooltip:{"--tooltip-radius":void 0===t?void 0:(0,s.getRadius)(t),"--tooltip-bg":o?(0,w.getThemeColor)(o,e):void 0,"--tooltip-color":o?"var(--mantine-color-white)":void 0}})),E=(0,f.factory)((e,r)=>{let l=(0,u.useProps)("TooltipFloating",F,e),{children:s,refProp:d,withinPortal:f,style:h,className:g,classNames:m,styles:x,unstyled:y,radius:b,color:w,label:E,offset:D,position:k,multiline:N,zIndex:S,disabled:O,defaultOpened:A,variant:L,vars:G,portalProps:$,attributes:z,...I}=l,U=(0,j.useMantineTheme)(),X=(0,c.useStyles)({name:"TooltipFloating",props:l,classes:C,className:g,style:h,classNames:m,styles:x,unstyled:y,attributes:z,rootSelector:"tooltip",vars:G,varsResolver:M}),{handleMouseMove:Y,x:_,y:H,opened:V,boundaryRef:K,floating:Z,setOpened:q}=function({offset:e,position:t,defaultOpened:r}){let[i,n]=(0,o.useState)(r),l=(0,o.useRef)(null),{x:s,y:a,elements:d,refs:u,update:c,placement:p}=(0,R.useFloating)({placement:t,middleware:[(0,T.shift)({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=p.includes("right")?e:t.includes("left")?-1*e:0,h=p.includes("bottom")?e:t.includes("top")?-1*e:0,g=(0,o.useCallback)(({clientX:e,clientY:t})=>{u.setPositionReference({getBoundingClientRect:()=>({width:0,height:0,x:e,y:t,left:e+f,top:t+h,right:e,bottom:t})})},[d.reference]);return(0,o.useEffect)(()=>{if(u.floating.current){let e=l.current;e.addEventListener("mousemove",g);let t=(0,B.getOverflowAncestors)(u.floating.current);return t.forEach(e=>{e.addEventListener("scroll",c)}),()=>{e.removeEventListener("mousemove",g),t.forEach(e=>{e.removeEventListener("scroll",c)})}}},[d.reference,u.floating.current,c,g,i]),{handleMouseMove:g,x:s,y:a,opened:i,setOpened:n,boundaryRef:l,floating:u.setFloating}}({offset:D,position:k,defaultOpened:A});if(!(0,n.isElement)(s))throw Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");let W=(0,i.useMergedRef)(K,(0,a.getRefProp)(s),r),J=s.props;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.OptionalPortal,{...$,withinPortal:f,children:(0,t.jsx)(p.Box,{...I,...X("tooltip",{style:{...P(h,U),zIndex:S,display:!O&&V?"block":"none",top:(H&&Math.round(H))??"",left:(_&&Math.round(_))??""}}),variant:L,ref:Z,mod:{multiline:N},children:E})}),(0,o.cloneElement)(s,{...J,[d]:W,onMouseEnter:e=>{J.onMouseEnter?.(e),Y(e),q(!0)},onMouseLeave:e=>{J.onMouseLeave?.(e),q(!1)}})]})});E.classes=C,E.displayName="@mantine/core/TooltipFloating";let D=(0,o.createContext)(!1),k=D.Provider,N={openDelay:0,closeDelay:0};function S(e){let{openDelay:o,closeDelay:r,children:i}=(0,u.useProps)("TooltipGroup",N,e);return(0,t.jsx)(k,{value:!0,children:(0,t.jsx)(R.FloatingDelayGroup,{delay:{open:o,close:r},children:i})})}S.displayName="@mantine/core/TooltipGroup",S.extend=e=>e;var O=e.i(53760),A=e.i(51937),L=e.i(45500);let G={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:(0,l.getDefaultZIndex)("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},$=(0,d.createVarsResolver)((e,{radius:t,color:o,variant:r,autoContrast:i})=>{let n=e.variantColorResolver({theme:e,color:o||e.primaryColor,autoContrast:i,variant:r||"filled"});return{tooltip:{"--tooltip-radius":void 0===t?void 0:(0,s.getRadius)(t),"--tooltip-bg":o?n.background:void 0,"--tooltip-color":o?n.color:void 0}}}),z=(0,f.factory)((e,l)=>{let s=(0,u.useProps)("Tooltip",G,e),{children:d,position:f,refProp:y,label:w,openDelay:j,closeDelay:P,onPositionChange:B,opened:F,defaultOpened:M,withinPortal:E,radius:k,color:N,classNames:S,styles:z,unstyled:I,style:U,className:X,withArrow:Y,arrowSize:_,arrowOffset:H,arrowRadius:V,arrowPosition:K,offset:Z,transitionProps:q,multiline:W,events:J,zIndex:Q,disabled:ee,positionDependencies:et,onClick:eo,onMouseEnter:er,onMouseLeave:ei,inline:en,variant:el,keepMounted:es,vars:ea,portalProps:ed,mod:eu,floatingStrategy:ec,middlewares:ep,autoContrast:ef,attributes:eh,target:eg,...em}=(0,u.useProps)("Tooltip",G,s),{dir:ev}=(0,h.useDirection)(),ex=(0,o.useRef)(null),ey=function(e){let t,r,[i,n]=(0,o.useState)(e.defaultOpened),l="boolean"==typeof e.opened?e.opened:i,s=(0,o.useContext)(D),a=(0,A.useId)(),d=(0,o.useCallback)(e=>{n(e),e&&y(a)},[a]),{x:u,y:c,context:p,refs:f,placement:h,middlewareData:{arrow:{x:g,y:m}={}}}=(0,R.useFloating)({strategy:e.strategy,placement:e.position,open:l,onOpenChange:d,middleware:(t=function(e){if(void 0===e)return{shift:!0,flip:!0};let t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(e.middlewares),r=[(0,T.offset)(e.offset)],t.shift&&r.push((0,T.shift)("boolean"==typeof t.shift?{padding:8}:{padding:8,...t.shift})),t.flip&&r.push("boolean"==typeof t.flip?(0,T.flip)():(0,T.flip)(t.flip)),r.push((0,T.arrow)({element:e.arrowRef,padding:e.arrowOffset})),t.inline?r.push("boolean"==typeof t.inline?(0,T.inline)():(0,T.inline)(t.inline)):e.inline&&r.push((0,T.inline)()),r),whileElementsMounted:O.autoUpdate}),{delay:v,currentId:x,setCurrentId:y}=(0,R.useDelayGroup)(p,{id:a}),{getReferenceProps:b,getFloatingProps:w}=(0,R.useInteractions)([(0,R.useHover)(p,{enabled:e.events?.hover,delay:s?v:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),(0,R.useFocus)(p,{enabled:e.events?.focus,visibleOnly:!0}),(0,R.useRole)(p,{role:"tooltip"}),(0,R.useDismiss)(p,{enabled:void 0===e.opened})]);(0,L.useDidUpdate)(()=>{e.onPositionChange?.(h)},[h]);let j=l&&x&&x!==a;return{x:u,y:c,arrowX:g,arrowY:m,reference:f.setReference,floating:f.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:j,opened:l,placement:h}}({position:(0,m.getFloatingPosition)(ev,f),closeDelay:P,openDelay:j,onPositionChange:B,opened:F,defaultOpened:M,events:J,arrowRef:ex,arrowOffset:H,offset:"number"==typeof Z?Z+(Y?_/2:0):Z,positionDependencies:[...et,eg??d],inline:en,strategy:ec,middlewares:ep});(0,o.useEffect)(()=>{let e=eg instanceof HTMLElement?eg:"string"==typeof eg?document.querySelector(eg):eg?.current||null;e&&ey.reference(e)},[eg,ey]);let eb=(0,c.useStyles)({name:"Tooltip",props:s,classes:C,className:X,style:U,classNames:S,styles:z,unstyled:I,attributes:eh,rootSelector:"tooltip",vars:ea,varsResolver:$});if(!eg&&!(0,n.isElement)(d))return null;if(eg){let e=b(q,{duration:100,transition:"fade"});return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(v.OptionalPortal,{...ed,withinPortal:E,children:(0,t.jsx)(x.Transition,{...e,keepMounted:es,mounted:!ee&&!!ey.opened,duration:ey.isGroupPhase?10:e.duration,children:e=>(0,t.jsxs)(p.Box,{...em,"data-fixed":"fixed"===ec||void 0,variant:el,mod:[{multiline:W},eu],...ey.getFloatingProps({ref:ey.floating,className:eb("tooltip").className,style:{...eb("tooltip").style,...e,zIndex:Q,top:ey.y??0,left:ey.x??0}}),children:[w,(0,t.jsx)(g.FloatingArrow,{ref:ex,arrowX:ey.arrowX,arrowY:ey.arrowY,visible:Y,position:ey.placement,arrowSize:_,arrowOffset:H,arrowRadius:V,arrowPosition:K,...eb("arrow")})]})})})})}let ew=d.props,ej=(0,i.useMergedRef)(ey.reference,(0,a.getRefProp)(d),l),eP=b(q,{duration:100,transition:"fade"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.OptionalPortal,{...ed,withinPortal:E,children:(0,t.jsx)(x.Transition,{...eP,keepMounted:es,mounted:!ee&&!!ey.opened,duration:ey.isGroupPhase?10:eP.duration,children:e=>(0,t.jsxs)(p.Box,{...em,"data-fixed":"fixed"===ec||void 0,variant:el,mod:[{multiline:W},eu],...ey.getFloatingProps({ref:ey.floating,className:eb("tooltip").className,style:{...eb("tooltip").style,...e,zIndex:Q,top:ey.y??0,left:ey.x??0}}),children:[w,(0,t.jsx)(g.FloatingArrow,{ref:ex,arrowX:ey.arrowX,arrowY:ey.arrowY,visible:Y,position:ey.placement,arrowSize:_,arrowOffset:H,arrowRadius:V,arrowPosition:K,...eb("arrow")})]})})}),(0,o.cloneElement)(d,ey.getReferenceProps({onClick:eo,onMouseEnter:er,onMouseLeave:ei,onMouseMove:s.onMouseMove,onPointerDown:s.onPointerDown,onPointerEnter:s.onPointerEnter,className:(0,r.default)(X,ew.className),...ew,[y]:ej}))]})});z.classes=C,z.displayName="@mantine/core/Tooltip",z.Floating=E,z.Group=S,e.s(["Tooltip",()=>z],84086)},83010,e=>{"use strict";var t=e.i(43476),o=e.i(71645),r=e.i(26564),i=e.i(69625),n=e.i(44662),l=e.i(33372),s=e.i(41710),a=e.i(26200),d=e.i(55150),u=e.i(77936),c=e.i(94229),p=e.i(84086);let f=[{dr:-1,dc:0},{dr:1,dc:0},{dr:0,dc:-1},{dr:0,dc:1},{dr:-1,dc:-1},{dr:-1,dc:1},{dr:1,dc:-1},{dr:1,dc:1}];function h(e,t){return e>=0&&e<8&&t>=0&&t<8}function g(){let e=Array.from({length:8},()=>Array.from({length:8},()=>0));return e[3][3]=-1,e[4][4]=-1,e[3][4]=1,e[4][3]=1,e}function m(e,t){let o=[];for(let r=0;r<8;r++)for(let i=0;i<8;i++){let n=function(e,t,o,r){if(0!==e[t][o])return[];let i=[];for(let{dr:n,dc:l}of f){let s=t+n,a=o+l,d=[];for(;h(s,a)&&e[s][a]===-r;)d.push({r:s,c:a}),s+=n,a+=l;d.length>0&&h(s,a)&&e[s][a]===r&&i.push(...d)}return i}(e,r,i,t);n.length>0&&o.push({r,c:i,flips:n})}return o}function v(e){return 1===e?"黑":"白"}function x({value:e,isValid:o,onClick:r,isLastMove:i}){return(0,t.jsxs)(n.Box,{onClick:r,className:`othello-cell${o?" is-valid":""}`,children:[o&&0===e&&(0,t.jsx)(n.Box,{className:"othello-cell__hint"}),0!==e&&(0,t.jsx)(n.Box,{className:`othello-disc ${1===e?"othello-disc--black":"othello-disc--white"}${i?" is-last":""}`})]})}function y(){let[e,f]=(0,o.useState)(()=>g()),[h,y]=(0,o.useState)(1),[b,w]=(0,o.useState)(null),[j,P]=(0,o.useState)(null),[R,T]=(0,o.useState)([]),B=(0,o.useMemo)(()=>m(e,h),[e,h]),C=(0,o.useMemo)(()=>(function(e){let t=0,o=0;for(let r=0;r<8;r++)for(let i=0;i<8;i++)1===e[r][i]&&t++,-1===e[r][i]&&o++;return{black:t,white:o}})(e),[e]),F=(0,o.useMemo)(()=>0===m(e,1).length&&0===m(e,-1).length,[e]);function M(t,o){if(F)return;let r=B.find(e=>e.r===t&&e.c===o);r&&(T(t=>[...t,{board:e,current:h,lastMove:b}]),f(function(e,t,o){let r=e.map(e=>[...e]);for(let e of(r[t.r][t.c]=o,t.flips))r[e.r][e.c]=o;return r}(e,r,h)),w({r:t,c:o}),y(-1*h))}(0,o.useEffect)(()=>{if(!j)return;let e=window.setTimeout(()=>P(null),1200);return()=>window.clearTimeout(e)},[j]),(0,o.useEffect)(()=>{F||0===m(e,h).length&&(T(t=>[...t,{board:e,current:h,lastMove:b}]),P(`${v(h)}方无可落子，自动跳过回合`),y(-1*h))},[e,h,F]);let E=(0,o.useMemo)(()=>F?C.black===C.white?"平局":C.black>C.white?"黑方胜":"白方胜":null,[F,C]),D=(0,o.useMemo)(()=>{let o=new Set(B.map(e=>`${e.r}-${e.c}`)),r=[];for(let i=0;i<8;i++)for(let l=0;l<8;l++){let s=`${i}-${l}`,a=e[i][l],d=o.has(s),u=b&&b.r===i&&b.c===l,c=d?"可落子":0===a?null:v(a);r.push((0,t.jsx)(n.Box,{className:"cell-wrapper",children:(0,t.jsx)(p.Tooltip,{label:c,openDelay:200,disabled:!c,children:(0,t.jsx)(n.Box,{onClick:()=>M(i,l),className:"cell-inner",children:(0,t.jsx)(x,{value:a,isValid:d,isLastMove:u??void 0,onClick:()=>M(i,l)})})})},s))}return r},[e,B,b]);return(0,t.jsxs)(s.Container,{py:20,id:"page-game-black",children:[(0,t.jsx)(r.AppHeader,{title:"黑白棋（Othello）"}),(0,t.jsxs)(u.Stack,{gap:"md",children:[(0,t.jsxs)(d.Paper,{withBorder:!0,p:"md",radius:"md",children:[(0,t.jsxs)(a.Group,{justify:"space-between",align:"center",children:[(0,t.jsxs)(a.Group,{gap:"xs",align:"center",children:[(0,t.jsxs)(i.Badge,{size:"lg",color:"dark",variant:"filled",children:["黑：",C.black]}),(0,t.jsxs)(i.Badge,{size:"lg",color:"gray",variant:"light",children:["白：",C.white]})]}),(0,t.jsxs)(a.Group,{children:[(0,t.jsx)(l.Button,{onClick:function(){f(g()),y(1),w(null),P(null),T([])},variant:"light",children:"重开"}),(0,t.jsx)(l.Button,{onClick:function(){P(null),T(e=>{if(0===e.length)return e;let t=e[e.length-1];return f(t.board),y(t.current),w(t.lastMove),e.slice(0,-1)})},variant:"outline",disabled:0===R.length,children:"悔棋"})]})]}),(0,t.jsxs)(a.Group,{mt:"sm",gap:"xs",children:[(0,t.jsxs)(i.Badge,{color:1===h?"dark":"gray",variant:"filled",children:["当前回合：",v(h)]}),j&&(0,t.jsx)(i.Badge,{color:"orange",children:j}),F&&(0,t.jsx)(i.Badge,{color:"green",children:E})]})]}),(0,t.jsx)(n.Box,{className:"board-container",children:(0,t.jsx)(n.Box,{className:"board-grid",children:D})}),(0,t.jsx)(d.Paper,{withBorder:!0,p:"md",radius:"md",children:(0,t.jsx)(c.Text,{size:"sm",c:"dimmed",children:"规则：棋子只能落在能吃子的位置。吃子规则为沿直线方向将对方棋子夹在两枚己方棋子之间，夹住的棋子会被翻转为己方颜色。若当前回合无可落子位置，则自动跳过。双方均无可落子位置时，游戏结束，棋子多者获胜。"})})]})]})}e.s(["default",()=>y])}]);